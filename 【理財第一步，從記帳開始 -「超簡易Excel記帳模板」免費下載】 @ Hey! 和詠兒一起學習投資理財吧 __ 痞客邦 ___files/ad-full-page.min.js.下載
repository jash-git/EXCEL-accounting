!function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=e(t((function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}))),n=t((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),o=t((function(e){var t=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=t)})),r=(o.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),a=function(e,t,i){if(r(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}},l=function(e){return"object"==typeof e?null!==e:"function"==typeof e},s=function(e){if(!l(e))throw TypeError(e+" is not an object!");return e},u=function(e){try{return!!e()}catch(e){return!0}},c=!u((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),d=n.document,f=l(d)&&l(d.createElement),h=function(e){return f?d.createElement(e):{}},p=!c&&!u((function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a})),v=function(e,t){if(!l(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!l(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!l(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!l(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,y={f:c?Object.defineProperty:function(e,t,i){if(s(e),t=v(t,!0),s(i),p)try{return g(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},m=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=c?function(e,t,i){return y.f(e,t,m(1,i))}:function(e,t,i){return e[t]=i,e},b=function(e,t,i){var r,l,s,u=e&b.F,c=e&b.G,d=e&b.S,f=e&b.P,h=e&b.B,p=e&b.W,v=c?o:o[t]||(o[t]={}),g=v.prototype,y=c?n:d?n[t]:(n[t]||{}).prototype;for(r in c&&(i=t),i)(l=!u&&y&&void 0!==y[r])&&r in v||(s=l?y[r]:i[r],v[r]=c&&"function"!=typeof y[r]?i[r]:h&&l?a(s,n):p&&y[r]==s?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(s):f&&"function"==typeof s?a(Function.call,s):s,f&&((v.virtual||(v.virtual={}))[r]=s,e&b.R&&g&&!g[r]&&w(g,r,s)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var k=b;k(k.S+k.F*!c,"Object",{defineProperty:y.f});var _=o.Object,x=function(e,t,i){return _.defineProperty(e,t,i)},S=t((function(e){e.exports={default:x,__esModule:!0}}));e(S);var A=e(t((function(e,t){t.__esModule=!0;var i,n=(i=S)&&i.__esModule?i:{default:i};t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}()}))),E=t((function(e){!function(t){var i,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=w;var c="suspendedStart",d="suspendedYield",f="executing",h="completed",p={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==n&&o.call(y,a)&&(v=y);var m=x.prototype=k.prototype=Object.create(v);_.prototype=m.constructor=x,x.constructor=_,x[s]=_.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(m),e},u.awrap=function(e){return{__await:e}},S(A.prototype),A.prototype[l]=function(){return this},u.AsyncIterator=A,u.async=function(e,t,i,n){var o=new A(w(e,t,i,n));return u.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(m),m[s]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},u.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return l.type="throw",l.arg=e,t.next=n,o&&(t.method="next",t.arg=i),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;T(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),p}}}function w(e,t,i,n){var o=t&&t.prototype instanceof k?t:k,r=Object.create(o.prototype),a=new P(n||[]);return r._invoke=function(e,t,i){var n=c;return function(o,r){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw r;return j()}for(i.method=o,i.arg=r;;){var a=i.delegate;if(a){var l=E(a,i);if(l){if(l===p)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===c)throw n=h,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=f;var s=b(e,t,i);if("normal"===s.type){if(n=i.done?h:d,s.arg===p)continue;return{value:s.arg,done:i.done}}"throw"===s.type&&(n=h,i.method="throw",i.arg=s.arg)}}}(e,i,a),r}function b(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function k(){}function _(){}function x(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function A(e){var t;this._invoke=function(i,n){function r(){return new Promise((function(t,r){!function t(i,n,r,a){var l=b(e[i],e,n);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&o.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,r,a)}),(function(e){t("throw",e,r,a)})):Promise.resolve(u).then((function(e){s.value=e,r(s)}),a)}a(l.arg)}(i,n,t,r)}))}return t=t?t.then(r,r):r()}}function E(e,t){var n=e.iterator[t.method];if(n===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,E(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=b(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=i,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:i,done:!0}}}(function(){return this}()||Function("return this")())})),L=function(){return this}()||Function("return this")(),T=L.regeneratorRuntime&&Object.getOwnPropertyNames(L).indexOf("regeneratorRuntime")>=0,P=T&&L.regeneratorRuntime;L.regeneratorRuntime=void 0;var M=E;if(T)L.regeneratorRuntime=P;else try{delete L.regeneratorRuntime}catch(e){L.regeneratorRuntime=void 0}var j,O=M,F=Object.freeze({}),C=Math.ceil,I=Math.floor,q=function(e){return isNaN(e=+e)?0:(e>0?I:C)(e)},H=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},V=w,R={}.hasOwnProperty,B=function(e,t){return R.call(e,t)},N={},U={}.toString,D=function(e){return U.call(e).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==D(e)?e.split(""):Object(e)},W=function(e){return z(H(e))},G=Math.min,Y=function(e){return e>0?G(q(e),9007199254740991):0},K=Math.max,J=Math.min,Z=n["__core-js_shared__"]||(n["__core-js_shared__"]={}),Q=function(e){return Z[e]||(Z[e]={})},X=0,$=Math.random(),ee=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++X+$).toString(36))},te=Q("keys"),ie=function(e){return te[e]||(te[e]=ee(e))},ne=(j=!1,function(e,t,i){var n,o=W(e),r=Y(o.length),a=function(e,t){return(e=q(e))<0?K(e+t,0):J(e,t)}(i,r);if(j&&t!=t){for(;r>a;)if((n=o[a++])!=n)return!0}else for(;r>a;a++)if((j||a in o)&&o[a]===t)return j||a||0;return!j&&-1}),oe=ie("IE_PROTO"),re=function(e,t){var i,n=W(e),o=0,r=[];for(i in n)i!=oe&&B(n,i)&&r.push(i);for(;t.length>o;)B(n,i=t[o++])&&(~ne(r,i)||r.push(i));return r},ae="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),le=Object.keys||function(e){return re(e,ae)},se=c?Object.defineProperties:function(e,t){s(e);for(var i,n=le(t),o=n.length,r=0;o>r;)y.f(e,i=n[r++],t[i]);return e},ue=n.document,ce=ue&&ue.documentElement,de=ie("IE_PROTO"),fe=function(){},he=function(){var e,t=h("iframe"),i=ae.length;for(t.style.display="none",ce.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),he=e.F;i--;)delete he.prototype[ae[i]];return he()},pe=Object.create||function(e,t){var i;return null!==e?(fe.prototype=s(e),i=new fe,fe.prototype=null,i[de]=e):i=he(),void 0===t?i:se(i,t)},ve=t((function(e){var t=Q("wks"),i=n.Symbol,o="function"==typeof i;(e.exports=function(e){return t[e]||(t[e]=o&&i[e]||(o?i:ee)("Symbol."+e))}).store=t})),ge=y.f,ye=ve("toStringTag"),me=function(e,t,i){e&&!B(e=i?e:e.prototype,ye)&&ge(e,ye,{configurable:!0,value:t})},we={};w(we,ve("iterator"),(function(){return this}));var be,ke=function(e,t,i){e.prototype=pe(we,{next:m(1,i)}),me(e,t+" Iterator")},_e=function(e){return Object(H(e))},xe=ie("IE_PROTO"),Se=Object.prototype,Ae=Object.getPrototypeOf||function(e){return e=_e(e),B(e,xe)?e[xe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Se:null},Ee=ve("iterator"),Le=!([].keys&&"next"in[].keys()),Te=function(){return this},Pe=function(e,t,i,n,o,r,a){ke(i,t,n);var l,s,u,c=function(e){if(!Le&&e in p)return p[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},d=t+" Iterator",f="values"==o,h=!1,p=e.prototype,v=p[Ee]||p["@@iterator"]||o&&p[o],g=!Le&&v||c(o),y=o?f?c("entries"):g:void 0,m="Array"==t&&p.entries||v;if(m&&(u=Ae(m.call(new e)))!==Object.prototype&&u.next&&me(u,d,!0),f&&v&&"values"!==v.name&&(h=!0,g=function(){return v.call(this)}),a&&(Le||h||!p[Ee])&&w(p,Ee,g),N[t]=g,N[d]=Te,o)if(l={values:f?g:c("values"),keys:r?g:c("keys"),entries:y},a)for(s in l)s in p||V(p,s,l[s]);else k(k.P+k.F*(Le||h),t,l);return l},Me=(be=!0,function(e,t){var i,n,o=String(H(e)),r=q(t),a=o.length;return r<0||r>=a?be?"":void 0:(i=o.charCodeAt(r))<55296||i>56319||r+1===a||(n=o.charCodeAt(r+1))<56320||n>57343?be?o.charAt(r):i:be?o.slice(r,r+2):n-56320+(i-55296<<10)+65536});Pe(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=Me(t,i),this._i+=e.length,{value:e,done:!1})}));var je=function(e,t){return{value:t,done:!!e}};Pe(Array,"Array",(function(e,t){this._t=W(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,je(1)):je(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values");N.Arguments=N.Array;for(var Oe=ve("toStringTag"),Fe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ce=0;Ce<Fe.length;Ce++){var Ie=Fe[Ce],qe=n[Ie],He=qe&&qe.prototype;He&&!He[Oe]&&w(He,Oe,Ie),N[Ie]=N.Array}var Ve,Re,Be,Ne=ve("toStringTag"),Ue="Arguments"==D(function(){return arguments}()),De=function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ne))?i:Ue?D(t):"Object"==(n=D(t))&&"function"==typeof t.callee?"Arguments":n},ze=function(e,t,i,n){try{return n?t(s(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw void 0!==o&&s(o.call(e)),t}},We=ve("iterator"),Ge=Array.prototype,Ye=function(e){return void 0!==e&&(N.Array===e||Ge[We]===e)},Ke=ve("iterator"),Je=o.getIteratorMethod=function(e){if(null!=e)return e[Ke]||e["@@iterator"]||N[De(e)]},Ze=t((function(e){var t={},i={},n=e.exports=function(e,n,o,r,l){var u,c,d,f,h=l?function(){return e}:Je(e),p=a(o,r,n?2:1),v=0;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(Ye(h)){for(u=Y(e.length);u>v;v++)if((f=n?p(s(c=e[v])[0],c[1]):p(e[v]))===t||f===i)return f}else for(d=h.call(e);!(c=d.next()).done;)if((f=ze(d,p,c.value,n))===t||f===i)return f};n.BREAK=t,n.RETURN=i})),Qe=ve("species"),Xe=function(e,t){var i,n=s(e).constructor;return void 0===n||null==(i=s(n)[Qe])?t:r(i)},$e=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)},et=n.process,tt=n.setImmediate,it=n.clearImmediate,nt=n.MessageChannel,ot=n.Dispatch,rt=0,at={},lt=function(){var e=+this;if(at.hasOwnProperty(e)){var t=at[e];delete at[e],t()}},st=function(e){lt.call(e.data)};tt&&it||(tt=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return at[++rt]=function(){$e("function"==typeof e?e:Function(e),t)},Ve(rt),rt},it=function(e){delete at[e]},"process"==D(et)?Ve=function(e){et.nextTick(a(lt,e,1))}:ot&&ot.now?Ve=function(e){ot.now(a(lt,e,1))}:nt?(Be=(Re=new nt).port2,Re.port1.onmessage=st,Ve=a(Be.postMessage,Be,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(Ve=function(e){n.postMessage(e+"","*")},n.addEventListener("message",st,!1)):Ve="onreadystatechange"in h("script")?function(e){ce.appendChild(h("script")).onreadystatechange=function(){ce.removeChild(this),lt.call(e)}}:function(e){setTimeout(a(lt,e,1),0)});var ut={set:tt,clear:it},ct=ut.set,dt=n.MutationObserver||n.WebKitMutationObserver,ft=n.process,ht=n.Promise,pt="process"==D(ft);function vt(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=r(t),this.reject=r(i)}var gt={f:function(e){return new vt(e)}},yt=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},mt=function(e,t){if(s(e),l(t)&&t.constructor===e)return t;var i=gt.f(e);return(0,i.resolve)(t),i.promise},wt=ve("species"),bt=ve("iterator"),kt=!1;try{var _t=[7][bt]();_t.return=function(){kt=!0},Array.from(_t,(function(){throw 2}))}catch(e){}var xt,St,At,Et,Lt,Tt,Pt,Mt=function(e,t){if(!t&&!kt)return!1;var i=!1;try{var n=[7],o=n[bt]();o.next=function(){return{done:i=!0}},n[bt]=function(){return o},e(n)}catch(e){}return i},jt=ut.set,Ot=function(){var e,t,i,o=function(){var n,o;for(pt&&(n=ft.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?i():t=void 0,n}}t=void 0,n&&n.enter()};if(pt)i=function(){ft.nextTick(o)};else if(!dt||n.navigator&&n.navigator.standalone)if(ht&&ht.resolve){var r=ht.resolve();i=function(){r.then(o)}}else i=function(){ct.call(n,o)};else{var a=!0,l=document.createTextNode("");new dt(o).observe(l,{characterData:!0}),i=function(){l.data=a=!a}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,i()),t=o}}(),Ft=n.TypeError,Ct=n.process,It=n.Promise,qt="process"==De(Ct),Ht=function(){},Vt=St=gt.f,Rt=!!function(){try{var e=It.resolve(1),t=(e.constructor={})[ve("species")]=function(e){e(Ht,Ht)};return(qt||"function"==typeof PromiseRejectionEvent)&&e.then(Ht)instanceof t}catch(e){}}(),Bt=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},Nt=function(e,t){if(!e._n){e._n=!0;var i=e._c;Ot((function(){for(var n=e._v,o=1==e._s,r=0,a=function(t){var i,r,a=o?t.ok:t.fail,l=t.resolve,s=t.reject,u=t.domain;try{a?(o||(2==e._h&&zt(e),e._h=1),!0===a?i=n:(u&&u.enter(),i=a(n),u&&u.exit()),i===t.promise?s(Ft("Promise-chain cycle")):(r=Bt(i))?r.call(i,l,s):l(i)):s(n)}catch(e){s(e)}};i.length>r;)a(i[r++]);e._c=[],e._n=!1,t&&!e._h&&Ut(e)}))}},Ut=function(e){jt.call(n,(function(){var t,i,o,r=e._v,a=Dt(e);if(a&&(t=yt((function(){qt?Ct.emit("unhandledRejection",r,e):(i=n.onunhandledrejection)?i({promise:e,reason:r}):(o=n.console)&&o.error&&o.error("Unhandled promise rejection",r)})),e._h=qt||Dt(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},Dt=function(e){return 1!==e._h&&0===(e._a||e._c).length},zt=function(e){jt.call(n,(function(){var t;qt?Ct.emit("rejectionHandled",e):(t=n.onrejectionhandled)&&t({promise:e,reason:e._v})}))},Wt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Nt(t,!0))},Gt=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw Ft("Promise can't be resolved itself");(t=Bt(e))?Ot((function(){var n={_w:i,_d:!1};try{t.call(e,a(Gt,n,1),a(Wt,n,1))}catch(e){Wt.call(n,e)}})):(i._v=e,i._s=1,Nt(i,!1))}catch(e){Wt.call({_w:i,_d:!1},e)}}};Rt||(It=function(e){!function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!")}(this,It,"Promise","_h"),r(e),xt.call(this);try{e(a(Gt,this,1),a(Wt,this,1))}catch(e){Wt.call(this,e)}},(xt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,i){for(var n in t)i&&e[n]?e[n]=t[n]:w(e,n,t[n]);return e}(It.prototype,{then:function(e,t){var i=Vt(Xe(this,It));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=qt?Ct.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&Nt(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),At=function(){var e=new xt;this.promise=e,this.resolve=a(Gt,e,1),this.reject=a(Wt,e,1)},gt.f=Vt=function(e){return e===It||e===Et?new At(e):St(e)}),k(k.G+k.W+k.F*!Rt,{Promise:It}),me(It,"Promise"),Tt="function"==typeof o[Lt="Promise"]?o[Lt]:n[Lt],c&&Tt&&!Tt[wt]&&y.f(Tt,wt,{configurable:!0,get:function(){return this}}),Et=o.Promise,k(k.S+k.F*!Rt,"Promise",{reject:function(e){var t=Vt(this);return(0,t.reject)(e),t.promise}}),k(k.S+!0*k.F,"Promise",{resolve:function(e){return mt(this===Et?It:this,e)}}),k(k.S+k.F*!(Rt&&Mt((function(e){It.all(e).catch(Ht)}))),"Promise",{all:function(e){var t=this,i=Vt(t),n=i.resolve,o=i.reject,r=yt((function(){var i=[],r=0,a=1;Ze(e,!1,(function(e){var l=r++,s=!1;i.push(void 0),a++,t.resolve(e).then((function(e){s||(s=!0,i[l]=e,--a||n(i))}),o)})),--a||n(i)}));return r.e&&o(r.v),i.promise},race:function(e){var t=this,i=Vt(t),n=i.reject,o=yt((function(){Ze(e,!1,(function(e){t.resolve(e).then(i.resolve,n)}))}));return o.e&&n(o.v),i.promise}}),k(k.P+k.R,"Promise",{finally:function(e){var t=Xe(this,o.Promise||n.Promise),i="function"==typeof e;return this.then(i?function(i){return mt(t,e()).then((function(){return i}))}:e,i?function(i){return mt(t,e()).then((function(){throw i}))}:e)}}),k(k.S,"Promise",{try:function(e){var t=gt.f(this),i=yt(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}}),(Pt=F)&&Pt.default;var Yt=o.Promise,Kt=t((function(e){e.exports={default:Yt,__esModule:!0}})),Jt=e(Kt),Zt=e(t((function(e,t){t.__esModule=!0;var i,n=(i=Kt)&&i.__esModule?i:{default:i};t.default=function(e){return function(){var t=e.apply(this,arguments);return new n.default((function(e,i){return function o(r,a){try{var l=t[r](a),s=l.value}catch(e){return void i(e)}if(!l.done)return n.default.resolve(s).then((function(e){o("next",e)}),(function(e){o("throw",e)}));e(s)}("next")}))}}}))),Qt=o.JSON||(o.JSON={stringify:JSON.stringify}),Xt=function(e){return Qt.stringify.apply(Qt,arguments)},$t=e(t((function(e){e.exports={default:Xt,__esModule:!0}}))),ei={f:ve},ti=ei.f("iterator"),ii=t((function(e){e.exports={default:ti,__esModule:!0}}));e(ii);var ni=t((function(e){var t=ee("meta"),i=y.f,n=0,o=Object.isExtensible||function(){return!0},r=!u((function(){return o(Object.preventExtensions({}))})),a=function(e){i(e,t,{value:{i:"O"+ ++n,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,i){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!B(e,t)){if(!o(e))return"F";if(!i)return"E";a(e)}return e[t].i},getWeak:function(e,i){if(!B(e,t)){if(!o(e))return!0;if(!i)return!1;a(e)}return e[t].w},onFreeze:function(e){return r&&s.NEED&&o(e)&&!B(e,t)&&a(e),e}}})),oi=(ni.KEY,ni.NEED,ni.fastKey,ni.getWeak,ni.onFreeze,y.f),ri=function(e){var t=o.Symbol||(o.Symbol={});"_"==e.charAt(0)||e in t||oi(t,e,{value:ei.f(e)})},ai={f:Object.getOwnPropertySymbols},li={f:{}.propertyIsEnumerable},si=Array.isArray||function(e){return"Array"==D(e)},ui=ae.concat("length","prototype"),ci={f:Object.getOwnPropertyNames||function(e){return re(e,ui)}},di=ci.f,fi={}.toString,hi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],pi={f:function(e){return hi&&"[object Window]"==fi.call(e)?function(e){try{return di(e)}catch(e){return hi.slice()}}(e):di(W(e))}},vi=Object.getOwnPropertyDescriptor,gi={f:c?vi:function(e,t){if(e=W(e),t=v(t,!0),p)try{return vi(e,t)}catch(e){}if(B(e,t))return m(!li.f.call(e,t),e[t])}},yi=ni.KEY,mi=gi.f,wi=y.f,bi=pi.f,ki=n.Symbol,_i=n.JSON,xi=_i&&_i.stringify,Si=ve("_hidden"),Ai=ve("toPrimitive"),Ei={}.propertyIsEnumerable,Li=Q("symbol-registry"),Ti=Q("symbols"),Pi=Q("op-symbols"),Mi=Object.prototype,ji="function"==typeof ki,Oi=n.QObject,Fi=!Oi||!Oi.prototype||!Oi.prototype.findChild,Ci=c&&u((function(){return 7!=pe(wi({},"a",{get:function(){return wi(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=mi(Mi,t);n&&delete Mi[t],wi(e,t,i),n&&e!==Mi&&wi(Mi,t,n)}:wi,Ii=function(e){var t=Ti[e]=pe(ki.prototype);return t._k=e,t},qi=ji&&"symbol"==typeof ki.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ki},Hi=function(e,t,i){return e===Mi&&Hi(Pi,t,i),s(e),t=v(t,!0),s(i),B(Ti,t)?(i.enumerable?(B(e,Si)&&e[Si][t]&&(e[Si][t]=!1),i=pe(i,{enumerable:m(0,!1)})):(B(e,Si)||wi(e,Si,m(1,{})),e[Si][t]=!0),Ci(e,t,i)):wi(e,t,i)},Vi=function(e,t){s(e);for(var i,n=function(e){var t=le(e),i=ai.f;if(i)for(var n,o=i(e),r=li.f,a=0;o.length>a;)r.call(e,n=o[a++])&&t.push(n);return t}(t=W(t)),o=0,r=n.length;r>o;)Hi(e,i=n[o++],t[i]);return e},Ri=function(e){var t=Ei.call(this,e=v(e,!0));return!(this===Mi&&B(Ti,e)&&!B(Pi,e))&&(!(t||!B(this,e)||!B(Ti,e)||B(this,Si)&&this[Si][e])||t)},Bi=function(e,t){if(e=W(e),t=v(t,!0),e!==Mi||!B(Ti,t)||B(Pi,t)){var i=mi(e,t);return!i||!B(Ti,t)||B(e,Si)&&e[Si][t]||(i.enumerable=!0),i}},Ni=function(e){for(var t,i=bi(W(e)),n=[],o=0;i.length>o;)B(Ti,t=i[o++])||t==Si||t==yi||n.push(t);return n},Ui=function(e){for(var t,i=e===Mi,n=bi(i?Pi:W(e)),o=[],r=0;n.length>r;)!B(Ti,t=n[r++])||i&&!B(Mi,t)||o.push(Ti[t]);return o};ji||(V((ki=function(){if(this instanceof ki)throw TypeError("Symbol is not a constructor!");var e=ee(arguments.length>0?arguments[0]:void 0),t=function(i){this===Mi&&t.call(Pi,i),B(this,Si)&&B(this[Si],e)&&(this[Si][e]=!1),Ci(this,e,m(1,i))};return c&&Fi&&Ci(Mi,e,{configurable:!0,set:t}),Ii(e)}).prototype,"toString",(function(){return this._k})),gi.f=Bi,y.f=Hi,ci.f=pi.f=Ni,li.f=Ri,ai.f=Ui,ei.f=function(e){return Ii(ve(e))}),k(k.G+k.W+k.F*!ji,{Symbol:ki});for(var Di="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),zi=0;Di.length>zi;)ve(Di[zi++]);for(var Wi=le(ve.store),Gi=0;Wi.length>Gi;)ri(Wi[Gi++]);k(k.S+k.F*!ji,"Symbol",{for:function(e){return B(Li,e+="")?Li[e]:Li[e]=ki(e)},keyFor:function(e){if(!qi(e))throw TypeError(e+" is not a symbol!");for(var t in Li)if(Li[t]===e)return t},useSetter:function(){Fi=!0},useSimple:function(){Fi=!1}}),k(k.S+k.F*!ji,"Object",{create:function(e,t){return void 0===t?pe(e):Vi(pe(e),t)},defineProperty:Hi,defineProperties:Vi,getOwnPropertyDescriptor:Bi,getOwnPropertyNames:Ni,getOwnPropertySymbols:Ui}),_i&&k(k.S+k.F*(!ji||u((function(){var e=ki();return"[null]"!=xi([e])||"{}"!=xi({a:e})||"{}"!=xi(Object(e))}))),"JSON",{stringify:function(e){for(var t,i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(i=t=n[1],(l(t)||void 0!==e)&&!qi(e))return si(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!qi(t))return t}),n[1]=t,xi.apply(_i,n)}}),ki.prototype[Ai]||w(ki.prototype,Ai,ki.prototype.valueOf),me(ki,"Symbol"),me(Math,"Math",!0),me(n.JSON,"JSON",!0),ri("asyncIterator"),ri("observable");var Yi=o.Symbol,Ki=t((function(e){e.exports={default:Yi,__esModule:!0}}));e(Ki);var Ji=e(t((function(e,t){t.__esModule=!0;var i=r(ii),n=r(Ki),o="function"==typeof n.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function r(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof n.default&&"symbol"===o(i.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":o(e)}})));!function(e,t){var i=(o.Object||{})[e]||Object[e],n={};n[e]=t(i),k(k.S+k.F*u((function(){i(1)})),"Object",n)}("keys",(function(){return function(e){return le(_e(e))}}));var Zi=o.Object.keys,Qi=e(t((function(e){e.exports={default:Zi,__esModule:!0}})));function Xi(e,t,i){return new Jt((function(n,o){var r=new XMLHttpRequest;"GET"===e&&i&&Qi(i).forEach((function(e){var n=t.includes("?")?"&":"?";t+=""+n+e+"="+i[e]}));(r.withCredentials=!0,r.open(e,t,!0),r.onload=function(){4===r.readyState&&200===r.status&&""!==r.response?n(JSON.parse(r.response)):o(r)},r.onerror=function(){o(r)},i&&i.headers)&&Qi(i.headers).forEach((function(e){r.setRequestHeader(e,i.headers[e])}));i="object"===(void 0===i?"undefined":Ji(i))?$t(i):i,r.send(i)}))}var $i="3457",en="3607",tn="1829",nn="3477",on="3567",rn="3467",an="3422",ln="3197",sn="3367",un="3362";function cn(e){var t=e.adPosition,i=void 0===t?"":t,n=e.mergePosition,o=void 0===n?"":n,r=e.demoAdNo,a=void 0===r?function(e){if(!e)return"";var t,i,n=window.location.search.substring(1).split("&");for(t=0;t<n.length;t++)if((i=n[t].split("="))[0]===e)return decodeURIComponent(i[1]);return""}("demo_ad_no"):r,l=e.adLimit,s=void 0===l?1:l,u=e.width,c=void 0===u?0:u,d=e.height,f=void 0===d?0:d,h=!!window.pix.isMobile,p=document.body.dataset.blogSiteCategoryId,v=document.body.dataset.blogUserListId,g="",y=location.protocol+"//"+window.pix.falconsite+"/ad/json?version=2&ad_limit="+s;if(h)g=document.body.dataset.articleSiteCategoryId;else{var m=document.querySelector("#article-box .title");g=m?m.dataset.siteCategoryId:""}i&&(y+=i.split(",").map((function(e,t){var i=o&&o.split(",")[t];return"&pos[]="+e+","+c+","+f+(i?","+i:"")})).join(""));return a&&(y+="&demo_ad_no="+a),document.referrer&&(y+="&referrer="+encodeURI(document.referrer)),g&&(y+="&article_category="+encodeURI(g)),p&&(y+="&blog_category="+encodeURI(p)),v&&(y+="&user_lists="+encodeURI(v)),y}function dn(e){var t=new RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}var fn=dn("demo_ad_no"),hn=dn("ad_num"),pn=dn("preview_mib_fly_desktop_image_ad"),vn="block"===document.body.dataset.adsenseState,gn="adult"===document.body.dataset.adsenseClassification,yn=kn(),mn=!!window.pix.isMobile,wn=_n(),bn=pix.MIB.config.hasMIB;function kn(){return!(!fn||![ln,$i,en,tn,nn,rn,on,an,sn,un].includes(hn))||!(!pn||"10"!==pn)}function _n(){return pix.MIB.config.availablePositions.filter((function(e){var t=mn?"fly-mobile-image":"fly-desktop-image";return e.name===t}))[0].enable}function xn(){return"10"===pn?nn:yn?hn:!wn&&bn?mn?an:on:gn?tn:vn?mn?en:$i:mn?rn:nn}var Sn=function(){function e(t){i(this,e),this.ad=t}return A(e,[{key:"creatVideo",value:function(){this.player=document.querySelector("#ad-player"),this.player.src=this.ad.videofileMp4,new window.pixAdVideo({video:this.player,videoCallbackUrl:this.ad.videoCallbackUrl,videoClickUrl:"",clickUrl:this.ad.clickUrl,controlBarHeight:45,controlBarBackground:"none"}).create()}},{key:"renderVideo",value:function(){var e=this;if("video"===this.ad.type)if(window.pixAdVideo)this.creatVideo();else{var t=document.createElement("script");t.onload=function(){e.creatVideo()},t.src="https://falcon-asset.pixfs.net.work/js/adVideo.min.js",document.head.appendChild(t)}}}]),e}(),An=[],En=null,Ln="";function Tn(){clearInterval(En)}function Pn(e){An[e]||((new Image).src=Ln+"&t="+e,An[e]=!0)}function Mn(e){e&&(location.href=e)}var jn=function(e,t,i){t in e?y.f(e,t,m(0,i)):e[t]=i};k(k.S+k.F*!Mt((function(e){Array.from(e)})),"Array",{from:function(e){var t,i,n,o,r=_e(e),l="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,c=void 0!==u,d=0,f=Je(r);if(c&&(u=a(u,s>2?arguments[2]:void 0,2)),null==f||l==Array&&Ye(f))for(i=new l(t=Y(r.length));t>d;d++)jn(i,d,c?u(r[d],d):r[d]);else for(o=f.call(r),i=new l;!(n=o.next()).done;d++)jn(i,d,c?ze(o,u,[n.value,d],!0):n.value);return i.length=d,i}});var On=o.Array.from,Fn=t((function(e){e.exports={default:On,__esModule:!0}}));e(Fn);var Cn=e(t((function(e,t){t.__esModule=!0;var i,n=(i=Fn)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,n.default)(e)}}))),In=function(){function e(t){i(this,e),this.isMobile=t.isMobile,this.redirectHref=t.redirectHref,this.adHashId=t.adHashId,this.trackAdType=this.redirectHref?"between_pages":"switch_tabs",this.device=this.isMobile?"mobile":"desktop",this.authorUniqId=document.body.dataset.authorMemberUniqid}return A(e,[{key:"trackEvent",value:function(e){e.eventNonInteraction||(e.eventNonInteraction=0),window.dataLayer=window.dataLayer||[],dataLayer.push(e),_piq.push(["trackEvent",e.eventCategory,e.eventAction,e.eventLabel,e.eventValue])}},{key:"exitPageEvent",value:function(){var e="exit_page_"+this.trackAdType+"_"+this.device;this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:e,eventLabel:this.adHashId,eventValue:""})}},{key:"escapeKeyDownEvent",value:function(){this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:"press_keyboard_esc_"+this.trackAdType+"_desktop",eventLabel:this.adHashId,eventValue:""})}},{key:"clickOnEdgeEvent",value:function(){this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:"click_on_edge_"+this.trackAdType+"_desktop",eventLabel:this.adHashId,eventValue:""})}},{key:"clickCloseButtonEvent",value:function(){var e=(this.redirectHref?"click_on_goto_link_button_":"click_on_close_button_")+"_"+this.trackAdType+"_"+this.device;this.trackEvent({event:"popad",eventCategory:"popup_ad",eventAction:e,eventLabel:this.adHashId,eventValue:""})}},{key:"authorIntroImpression",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"imps_author_intro",eventLabel:"",eventValue:""})}},{key:"authorIntroIconClickEvent",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_author_icon",eventLabel:this.authorUniqId,eventValue:""})}},{key:"profileNameClickEvent",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_author_name",eventLabel:this.authorUniqId,eventValue:""})}},{key:"articleTagImpression",value:function(e){var t=this.isMobile?80:45;this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"imps_article_tag",eventLabel:"",eventValue:function(e,t){return[].concat(Cn(e)).filter((function(e){return function(e,t){return e.offsetTop<t}(e,t)})).length}(e,t)})}},{key:"followAuthorSuccessfully",value:function(){this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"follow_author_successfully",eventLabel:this.authorUniqId,eventValue:""})}},{key:"clickFollowButtonEvent",value:function(e){var t=e?"follow":"unfollow";this.trackEvent({event:"mobile blog",eventCategory:"popup_ad",eventAction:"click_author_intro_"+t+"_button",eventLabel:this.authorUniqId,eventValue:""})}}]),e}();function qn(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(function(e){var t=document.createElement("script");t.text=e.innerHTML;for(var i=e.attributes.length-1;i>=0;i--)t.setAttribute(e.attributes[i].name,e.attributes[i].value);return t}(e),e),e;for(var t=0,i=e.childNodes;t<i.length;)qn(i[t++]);return e}var Hn=function(){function e(t){i(this,e),this.startTime=null,this.duration=0,this.viewAbilityDuration=0,this.stopRecord=!1,this.timer="",this.ad=t,this.listenBrowserTabChange=this.listenBrowserTabChange.bind(this),this.domSubtreeModifiedEvent=this.domSubtreeModifiedEvent.bind(this),this.countDownStart=this.countDownStart.bind(this)}return A(e,[{key:"checkAdLoaded",value:function(){var e=this,t=this.ad.root.querySelector(".ad-box");if("image"!==this.ad.type&&"html5"!==this.ad.type||t.querySelector("img, iframe").addEventListener("load",(function(){e.checkViewAbility()}),!0),"video"===this.ad.type&&this.ad.root.querySelector("video").addEventListener("loadedmetadata",(function(){e.checkViewAbility()})),"js"===this.ad.type){var i=t.querySelector("img, iframe");if(i)return void this.listenAdShow(i);t.addEventListener("DOMSubtreeModified",this.domSubtreeModifiedEvent)}}},{key:"domSubtreeModifiedEvent",value:function(){var e=this.ad.root.querySelector(".ad-box"),t=e.querySelector("img, iframe");t&&(this.listenAdShow(t),e.removeEventListener("DOMSubtreeModified",this.domSubtreeModifiedEvent,!1))}},{key:"stop",value:function(){this.stopRecord=!0,this.stopActiveViewRecord()}},{key:"listenAdShow",value:function(e){var t=this;e.addEventListener("load",(function(){t.checkViewAbility()}),!0)}},{key:"stopActiveViewRecord",value:function(){window.cancelAnimFrame(this.timer),document.removeEventListener("visibilitychange",this.listenBrowserTabChange,!1)}},{key:"checkViewAbility",value:function(){this.timer=window.requestAnimFrame(this.countDownStart),this.viewAbilityDuration="video"===this.ad.type?2e3:1e3,document.addEventListener("visibilitychange",this.listenBrowserTabChange)}},{key:"listenBrowserTabChange",value:function(){document.hidden?(window.cancelAnimFrame(this.timer),this.duration=this.getTime()-this.startTime,this.startTime=null):window.requestAnimFrame(this.countDownStart)}},{key:"countDownStart",value:function(){this.startTime=this.startTime||this.getTime(),this.getTime()-this.startTime+this.duration>=this.viewAbilityDuration?(this.stopActiveViewRecord(),this.record()):this.stopRecord||window.requestAnimFrame(this.countDownStart)}},{key:"getTime",value:function(){return"object"===Ji(window.performance)?window.performance.now():(new Date).getTime()}},{key:"record",value:function(){(new Image).src=this.ad.activeViewUrl}}]),e}();function Vn(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Vn("html.show-safari-bottom_menu{height:100%}html.show-safari-bottom_menu body{position:fixed}#ad-full-page.mobile{position:fixed;top:0;right:0;bottom:0;left:0;z-index:100000006;box-sizing:border-box;margin:0 auto;background-color:rgba(0,0,0,.85);-webkit-transform:translateY(100vh);transform:translateY(100vh);will-change:transform}#ad-full-page.mobile.active{-webkit-transform:translateY(0);transform:translateY(0);-webkit-transition:-webkit-transform 1s;transition:-webkit-transform 1s;transition:transform 1s;transition:transform 1s,-webkit-transform 1s}#ad-full-page.mobile .wrapper{overflow:hidden;width:100vw}#ad-full-page.mobile .wrapper .ad-box,#ad-full-page.mobile .wrapper .ad-content,#ad-full-page.mobile .wrapper .ad-full-page-link,#ad-full-page.mobile .wrapper .back-pane{height:100%}#ad-full-page.mobile .ad-box{text-align:center}#ad-full-page.mobile .ad-box img{-o-object-fit:contain;object-fit:contain}#ad-full-page.mobile .ad-box .ad-full-page-video,#ad-full-page.mobile .ad-box img{width:100%}#ad-full-page.mobile .ad-box .ad-full-page-video{margin:0 auto;max-width:100%}#ad-full-page.mobile .ad-full-page--js .ad-box{width:100%}#ad-full-page.mobile .ad-full-page--js iframe{position:relative;top:2px}#ad-full-page.mobile .ad-full-page--html5,#ad-full-page.mobile .ad-full-page--image{padding-bottom:calc(100vh - var(--vh, 1vh)*100);-webkit-transform:translateY(calc(50vh - 50%));transform:translateY(calc(50vh - 50%))}#ad-full-page.mobile .ad-full-page--nojs iframe{width:100%}#ad-full-page.mobile .ad-full-page__background iframe{display:block;width:100%}#ad-full-page.mobile .ad-full-page__background .video-container{position:relative;top:50%;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}#ad-full-page.mobile .ad-full-page__background .video-wrapper{position:relative;overflow:hidden;width:100%;height:0;padding-bottom:56.25%}#ad-full-page.mobile .ad-full-page__background .ad-full-page-video{position:absolute;top:0;left:0;width:100%;height:100%!important}#ad-full-page.mobile .ad-full-page__background .back-pane-up{position:absolute;bottom:calc(50% + 28.125vw)}#ad-full-page.mobile .ad-full-page__background .back-pane-down{position:absolute;top:calc(50% + 28.125vw)}#ad-full-page.mobile .ad-full-page__mobile-close-btn{position:absolute;right:10px;z-index:2147483647;width:90px;height:30px;border:none;font-size:18px;color:#fff;background-color:rgba(0,0,0,.5);border-radius:30px;visibility:hidden}#ad-full-page.mobile .ad-full-page__mobile-close-btn--fixed{top:10px}#ad-full-page.mobile .ad-full-page__mobile-close-btn--calculate{top:calc(10px + 50% - 50vh)}#ad-full-page.mobile .hide{display:none}"),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var Rn=function(){function e(t){var n=this;i(this,e),this.readingPosition=0,this.isMobile=!0,this.redirectHref=t,this.track=null,this.activeViewRecord=null,window.pix.adFullPage.redirectToClickLocation=function(){Mn(n.redirectHref)},this.exitPageEvent=this.exitPageEvent.bind(this)}var t;return A(e,[{key:"setConfig",value:function(e){var t=e.ad_slots[0],i=t&&t.ad_list[0],n=i.file,o=i.file2,r=i.click_url,a=i.type,l=i.hashid,s=i.position_id,u=i.file_content,c=i.file_mime_type,d=i.videofile_mp4,f=i.videofile_webm,h=i.video_callback_url,p=i.activeview_url;this.slot=t,this.data=i,this.clickUrl=r,this.type=a,this.hashid=l,this.fileContent=u,this.fileMimeType=c,this.videofileMp4=d,this.videofileWebm=f,this.videoCallbackUrl=h,this.activeViewUrl=p,this.file=this.formatFile(a,n),this.file2=this.formatFile(a,o),this.positionId=s}},{key:"getAd",value:function(){var e,t;return Xi("GET",(e=xn(),t=void 0,e===rn&&(t=un),cn({adPosition:e,mergePosition:t,demoAdNo:"10"===fn?"16b5d40cc4499ee92eab6f42ceb83895":fn})))}},{key:"getElements",value:function(){this.root=document.getElementById("ad-full-page"),this.video=this.root.querySelector(".ad-full-page-video"),this.link=this.root.querySelector(".ad-full-page-link"),this.closeButton=this.root.querySelector(".ad-full-page__mobile-close-btn"),this.loadingIcon=this.root.querySelector(".loading-icon")}},{key:"backPaneTemplate",value:function(){return"video"===this.type?'<iframe class="ad-full-page-iframe" src="'+this.file+'" frameborder="0"></iframe>':'\n        <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n            <img src="'+this.file+'" alt="'+this.file+'"/>\n        </a>\n        '}},{key:"getVideoTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <iframe class="back-pane-up" src="'+this.file+'" frameborder="0"></iframe>\n                <div class="video-container">\n                    <div class="video-wrapper">\n                        <video id="ad-player" class="ad-full-page-video" autoplay loop muted playsinline>\n                        </video>\n                    </div>\n                </div>\n                <iframe class="back-pane-down" src="'+this.file2+'" frameborder="0"></iframe>\n            </div>\n        </div>\n        '}},{key:"getHtmlAndJsTemplate",value:function(){return this.slot.html}},{key:"getImageTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                    <img src="'+this.file+'" alt="'+this.file+'"/>\n                </a>\n            </div>\n        </div>\n        '}},{key:"getAdTemplateByType",value:function(){var e="";switch(this.type){case"image":e=this.getImageTemplate();break;case"video":e=this.getVideoTemplate();break;case"html5":case"js":e=this.getHtmlAndJsTemplate()}return e}},{key:"formatFile",value:function(e,t){return-1===t.indexOf("clickTAG")&&"video"===e&&(t+="&clickTAG="+encodeURIComponent(this.clickUrl)),"image"===e&&this.fileContent&&this.fileMimeType&&(t="data:"+this.fileMimeType+";base64,"+this.fileContent),t}},{key:"getTemplate",value:function(){return'\n            <div id="ad-full-page" class="mobile">\n            <div class="wrapper">\n                <div class="ad-content">\n                    <div class="loading-icon"></div>\n                    <div class="ad-box">\n                        '+this.getAdTemplateByType()+'\n                    </div>\n                </div>\n                <button class="ad-full-page__mobile-close-btn">\n                    關閉\n                    <svg style="vertical-align: middle" width="20px" height="20px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="文字按鈕" transform="translate(-255.000000, -107.000000)" fill="#FFFFFF"> <g id="4" transform="translate(248.000000, 100.000000)"> <path d="M13.65,13.65 L6,13.65 L6,16.35 L13.65,16.35 L13.65,24 L16.35,24 L16.35,16.35 L24,16.35 L24,13.65 L16.35,13.65 L16.35,6 L13.65,6 L13.65,13.65 Z" id="Combined-Shape" transform="translate(15.000000, 15.000000) rotate(-315.000000) translate(-15.000000, -15.000000) "></path> </g> </g> </g> </svg>\n                </button>\n            </div>\n        </div>\n        '}},{key:"updateAdHeight",value:function(){var e=this,t=0;function i(e,t,i){var n=window.navigator.userAgent,o=!!n.match(/iPad/i)||!!n.match(/iPhone/i);if("js"===e&&(i.querySelector(".ad-box").style.height=t+"px"),("image"===e||"html5"===e)&&o){var r=.01*window.innerHeight;i.style.setProperty("--vh",r+"px")}if("html5"===e){var a=812*window.innerWidth/375;i.querySelector("iframe").style.height=a+"px",i.querySelector(".wrapper").style.height=a+"px"}"video"===e&&(i.querySelector(".wrapper").style.height=t+"px")}this.readingPosition=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset,document.querySelector("html").classList.add("show-safari-bottom_menu"),window.requestAnimFrame((function(){window.requestAnimFrame((function(){t=window.innerHeight,i(e.type,window.innerHeight,e.root)}))})),setTimeout((function(){t!==window.innerHeight&&i(e.type,window.innerHeight,e.root)}),500)}},{key:"updateVideoBackPaneHeight",value:function(){var e=500*window.screen.width/375;this.root.querySelector(".back-pane-up").style.height=e+"px",this.root.querySelector(".back-pane-down").style.height=e+"px"}},{key:"updateCloseBtnPosition",value:function(){var e=this.root.querySelector(".ad-full-page__mobile-close-btn"),t="3362"===this.positionId||"video"===this.type||"js"===this.type?"ad-full-page__mobile-close-btn--fixed":"ad-full-page__mobile-close-btn--calculate";e.classList.add(t)}},{key:"renderAdWithStyle",value:function(){var e=this,t=this.root.querySelector(".wrapper");setTimeout((function(){e.closeButton.style.visibility="unset"}),1e3),""!==this.file&&"video"===this.type&&t.classList.add("ad-full-page__background"),"js"!==this.type&&t.classList.add("ad-full-page--nojs"),"image"===this.type&&t.classList.add("ad-full-page--image"),"html5"===this.type&&t.classList.add("ad-full-page--html5"),this.loadingIcon.classList.add("hide"),this.updateAdHeight(),this.updateCloseBtnPosition(),"video"===this.type&&this.updateVideoBackPaneHeight()}},{key:"renderVideo",value:function(){new Sn(this).renderVideo()}},{key:"adAnimationActive",value:function(){var e=this;window.requestAnimFrame((function(){window.requestAnimFrame((function(){e.root.classList.add("active")}))}))}},{key:"removeFullPageAd",value:function(){this.root.remove(),Tn(),document.querySelector("html").classList.remove("show-safari-bottom_menu"),window.scrollTo(0,this.readingPosition),window.removeEventListener("beforeunload",this.exitPageEvent),this.activeViewRecord.stop(),Mn(this.redirectHref)}},{key:"exitPageEvent",value:function(){this.track.exitPageEvent()}},{key:"bindingEvents",value:function(){var e=this;this.root.addEventListener("transitionend",(function(){e.root.style.willChange="auto"})),window.addEventListener("beforeunload",this.exitPageEvent),this.closeButton.addEventListener("click",(function(t){e.track.clickCloseButtonEvent(),e.removeFullPageAd()}))}},{key:"recordActiveView",value:function(){this.activeViewRecord=new Hn(this),this.activeViewRecord.checkAdLoaded()}},{key:"runAdScript",value:function(){"js"===this.type&&qn(this.root)}},{key:"render",value:(t=Zt(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAd();case 2:if(0!==(t=e.sent).count){e.next=6;break}return Mn(this.redirectHref),e.abrupt("return");case 6:this.setConfig(t),this.track=new In({isMobile:this.isMobile,redirectHref:this.redirectHref,adHashId:this.data.hashid}),document.body.insertAdjacentHTML("beforeend",this.getTemplate()),this.getElements(),this.renderAdWithStyle(),this.renderVideo(),this.recordActiveView(),this.runAdScript(),this.bindingEvents(),this.adAnimationActive();case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Bn=function(){function e(t){i(this,e),this.ad=t}return A(e,[{key:"addCallToActionButton",value:function(e){var t,i,n=e.videoWidth(),o=e.videoHeight();t=n*this.ad.root.querySelector(".ad-full-page-video").clientHeight/o,i=(document.body.clientWidth-t)/2+35,this.ad.root.querySelector(".video-ad-button").style.marginRight=i+"px"}},{key:"adjustStyle",value:function(e){if("fullsize"===this.ad.fileType){var t=this.ad.root.querySelector(".video-full-container");e.videoWidth()/e.videoHeight()>1.7?t.classList.add("video-full-container--big"):(t.classList.add("video-full-container--small"),this.ad.root.querySelector(".video-wrap").css("padding-bottom","75%"),"left"===this.ad.videoAlign?t.classList.add("ad-left-video--small"):"right"===this.ad.videoAlign&&t.classList.add("ad-right-video--small"))}}},{key:"showAd",value:function(){this.ad.showAd()}},{key:"renderVideo",value:function(){if("video"===this.ad.type){var e=this.ad,t=this;window.videojs("ad-player",{sources:[{src:this.ad.videofileMp4,type:"video/mp4"},{src:this.ad.videofileWebm,type:"video/webm"}]},(function(){var i=this;this.play(),this.on("loadedmetadata",(function(){t.adjustStyle(i),t.showAd(),"fullsize_without_bg"===t.ad.fileType&&t.addCallToActionButton(i),function(e,t){Ln=t,En=setInterval((function(){var t=Math.floor(e.currentTime()),i=Math.round(e.duration()),n=Math.round(.5*i),o=Math.round(.7*i),r=[{5:function(){return t}},{10:function(){return t}}],a={},l={};a[n]=function(){return 50},l[o]=function(){return 70},r.push(a,l);for(var s=0;s<r.length;s++){var u=r[s];t in u&&Pn(u[t]())}if(t+1>=i)return Pn(100),5===i&&Pn(5),10===i&&Pn(10),void Tn()}),1e3)}(i,e.videoCallbackUrl)}))}))}}}]),e}();Vn("#ad-full-page.desktop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;box-sizing:border-box;min-width:720px;margin:auto;background-color:rgba(0,0,0,.85)}#ad-full-page.desktop .new-style{width:100%;height:100%}#ad-full-page.desktop .new-style .ad-full-page-continue{position:absolute;top:8px;display:inline-block;color:#fff;cursor:pointer}#ad-full-page.desktop .new-style .ad-full-page-continue span{display:inline-block;padding-right:2px;font-size:22px}#ad-full-page.desktop .new-style .ad-full-page-continue img{position:relative;top:-1px;width:30px;height:30px;vertical-align:middle}#ad-full-page.desktop .new-style .ad-click-link{position:absolute;top:0;display:block;width:100%;height:100%}#ad-full-page.desktop .new-style .ad-content{position:fixed;width:100%;height:100%;padding:0}#ad-full-page.desktop .new-style .ad-content__button-wrapper{position:relative}#ad-full-page.desktop .new-style .full-page{height:100%}#ad-full-page.desktop .new-style .full-page .ad-box{position:relative;margin:auto;width:100%}#ad-full-page.desktop .new-style .full-page .ad-box img{width:100%;height:auto}#ad-full-page.desktop .new-style .full-page .ad-box iframe{width:100%;height:55.555555vw}#ad-full-page.desktop .new-style .full-page .ad-full-page-continue{right:16px;z-index:1;padding:3px 7px;background-color:rgba(0,0,0,.5);border-radius:7px}#ad-full-page.desktop .new-style .full-page .ad-full-page-continue span{vertical-align:top}#ad-full-page.desktop .new-style .full-page .ad-link__svg{vertical-align:middle}#ad-full-page.desktop .new-style .video-full-without-bg .ad-box{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}#ad-full-page.desktop .new-style .video-full-without-bg .ad-full-page-video{position:relative;width:100%;height:41vw;max-height:600px}#ad-full-page.desktop .new-style .video-full-without-bg .video-ad-button{position:absolute;right:0;bottom:65px;display:inline-block;border:1px solid #fff;padding:10px 30px;font-size:18px;line-height:18px;color:#fff;background-color:rgba(0,0,0,.4);border-radius:10px;cursor:pointer}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container{position:absolute;max-width:760px;max-height:428px}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container--big{top:50vh;width:46.77777778vw;-webkit-transform:translateY(-50%);transform:translateY(-50%)}#ad-full-page.desktop .new-style .video-full-with-bg .video-full-container--small{width:39.5833333333vw;margin-top:5.9722222222vw}#ad-full-page.desktop .new-style .video-full-with-bg .video-wrap{position:relative;overflow:hidden;width:100%;height:0;padding-bottom:56.25%}#ad-full-page.desktop .new-style .video-full-with-bg .ad-full-page-video{position:absolute;top:0;left:0;width:100%;height:100%}#ad-full-page.desktop .new-style .video-full-with-bg .ad-right-video{right:40px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-left-video{left:40px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-right-video--small{right:135px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-left-video--small{left:135px}#ad-full-page.desktop .new-style .video-full-with-bg .ad-center-video{right:0;left:0;margin-left:auto;margin-right:auto}#ad-full-page.desktop .new-style .not-full-page{height:100%;overflow:scroll}#ad-full-page.desktop .new-style .not-full-page .ad-header{min-width:720px}#ad-full-page.desktop .new-style .not-full-page .ad-content__button-wrapper{width:970px;margin:0 auto}#ad-full-page.desktop .new-style .not-full-page .ad-box{position:relative;top:50%;width:970px;margin:auto;-webkit-transform:translateY(-50%);transform:translateY(-50%)}#ad-full-page.desktop .new-style .not-full-page .ad-box img{min-width:720px}#ad-full-page.desktop .new-style .not-full-page .ad-box>iframe{height:500px}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-continue{top:calc(50vh - 290px);right:0}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-continue span{vertical-align:super}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-video{position:absolute;max-width:512px;max-height:288px;margin-top:81px;margin-right:auto;margin-left:auto}#ad-full-page.desktop .new-style .not-full-page .ad-full-page-iframe{width:970px;height:500px;overflow-y:hidden}#ad-full-page.desktop .new-style .not-full-page .video-not-full-container{text-align:center}#ad-full-page.desktop .new-style .not-full-page.video-with-bg .ad-right-video{right:35px}#ad-full-page.desktop .new-style .not-full-page.video-with-bg .ad-left-video{left:35px}#ad-full-page.desktop .new-style .not-full-page.video-with-bg .ad-center-video{right:0;left:0}#ad-full-page.desktop .new-style .not-full-page.video-without-bg{text-align:center}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .ad-full-page-continue{top:calc(50vh - 265px)}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .ad-content__button-wrapper{width:800px}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .ad-box{display:inline-block;width:auto}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .video-wrap{position:relative;display:inline-block}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .ad-full-page-video{position:relative;width:800px;height:450px;max-width:none;max-height:none;margin-top:0}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .vjs-tech{width:800px;height:auto}#ad-full-page.desktop .new-style .not-full-page.video-without-bg .video-ad-button{position:absolute;right:20px;bottom:110px;display:inline-block;border:1px solid #fff;padding:10px 20px;font-size:16px;line-height:16px;color:#fff;background-color:rgba(0,0,0,.4);border-radius:10px;cursor:pointer}#ad-full-page.desktop .inline-box{display:inline-block}#ad-full-page.desktop .hide{display:none!important}");Vn("#ad-full-page{@-webkit-keyframes load{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}}#ad-full-page .loading-icon{position:absolute;width:8px;height:8px;margin:250px 50%;border-radius:50%;box-shadow:0 -14px 0 hsla(0,0%,100%,.8),10px -10px 0 hsla(0,0%,100%,.7),14px 0 1px hsla(0,0%,100%,.6),10px 10px 1px hsla(0,0%,100%,.5),0 14px 2px hsla(0,0%,100%,.4),-10px 10px 2px hsla(0,0%,100%,.3),-14px 0 3px hsla(0,0%,100%,.2),-10px -10px 3px hsla(0,0%,100%,.1);opacity:.5;-webkit-transform-origin:50%;transform-origin:50%;-webkit-animation:load .5s steps(8) infinite;animation:load .5s steps(8) infinite}@keyframes load{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}");var Nn=function(){function e(t){var n=this;i(this,e),this.isMobile=!0,this.redirectHref=t,this.track=null,this.activeViewRecord=null,window.pix.adFullPage.redirectToClickLocation=function(){Mn(n.redirectHref)},this.exitPageEvent=this.exitPageEvent.bind(this),this.escapeKeyDownEvent=this.escapeKeyDownEvent.bind(this)}var t;return A(e,[{key:"setConfig",value:function(e){var t=e.ad_slots[0],i=t&&t.ad_list[0],n=i.file,o=i.click_url,r=i.type,a=i.file_content,l=i.file_mime_type,s=i.videofile_mp4,u=i.videofile_webm,c=i.video_callback_url,d=i.video_align,f=i.file_type,h=i.activeview_url;this.slot=t,this.data=i,this.clickUrl=o,this.type=r,this.fileContent=a,this.fileMimeType=l,this.videofileMp4=s,this.videofileWebm=u,this.videoCallbackUrl=c,this.videoAlign=d,this.activeViewUrl=h,this.fileType=f,this.file=this.formatFile(r,n),this.isFullSize=["fullsize","fullsize_without_bg"].includes(f),this.isWithoutBackPane=["970x500_without_bg","fullsize_without_bg"].includes(f)}},{key:"getAd",value:function(){var e,t;return Xi("GET",(e=xn(),t=void 0,e===nn&&(t=sn),cn({adPosition:e,mergePosition:t,demoAdNo:"10"===fn?"16b5d40cc4499ee92eab6f42ceb83895":fn})))}},{key:"showAd",value:function(){this.link.classList.remove("hide")}},{key:"addMIBWording",value:function(){if(_n()){var e='<span class="mib--ad-box__icon"><a href="#">痞客邦廣告聯播網</a></span>';if("970x500_without_bg"===this.fileType&&!this.isFullSize)return void this.root.querySelector(".video-wrap").insertAdjacentHTML("beforeend",e);this.root.querySelector(".ad-box").insertAdjacentHTML("beforeend",e)}}},{key:"getElements",value:function(){this.root=document.getElementById("ad-full-page"),this.video=this.root.querySelector(".ad-full-page-video"),this.link=this.root.querySelector(".ad-full-page-link"),this.closeButton=this.root.querySelector(".ad-full-page-continue"),this.loadingIcon=this.root.querySelector(".loading-icon")}},{key:"getVideoTemplate",value:function(){return'\n        <div class="ad-full-page-link hide">\n            '+("\n            <div class='"+(this.isFullSize?"video-full-container ad-"+this.videoAlign+"-video":"video-not-full-container")+"'>\n                <div class='video-wrap'>\n                    <video id=\"ad-player\" class=\"ad-full-page-video "+(this.isWithoutBackPane||this.isFullSize?"":"ad-"+this.videoAlign+"-video")+' video-js" autoplay controls muted controlsList="nodownload noremoteplayback">\n                    </video>\n                    '+(this.isWithoutBackPane?'<a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                <div class="video-ad-button" >了解詳情</div>\n            </a>':"")+"\n                </div>\n            </div>")+"\n            "+(this.isWithoutBackPane?"":'<div class="back-pane">\n                <iframe class="ad-full-page-iframe" src="'+this.file+'" frameborder="0"></iframe>\n            </div>')+"\n        </div>\n        "}},{key:"getHtmlAndJsTemplate",value:function(){return this.slot.html}},{key:"getImageTemplate",value:function(){return'\n        <div class="ad-full-page-link">\n            <div class="back-pane">\n                <a href="'+this.clickUrl+'" target="_blank" rel="noopener" >\n                    <img src="'+this.file+'" alt="'+this.file+'"/>\n                </a>\n            </div>\n        </div>\n        '}},{key:"getAdTemplateByType",value:function(){var e="";switch(this.type){case"image":e=this.getImageTemplate();break;case"video":e=this.getVideoTemplate();break;case"html5":case"js":e=this.getHtmlAndJsTemplate()}return e}},{key:"formatFile",value:function(e,t){return-1===t.indexOf("clickTAG")&&"video"===e&&(t+="&clickTAG="+encodeURIComponent(this.clickUrl)),"image"===e&&this.fileContent&&this.fileMimeType&&(t="data:"+this.fileMimeType+";base64,"+this.fileContent),t}},{key:"getTemplate",value:function(){var e=this.getAdTemplateByType();return'\n        <div id="ad-full-page" class="desktop">\n            <div class=\'new-style\' >\n                <div class="content-wrap '+(this.isFullSize?"full-page":"not-full-page")+'">\n                    <div class="ad-content"></div>\n                    <div class="ad-content__button-wrapper">\n                        <a class="ad-link ad-full-page-continue">\n                            <span class="ad-link__text">關閉廣告</span>\n                            <svg class="ad-link__svg" width="28px" height="28px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g id="Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="文字按鈕" transform="translate(-255.000000, -107.000000)" fill="#FFFFFF"> <g id="4" transform="translate(248.000000, 100.000000)"> <path d="M13.65,13.65 L6,13.65 L6,16.35 L13.65,16.35 L13.65,24 L16.35,24 L16.35,16.35 L24,16.35 L24,13.65 L16.35,13.65 L16.35,6 L13.65,6 L13.65,13.65 Z" id="Combined-Shape" transform="translate(15.000000, 15.000000) rotate(-315.000000) translate(-15.000000, -15.000000) "></path> </g> </g> </g> </svg>\n                        </a>\n                    </div>\n                    <div class="loading-icon"></div>\n                    <div class="ad-box">\n                        '+e+"\n                    </div>\n                </div>\n            </div>\n        </div>\n        "}},{key:"renderAdWithStyle",value:function(){"video"===this.type&&("970x500"!==this.fileType||this.isFullSize||this.root.querySelector(".content-wrap").classList.add("video-with-bg"),"970x500_without_bg"!==this.fileType||this.isFullSize||this.root.querySelector(".content-wrap").classList.add("video-without-bg"),"fullsize_without_bg"===this.fileType&&this.root.querySelector(".content-wrap").classList.add("video-full-without-bg"),"fullsize"===this.fileType&&this.root.querySelector(".content-wrap").classList.add("video-full-with-bg"),this.loadingIcon.classList.add("hide"))}},{key:"renderVideo",value:function(){new Bn(this).renderVideo()}},{key:"recordActiveView",value:function(){this.activeViewRecord=new Hn(this),this.activeViewRecord.checkAdLoaded()}},{key:"removeFullPageAd",value:function(){this.root.parentNode.removeChild(this.root),Tn(),window.removeEventListener("beforeunload",this.exitPageEvent),document.removeEventListener("keydown",this.escapeKeyDownEvent),Mn(this.redirectHref),this.activeViewRecord.stop(),this.root=null}},{key:"exitPageEvent",value:function(){this.track.exitPageEvent()}},{key:"escapeKeyDownEvent",value:function(e){var t=this;27===e.keyCode&&setTimeout((function(){t.track.escapeKeyDownEvent(),t.removeFullPageAd()}),0)}},{key:"bindingEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.exitPageEvent),this.closeButton.addEventListener("click",(function(t){e.track.clickCloseButtonEvent(),e.removeFullPageAd(),document.body.style.overflow="auto"})),document.addEventListener("keydown",this.escapeKeyDownEvent),this.root.querySelector(".ad-content").addEventListener("click",(function(t){"ad-content"===t.target.classList[0]&&(e.track.clickOnEdgeEvent(),e.removeFullPageAd())}))}},{key:"runAdScript",value:function(){"js"===this.type&&qn(this.root)}},{key:"render",value:(t=Zt(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAd();case 2:if(0!==(t=e.sent).count){e.next=6;break}return Mn(this.redirectHref),e.abrupt("return");case 6:this.setConfig(t),this.track=new In({isMobile:this.isMobile,redirectHref:this.redirectHref,adHashId:this.data.hashid}),document.body.style.overflow="hidden",document.body.insertAdjacentHTML("beforeend",this.getTemplate()),this.getElements(),this.recordActiveView(),this.runAdScript(),this.renderAdWithStyle(),this.renderVideo(),this.bindingEvents(),this.addMIBWording();case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Un=function(){var e=!1,t=void 0,i=void 0,n=0,o=1e4,r=kn(),a=_n(),l=dn("wait_footer");function s(){var t=document.querySelectorAll("a");[].concat(Cn(t)).forEach((function(t){var i=t.getAttribute("href"),n=t.getAttribute("target"),o=!!n&&"_blank"===n;t.addEventListener("click",(function(t){var n=!!t.target.className.match(/pixnet-happix-pilot|pixnavbar__top-bar/);(function(e){if(!e||e.match(/^#/))return!1;return!0})(i)&&(e||!c()||n||o||(t.preventDefault(),u(i)))}))}))}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;c()&&(e=!0,window.pix.adFullPage&&window.pix.adFullPage.active(t))}function c(){var e=document.querySelector(".idle-pop"),t=pix.MIB.config.hasMIB;return!!r||"none"!==document.body.dataset.showingAdvertisement&&((!pix||!pix.is_owner)&&(!(!a&&t)&&((!e||!e.classList.contains("active"))&&!(!pix.is_owner&&window.pix.f&&window.pix.f.blog.idle&&window.pix.f.blog.idle.hasActived))))}function d(){if(!pix.isMobile&&document[t]&&pix.adFullPage.close(),!e)if(document[t])n=(new Date).getTime();else{var i=(new Date).getTime();0!==n&&i-n>=o&&u()}}return void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.msHidden?(t="msHidden",i="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),{checkShowPopupAd:function(){var e=!location.href.match("/blog/post");if(document.addEventListener(i,d,!1),pix.isMobile&&!e&&!r||l)var t=setInterval((function(){var e=document.querySelector(".relative-article");e&&e.querySelectorAll("li").length>0&&(clearInterval(t),s())}),1e3);else s()}}}(),Dn=function(){function e(t){i(this,e),this.isMobile=!!t,this.redirectHref=null}return A(e,[{key:"render",value:function(){this.ad=this.isMobile?new Rn(this.redirectHref):new Nn(this.redirectHref),this.ad.render()}},{key:"active",value:function(e){this.redirectHref=e,this.render()}},{key:"close",value:function(){this.ad&&this.ad.root&&this.ad.removeFullPageAd()}}]),e}();window.pix.adFullPage=new Dn(window.pix.isMobile),"loading"!==document.readyState?Un.checkShowPopupAd():document.addEventListener("DOMContentLoaded",(function(){Un.checkShowPopupAd()})),"true"===dn("fly-ad")&&window.pix.adFullPage.active()}();
