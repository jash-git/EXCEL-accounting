/*!
 *  player-df.min.js 2024-01-25 4:58:25 PM
 *
 */(()=>{"use strict";const e="https://www.onead.com.tw/onead-smart-media-privacy-policy/";var t,n,i;!function(e){e.DEFAULT="default",e.IR="inread",e.IC="incover",e.MIF="inflip",e.TD="text-drive",e.FD="flash-drive",e.APR="app-pre-roll",e.DSP="dsp-creative",e.MS="mobile-survey",e.MIT="mobile-intop",e.MIR="mobile-inread",e.IAB_VAST="iab-vast",e.AMP_IR="amp-inread",e.IN_STREAM="instream",e.DPF="desktop-frame",e.MIC="mobile-incover",e.MPR="mobile-pre-roll",e.DPR="desktop-pre-roll",e.MFS="mobile-fullscreen",e.MAIC="mobile-app-incover",e.MAIR="mobile-app-inread",e.SW="superwall",e.CTV_CREATIVE="ctv-creative"}(t||(t={})),function(e){e.TEXT_ONLY="TEXT_ONLY",e.FLASH_DRIVE_320="FLASH_DRIVE_320",e.FLASH_DRIVE_300="FLASH_DRIVE_300",e.IS_DF="HTML5_IS_DF",e.IS_INSYNC="HTML5_IS_INSYNC",e.IS_DF_BANNER="HTML5_IS_DF_BANNER",e.IS_FOLLOW_INSYNC="HTML5_IS_FOLLOW_INSYNC",e.IS_FOLLOW_DF="HTML5_IS_FOLLOW_DF",e.DOOR="DESKTOP_DOOR",e.DOOR_VIDEO="DESKTOP_DOOR_VIDEO",e.DOOR_PLUS="DESKTOP_DOOR_PLUS",e.MOBILE="MOBILE",e.INSTANT="INSTANT",e.TRANSFORMER="TRANSFORMER",e.TRANSFORMER_GALLERY="TRANSFORMER_GALLERY",e.TRANSFORMER_STICKY="TRANSFORMER_STICKY",e.TRANSFORMER_SOCIAL="TRANSFORMER_SOCIAL",e.TRANSFORMER_SWAP="TRANSFORMER_SWAP",e.SCRATCH="SCRATCH",e.SCRATCH_BNB="SCRATCH_BNB",e.VERTICAL_V2="VERTICAL_V2",e.VERTICAL_SHOW="VERTICAL_SHOW",e.VERTICAL_LOCK="VERTICAL_LOCK",e.VERTICAL_BANNER_V2="VERTICAL_BANNER_V2",e.VERTICAL_VIDEOBANNER="VERTICAL_VIDEOBANNER",e.LANDSCAPE_ENGAGEMENT="LANDSCAPE_ENGAGEMENT",e.FRAME_ENGAGEMENT="FRAME_ENGAGEMENT",e.PAGE_BANNER="PAGE_BANNER",e.PAGE_BANNER_V2="PAGE_BANNER_V2",e.PAGE_LINKTREE="PAGE_LINKTREE",e.STATIC="STATIC",e.POSTER="POSTER",e.POSTER_VIDEO="POSTER_VIDEO",e.SKIRT="SKIRT",e.FLASH="FLASH",e.STORY="STORY",e.PAGE_V2="PAGE_V2",e.PAGE="PAGE",e.SHOW="SHOW",e.TAG="TAG",e.BNB="BNB",e.BOTTOM="BOTTOM",e.BOTTOM_BANNER="BOTTOM_BANNER",e.BOTTOM_BANNER_640X273="BOTTOM_BANNER_640X273",e.BOTTOM_CLASSIC="BOTTOM_CLASSIC",e.BOTTOM_CUBE="BOTTOM_CUBE",e.BOTTOM_CUBE_BANNER_640X273="BOTTOM_CUBE_BANNER_640X273",e.BOTTOM_CUBE_BANNER="BOTTOM_CUBE_BANNER",e.BOTTOM_PEEK="BOTTOM_PEEK",e.BOTTOM_PEEK_BANNER="BOTTOM_PEEK_BANNER",e.BOTTOM_HIT="BOTTOM_HIT",e.BOTTOM_HIT_NF="BOTTOM_HIT_NF",e.BOTTOM_FLASH_CARD="BOTTOM_FLASH_CARD",e.BOTTOM_FLASH_CARD_NF="BOTTOM_FLASH_CARD_NF",e.BOTTOM_HIT_VIDEO="BOTTOM_HIT_VIDEO",e.BOTTOM_HIT_VIDEO_NF="BOTTOM_HIT_VIDEO_NF",e.BOTTOM_INSTANT="BOTTOM_INSTANT",e.BOTTOM_FLASH_V2="BOTTOM_FLASH_V2",e.BOTTOM_FLASH="BOTTOM_FLASH",e.BOTTOM_FLASH_BANNER="BOTTOM_FLASH_BANNER",e.BOTTOM_FLASH_BANNER_640X273="BOTTOM_FLASH_BANNER_640X273",e.BOTTOM_FLASH_V2_BANNER_640X273="BOTTOM_FLASH_V2_BANNER_640X273",e.BOTTOM_FLASH_VIDEO="BOTTOM_FLASH_VIDEO",e.BOTTOM_GALLERY="BOTTOM_GALLERY",e.BOTTOM_GALLERY_WEBGL="BOTTOM_GALLERY_WEBGL",e.BOTTOM_GALLERY_BANNER="BOTTOM_GALLERY_BANNER",e.BOTTOM_GALLERY_ZOOM="BOTTOM_GALLERY_ZOOM",e.BOTTOM_REEL="BOTTOM_REEL",e.BOTTOM_REELS_V2="BOTTOM_REELS_V2",e.BOTTOM_STAR="BOTTOM_STAR",e.BOTTOM_STAR_VIDEO="BOTTOM_STAR_VIDEO",e.BOTTOM_LOCATION="BOTTOM_LOCATION",e.BOTTOM_LOCATION_GALLERY="BOTTOM_LOCATION_GALLERY",e.BOTTOM_LOCATION_VIDEO="BOTTOM_LOCATION_VIDEO",e.BOTTOM_LOCATION_DOOR_VIDEO="BOTTOM_LOCATION_DOOR_VIDEO",e.BOTTOM_FLASH_LOCATION="BOTTOM_FLASH_LOCATION",e.BOTTOM_FLASH_LOCATION_V2="BOTTOM_FLASH_LOCATION_V2",e.BOTTOM_LINKTREE="BOTTOM_LINKTREE",e.VERTICAL="VERTICAL",e.SCROLLER="SCROLLER",e.SCROLLER_V2="SCROLLER_V2",e.VERTICAL_BANNER="VERTICAL_BANNER",e.SCROLLER_VERTICAL="SCROLLER_VERTICAL",e.FULLSCREEN_COVER="FULLSCREEN_COVER",e.FULLSCREEN_COVER_PLAY="FULLSCREEN_COVER_PLAY",e.FULLSCREEN_COVER_VIDEO="FULLSCREEN_COVER_VIDEO",e.FULLSCREEN_COVER_STORY="FULLSCREEN_COVER_STORY",e.FULLSCREEN_COVER_POSTER="FULLSCREEN_COVER_POSTER",e.FULLSCREEN_COVER_BANNER="FULLSCREEN_COVER_BANNER",e.FULLSCREEN_COVER_SCRATCH="FULLSCREEN_COVER_SCRATCH",e.FULLSCREEN_COVER_POSTER_VIDEO="FULLSCREEN_COVER_POSTER_VIDEO",e.FULLSCREEN_FLASH_DRIVE_320="FULLSCREEN_FLASH_DRIVE_320",e.FULLSCREEN_FLASH_DRIVE_300="FULLSCREEN_FLASH_DRIVE_300",e.BRAND_LIFT="BRAND_LIFT",e.BRAND_LIFT2="BRAND_LIFT2",e.BRAND_LIFT3="BRAND_LIFT3",e.SUPERWALL_SURVEY="SUPERWALL_SURVEY",e.CTV_LINKTREE="CTV_LINKTREE",e.CTV_MOVIE_SHOWTIME="CTV_MOVIE_SHOWTIME",e.CTV_LOCATION="CTV_LOCATION",e.WEATHER="WEATHER",e.WEATHER_FRAME="WEATHER_FRAME",e.DSP_300X250="300X250",e.H5_320X480="H5_320X480",e.H5_970X250="H5_970X250",e.H5_640X480="H5_640X480",e.DSP_PAGE_320X480="DSP_PAGE",e.STATIC_320X480="STATIC_320X480",e.H5_320X480_BANNER="H5_320X480_BANNER",e.TRANSFORMER_300X250="TRANSFORMER_300X250",e.TRANSFORMER_320X480="TRANSFORMER_320X480",e.DSP_PAGE_BANNER_ONLY="DSP_PAGE_BANNER_ONLY",e.DSP_VIDEO_ONLY_300X250="DSP_VIDEO_ONLY_300X250",e.H5_320X480_VIDEO_BANNER="H5_320X480_VIDEO_BANNER",e.TRANSFORMER_300X250_BNB="TRANSFORMER_300X250_BNB",e.TRANSFORMER_320X480_BNB="TRANSFORMER_320X480_BNB",e.DSP_BANNRT_ONLY_300X250="DSP_BANNER_ONLY_300X250",e.DSP_BANNRT_ONLY_320X480="DSP_BANNER_ONLY_320X480"}(n||(n={})),function(e){e[e.DIRECT=1]="DIRECT",e[e.SPEED=2]="SPEED",e[e.PD=3]="PD",e[e.RON=4]="RON",e[e.PG=5]="PG",e[e.SPEED_AGENCY=6]="SPEED_AGENCY"}(i||(i={}));const r=640,s=950,o="MIRT",a="MIRTG",l="MIRT_ST",d="MIRT_SP",c="MIRT_SO",u="MIRSC",p="MIRSC_B",h="MIRI",y="MIRSK",m="MIRS",E="MIRS_V2",T="MIRSV",g="MIRV",I="MIRV_V2",N="MIRVB",_="MIRVB_V2",L="MIRVVB",C="MIRVS",M="MIRM",A="MIRB",v="MIRP",O="MIRP_V2",f="MIRPLT",S="MIRPB",w="MIRPB_V2",R="MIRPO",x="MIRTS",D="MIRF",b="MIRHTF",P="MIRTFB",j="MIRHTFVB",k="MIRSH",U="MIRTAG",B="LANDSCAPEENGAGEMENT",F="FRAMEENGAGEMENT",H="MFSFC",V="MFSFC_B",z="MFSFC_V",Y="MFS_PL",W="MFS_ST",G="MFS_SC",Q="MFS_PO",X="MFS_POV",K="MFSFD_320",q="MFSFD_300",Z="MS_BL",J="MIRST",$="MICB",ee="MICBC",te="MICBP",ne="MICBPB",ie="MICBCL",re="MICBF_V2",se="MICBF_VIDEO",oe="MICBR",ae="MICBR_V2",le="MICS",de="MICSV",ce="MICBL",ue="MICBLG",pe="MICBLV",he="MICBLDV",ye="MICBFL",me="MICBFL_V2",Ee="MICBH",Te="MICBH_NF",ge="MICBH_V",Ie="MICBH_V_NF",Ne="MICBI",_e="MICBG",Le="MICBG_BANNER",Ce="MICBF_BANNER",Me="MICBG_GL",Ae="MICBG_Z",ve="MICB_BANNER",Oe="MICBC_BANNER",fe="MICBF_V2_BANNER",Se="IPDF",we="IPFOLLOWDF",Re="IPINSYNC",xe="IPFOLLOWINSYNC",De="IRDF",be="IRFOLLOWDF",Pe="desktop-pre-roll",je="mobile-pre-roll",ke="app-pre-roll",Ue="DSP";var Be;!function(e){e[e.USE_FIRST_ONE=0]="USE_FIRST_ONE",e[e.CHANGE_ANOTHER_LAYOUT=1]="CHANGE_ANOTHER_LAYOUT"}(Be||(Be={}));const Fe=.5,He=.5;var Ve;!function(e){e[e.NONE=0]="NONE",e[e.BOTH=1]="BOTH",e[e.ONLY_REPLAY_BUTTON=2]="ONLY_REPLAY_BUTTON",e[e.ONLY_MORE_BUTTON=3]="ONLY_MORE_BUTTON"}(Ve||(Ve={}));const ze=12e4,Ye="creative.onead.com.tw",We="staging-occ.onead.tw",Ge="creative.dsp.com.tw",Qe="rd-superdsp.onead.tw",Xe="rd-occ.onead.tw",Ke="tw.nextapple",qe="basketballtop5.com",Ze="www.foootball.cc",Je="ftvnews.com.tw",$e="ck101.com",et="cool3c.com",tt="bc3ts.com",nt="bc3ts.net",it="carnews.com",rt="bbcommune.com",st="cheers.com.tw",ot="carstuff.com.tw",at="www.brain.com.tw",lt="bccnews.com.tw",dt="cool-style.com.tw",ct="www.cava.tw",ut="cava.tw",pt="dcard.tw",ht="ctee.com.tw",yt="cw.com.tw",mt="daybuy.tw",Et="cnews.com.tw",Tt="news.cts.com.tw",gt="ctinews.com",It="www.cmoney.tw",Nt="dailyview.tw",_t="gq.com.tw",Lt="ddm.com.tw",Ct="buzzhand.com",Mt="fullfenblog.tw",At="dramaqueen.com.tw",vt="everylittled.com",Ot="harpersbazaar.com",ft="utaggo.com.tw",St="icook.tw",wt="how01.com",Rt="juksy.com",xt="ifoodie.tw",Dt="linetv.tw",bt="inside.com.tw",Pt="helloyishi.com.tw",jt="keelunghihi.com.tw",kt="wowlavie.com",Ut="mababy.com",Bt="mingweekly.com",Ft="mirrormedia.mg",Ht="mombaby.com.tw",Vt="mamaclub.com",zt="money-link.com.tw",Yt="www.mnews.tw",Wt="niusnews.com",Gt="thenewslens.com",Qt="newtalk.tw",Xt="nocancers.net",Kt="look-in.com.tw",qt="opnews.sp88.tw",Zt="pansci",Jt="popdaily.com.tw",$t="punchline.asia",en="reurl.cc",tn="www.starryeagle.com",nn="storm.mg",rn="sportsv.net",sn="teepr.com",on="tel3c.tw",an="toy-people.com",ln="ttshow.tw",dn="ttvc.com.tw",cn="u-car.com.tw",un="www.walkerland.com",pn="iwoman.sharelife.tw",hn="women-shuo.com",yn="www.marieclaire.com.tw",mn="zi.media",En="forum.babyhome.com.tw",Tn="businesstoday.com.tw",gn="waynesan.com",In="buzzorange.com",Nn="tomorrowsci.com",_n="www.kpopn.com",Ln="webmail.hinet.net",Cn="m.life.tw",Mn="hiking.biji.co",An="running.biji.co",vn="basketball.biji.co",On="meet.bnext.com.tw",fn="www.bnext.com.tw",Sn="managertoday.com.tw",wn="shoppingdesign.com.tw",Rn="www.businessweekly.com.tw",xn="wealth.businessweekly.com.tw",Dn="health.businessweekly.com.tw",bn="www.chinatimes.com",Pn="truemii.chinatimes.com",jn="wantrich.chinatimes.com",kn="club.commonhealth.com.tw",Un="www.commonhealth.com.tw",Bn="womenshealthmag.com",Fn="www.elle.com",Hn="cosmopolitan.com",Vn="m.cnyes.com",zn="news.cnyes.com",Yn="ettoday.net",Wn="www.ettoday.net",Gn="ebcbuzz.com",Qn="house.ebc.net.tw",Xn="fnc.ebc.net.tw",Kn="news.ebc.net.tw",qn="sitemaji.com",Zn="feebee.com.tw",Jn="health.gvm.com.tw",$n="s-das.dna360.tw",ei="dev-adsv.svc.litv.tv",ti="ltn.com.tw",ni="www.nownews.com",ii="uat.nownews.com",ri="www.parenting.com.tw",si="iview.sina.com.tw",oi="www.techbang.com",ai="mf.techbang.com",li="digiphoto.techbang.com",di="pixnet.net";var ci;!function(e){e.CHINATIMES=".underlay-auto-scale",e.CHINATIMES2=".clip-container",e.PIXNET=".pixnet-ad",e.PIXNET_IR=".in-read-ad"}(ci||(ci={}));class ui{something(){}}class pi{constructor(e){this.DEVICE={IPHONE:"iPhone",IPAD:"iPad",IPOD:"iPod",ANDROID:"Android",WINDOWS:"Windows"},this.BROWSER={CHROME:"Chrome",CHROME_IOS:"CriOS",IE6:"MSIE 6",WEBVIEW:" wv",LINE:" Line",FBAV:"FBAV",FBAN:"FBAN"},this.initDataByUserAgent(),this.initScopeByEnvironment(),this.initDataByDevice()}static getInstance(){return void 0===pi._instance&&(pi._instance=new pi(new ui)),pi._instance}initDataByUserAgent(){this.userAgent=window.navigator.userAgent,this.isIphone=this.checkWordInUserAgent(this.DEVICE.IPHONE),this.isIpad=this.checkWordInUserAgent(this.DEVICE.IPAD),this.isIpod=this.checkWordInUserAgent(this.DEVICE.IPOD),this.isIos=this.isIphone||this.isIpad||this.isIpod,this.isAndroid=this.checkWordInUserAgent(this.DEVICE.ANDROID),this.isMobile=this.isAndroid||this.isIos,this.isWindows=this.checkWordInUserAgent(this.DEVICE.WINDOWS),this.isWebView=this.checkWordInUserAgent(this.BROWSER.WEBVIEW),this.isChrome=this.checkWordInUserAgent(this.BROWSER.CHROME),this.isFB=this.checkWordInUserAgent(this.BROWSER.FBAN)||this.checkWordInUserAgent(this.BROWSER.FBAV),this.isChromeInIos=this.checkWordInUserAgent(this.BROWSER.CHROME_IOS),this.isIe6=this.checkWordInUserAgent(this.BROWSER.IE6),this.checkChromeVersionIsAbove=this.getVersionCompareFunction({regularEx:/Chrome\/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/g,firstStr:"Chrome/",splitStr:"."}),this.checkLineVersionIsAbove=this.getVersionCompareFunction({regularEx:/line\/[0-9]+\.[0-9]+\.[0-9]+/g,firstStr:"line/",splitStr:"."}),this.checkIosVersionIsAbove=this.getVersionCompareFunction({regularEx:/iPhone OS [0-9]+_[0-9]+(_[0-9])?/g,firstStr:"iPhone OS ",splitStr:"_"}),this.isSupportDASH=this.checkIfSupportDASH()}deviceIsHorizontal(){let e;try{e=window.screen.orientation.angle}catch(t){e=window.matchMedia("(orientation: landscape)").matches}return"90"==e||"-90"==e||!0===e}checkIfSupportDASH(){return!(!window.MediaSource||!("MediaSource"in window))}checkIfSupportHEVChls(){return!1}checkWordInUserAgent(e){let t;return t=this.userAgent.indexOf(e)>-1,t}getVersion(e){let t=e.regularEx,n=e.firstStr,i=e.splitStr;t.exec(this.userAgent);let r,s=t.lastIndex,o=this.userAgent.indexOf(n),a=s-o-n.length,l=this.userAgent.substr(o+n.length,a);return r=void 0!==i?l.split(i):[l],r}versionCompare(e,t,n,i){function r(e){return(s?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}const s=null==i?void 0:i.lexicographical,o=null==i?void 0:i.zeroExtend;let a=e.split(n),l=t.split(n);if(!a.every(r)||!l.every(r))return NaN;if(o){for(;a.length<l.length;)a.push("0");for(;l.length<a.length;)l.push("0")}s||(a=a.map(Number),l=l.map(Number));for(let e=0;e<a.length;++e){if(l.length===e)return 1;if(a[e]!==l[e])return a[e]>l[e]?1:-1}return a.length!==l.length?-1:0}isAboveBaseVersion(e){let t=e.baseVersionStr,n=e.options||{extendZero:!0},i=this.getVersion({regularEx:e.regularEx,firstStr:e.firstStr})[0];return this.versionCompare(i,t,e.splitStr,n)>=0}getVersionCompareFunction(e){return function(t){return this.isAboveBaseVersion({regularEx:e.regularEx,firstStr:e.firstStr,splitStr:e.splitStr,baseVersionStr:t,options:e.options})}}initDataByDevice(){const e=window.screen.height>window.screen.width,t=function(e){const t=document.getElementsByTagName("meta");for(const n of t)if(n.getAttribute("name")===e)return n.getAttribute("content");return""}("viewport").indexOf("device-width")>-1,n=e?window.screen.width:window.screen.height;this.deviceInfo={portraitHeight:e?window.screen.height:window.screen.width,portraitWidth:t?n:window.innerWidth,deviceHeight:this._scopeInfo.accessibleHighestWin.innerHeight},this.isCookieEnabled=this._checkIfCookieEnabled()}_checkIfCookieEnabled(){let e=navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="onevision_testcookie",e=-1!==document.cookie.indexOf("onevision_testcookie")),e}static detectHighestWindow(e,t=window){let n=!1,i=t.parent;try{i.location.href}catch(i){n=!0,e.accessibleHighestWin=t,e.isBlockedBySameOriginPolicy=!0}n||(2==++e.accessibleLayer&&(e.accessibleParentWin=i),e.accessibleHighestWin=i,i!==top&&pi.detectHighestWindow(e,i))}initScopeByEnvironment(){this._scopeInfo={accessibleHighestWin:window,accessibleParentWin:window,accessibleLayer:1,isBlockedBySameOriginPolicy:!1},pi.detectHighestWindow(this._scopeInfo)}get scopeInfo(){return this._scopeInfo}}const hi=(e,t)=>{let n,i;switch(typeof e){case"string":n=Number(e),isNaN(n)&&(n=0);break;case"number":n=e}return i=t?Math.round(n):Math.floor(n),i},yi={isip_index:-1},mi={ONEAD_IAS_NESTLE:"onead_ias_nestle",ONEAD_IAS_TEST:"onead_ias_test",ONEAD_IAS_TEMPLATE_D:"onead_ias_templateD"},Ei="DI_CENTER",Ti="DATA_CENTER",gi="PLAY_BUTTON",Ii="MUTE_BUTTON",Ni="QUEUE_MANAGER",_i="BANNER_CLICK_AREA",Li="onead-banner-wrapper",Ci="onead-banner-content",Mi="onead-banner-img",Ai="onead-banner-click-area",vi="onead-text-wrapper",Oi="onead-text-content",fi="onead-text-layout",Si="onead-text-li",wi="onead-text-ul",Ri="onead-text-span",xi="onead-nav-wrapper",Di="onead-nav-text",bi="onead-nav-icon",Pi="onead-safe-area",ji="onead-logo-img",ki="onead-logo-text";var Ui;!function(e){e.MARGIN_LEFT="margin-left",e.MAX_HIGTH="max-height",e.CLIP_PATH_KIT="-ebkit-clip-path",e.CLIP_PATH="clip-path"}(Ui||(Ui={}));class Bi{constructor(){this._componentPool={},this.register(Ei,this)}register(e,t){const n=(e,t)=>{e&&""!==t&&(void 0===this._componentPool[t]?this._componentPool[t]=e:Array.isArray(this._componentPool[t])?this._componentPool[t].push(e):this._componentPool[t]=[this._componentPool[t],e])};Array.isArray(t)?t.forEach((t=>{n(t,e)})):n(t,e)}get(e){return void 0!==this._componentPool[e]?this._componentPool[e]:void 0}}class Fi{constructor(){this._queueList=[]}enqueue(e){this._queueList.push(e),this._queueList.sort(((e,t)=>t.priority-e.priority))}dequeue(){let e;for(;e=this._queueList.shift();)e.action(e.param)}}const Hi={events:{UI_SKIP:"skip",UI_UNMUTE:"unmute",UI_MUTE:"mute",UI_REPLAY:"replay",UI_MORE:"more",UI_EXPAND:"expand",UI_MINIMIZE:"minimize",CREATE_VIEW:"cv",VIDEO_CLICK:"videoClick",BANNER_CLICK:"bannerClick",IMPRESSION:"impression",VIEWABILITY:"viewability",TRIGGER_BUTTON:"tb",CPE:"cpe",DISP:"disp",CLICK:"click",ENGAGEMENT:"eng",CLOSE:"close",SCROLL:"scorll",UENGAGE:"uengage",LEAVE_AD:"leave_ad",COMPVIEW:"compview",TO_BRIDGE:"to-birdge",EMOJI_CLICK:"emojiClick",BRIDGE_OPEN:"bridge-open",ATTENTION_ENG:"attentionEng"},viewEvents:{VIEW_2S:"view2s",VIEW_3S:"view3s",VIEW_5S:"view5s",VIEW_10S:"view10s",VIEW_30S:"view30s"},quarterEvents:{Q0:"q0",Q25:"q25",Q50:"q50",Q75:"q75",Q100:"q100"},playerEvents:{TIMEUPDATE:"timeupdate",VIDEOEND:"videoEnd",VPAID_READY:"vpaidReady",VPAID_CLOSE:"vpaidClose"},materialEvent:{CALL_VIDEO_PLAY:"callVideoPlay",CALL_VIDEO_PAUSE:"callVideoPause",CALL_IDENTITY_HIDE:"callIdentityHide",NEED_SYNC_BEFORE_CLOSE:"NEED_SYNC_BEFORE_CLOSE",SYNC_TRACKING_EVENT:"ONEAD_SYNC_TRACKING_EVENT",SEND_TRACKING_EVENT:"sendTrackingEvent",ONEAD_EXECUTE_CODE:"ONEAD_EXECUTE_CODE",SET_VIDEOCLICKAREA_TO_VIDEOSIZE:"setVideoClickAreaToVideoSize",ADJUST_ICON_CLICK_AREA:"adjustIdentityIconClickAreaSize",DISABLE_PLAYER_CONTROL:"disablePlayerControl",MATERIAL_TRACKING_EVENTS_SENT:"MATERIAL_TRACKING_EVENTS_SENT",SEND_BANNER_CLICK_TO_WARROOM:"sendBannerClickToWarroom",SEND_VIDEO_CLICK_AND_OPEN_URL:"sendVideoClickAndOpenUrl",SEND_CLICK_LANDING_PAGE:"sendClickLandingPage",SET_VIDEO_CLICK_URL:"setVideoClickUrl",ADD_TRACKING_ACCOUNT:"addTrackingAccount",INSERT_SCRIPT_IN_HEAD:"insertScriptInHead",REMOVE_BANNER_CLICK_AREA:"removeBannerClickArea",HIDE_UI_COMPONENT:"hideUiComponent",TOUCH_EVENT_SETUP:"TOUCH_EVENT_SETUP",TOUCH_EVENT_DISPATCH:"TOUCH_EVENT_DISPATCH",SEND_EVENT_ENG:"SEND_EVENT_ENG",SET_VIDEO_ZINDEX:"setVideoZindex",WAIT_FOR_EXPAND:"waitForExpand",DISPLAY_LAYOUT:"displayLayout",SEND_EVENT:"SEND_EVENT",GET_CUBE_CHANGE:"getCubeChange",SEND_IFRAME_READY:"sendIframeReady",VIDEO_TIME_UPDATE:"videoTimeUpdate",SETUP_TIME_EVENT:"setupTimeEvent",IS_FRAME_RUN_END:"isFrameRunEnd",MIRF_PLAY_DONE:"mirfPlayDone",SEND_NAMELIST_TO_SENTRY:"send_Namelist_ToSentry"},oneadLibEvent:{ADS_CONTENT_IS_EMPTY:"adsContentIsEmpty"},crossChannelEvent:{CLICK:"click"}},Vi=[Hi.events.VIDEO_CLICK,Hi.events.BANNER_CLICK].concat(Object.values(Hi.materialEvent));class zi{constructor(e,t){this.priority=0,this.needExecute=!0,this.eventHandlerFunc=e,this.priority=t}}class Yi{static getInstance(e){return Yi._eventCenterArr[e]}constructor(){this.eventCheckList=[Hi.events.CREATE_VIEW,Hi.events.IMPRESSION,Hi.quarterEvents.Q0,Hi.quarterEvents.Q25,Hi.quarterEvents.Q50,Hi.quarterEvents.Q75],Yi._eventCenterArr.push(this),this._id=Yi._produceId(),this.resetData()}static _produceId(){const e=Math.floor(1e3*Math.random()).toString();return Date.now()+e}resetData(){this._eventHandlerMap={},this._eventCounter={},this._eventSendLimit={},this._dataCenter=new sr(this),this._queueManager=new Fi,this._diCenter=new Bi,this.diRegister(Ti,this._dataCenter),this.diRegister(Ni,this._queueManager)}subscribe(e,t,n=0){if(this._eventHandlerMap[e]||(this._eventHandlerMap[e]=[]),t.toString().indexOf(".dispatch(")>-1)throw new Error("please use dispatchLater in subscribe!");this._eventHandlerMap[e].push(new zi(t,n)),this._eventHandlerMap[e].sort(((e,t)=>t.priority-e.priority))}unsubscribe(e,t){const n=this._eventHandlerMap[e];for(const e of n)e.eventHandlerFunc===t&&(e.needExecute=!1)}clearByEventName(e){this._eventHandlerMap[e]&&(this._eventHandlerMap[e]=[])}clearAll(){this.resetData()}dispatchLater(e,t){this.dispatch(e,t,!0)}isEmptyUrl(e){let t;if("string"==typeof e)t=e;else if("string"==typeof e.url)t=e.url;else if(t=this._dataCenter.bannerDataInXml[0].linkUrls[e.url],void 0===t)try{t=this._dataCenter.bannerDataInXml[1].linkUrls[e.url]}catch(e){}return"null"===t||""===t||void 0===t}dispatch(e,t,n){if((e!==Hi.events.VIDEO_CLICK&&e!==Hi.events.BANNER_CLICK||!this.isEmptyUrl(t))&&(this.eventCheckList=this.eventCheckList.filter((t=>t!==e)),this.checkEventLimit(e))){void 0===t&&(t=e);const i=this._eventHandlerMap[e];i&&i.forEach((e=>{e.needExecute&&this._queueManager.enqueue({action:e.eventHandlerFunc,param:t,priority:e.priority})})),void 0===n&&this._queueManager.dequeue()}}checkEventLimit(e){let t=this._eventCounter[e];const n=this._eventSendLimit[e];let i;return void 0===n?i=!0:(void 0===t?t=1:t++,this._eventCounter[e]=t,i=t<=n),i}setupEventSendLimitTimes(e){this._eventSendLimit[e.eventType]=e.limit}get dataCenter(){return this._dataCenter}get eventCounter(){return this._eventCounter}get id(){return this._id}sendErrorReport(e,t){this.dataCenter.reporting.sendErrorReporting(e,t)}diRegister(e,t){this._diCenter.register(e,t)}diGet(e){return this._diCenter.get(e)}}Yi._eventCenterArr=[];const Wi="[EVENT]",Gi="[ERRORCODE]",Qi="[ERRORMSG]",Xi="[ERRORDESC]",Ki="30002",qi={XML_FAIL:{errorCode:"20001",errorMsg:"20001 XML FAIL",errorDesc:{desc1:"xml parsing error"}},SOURCE_FAIL:{errorCode:"20002",errorMsg:"20002 SOURCE FAIL",errorDesc:{desc1:"source not found or broken"}},JSON_FAIL:{errorCode:"20003",errorMsg:"20003 JSON FAIL",errorDesc:{desc1:"l_json source not found or broken"}},CREATE_VIEW_FAIL:{errorCode:"30001",errorMsg:"30001 CREATE VIEW FAIL",errorDesc:{desc1:"create view fail"}},AD_WRAPPER_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 AD SIZE ERROR",errorDesc:{desc1:"wrapper size error"}},AD_IFRAME_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 AD SIZE ERROR",errorDesc:{desc1:"iframe size error"}},AD_LAYOUT_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 AD SIZE ERROR",errorDesc:{desc1:"layout size error"}},AD_VIDEO_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 AD SIZE ERROR",errorDesc:{desc1:"video size error"}},AD_BANNER_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 AD SIZE ERROR",errorDesc:{desc1:"banner size error"}},AD_IC_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 IC SIZE ERROR",errorDesc:{}},AD_IP_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 IP SIZE ERROR",errorDesc:{}},AD_IR_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 IR SIZE ERROR",errorDesc:{}},AD_MIR_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 MIR SIZE ERROR",errorDesc:{}},AD_MAIR_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 MAIR SIZE ERROR",errorDesc:{}},AD_MIT_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 MIT SIZE ERROR",errorDesc:{}},AD_MIC_SIZE_ERROR:{errorCode:Ki,errorMsg:"30002 MIC SIZE ERROR",errorDesc:{}},AUTOPLAY_FAIL:{errorCode:"30003",errorMsg:"30003 AUTOPLAY FAIL",errorDesc:{desc1:"autoplay fail"}},IN_SAFE_FRAME:{errorCode:"40001",errorMsg:"40001 IN SAFE FRAME",errorDesc:{}}};class Zi{constructor(e){this._value=e}setupEventName(e){return this._value=this._value.replace("[EVENT]",e),this}setupClickLabel(e){return this._value=this._value.replace("[CLICKLABEL]",e),this}setupBannerClickEng(e){return this._value=this._value.replace("eng=",`eng=${e}`),this}assignKeyValue(e,t){const n=new RegExp(`(\\?|\\&)${e}=([^&?]+|)`,"g");return this._value=this._value.replace(n,`$1${e}=${encodeURIComponent(t)}`),this}clearMarco(){return this._value=this._value.replace(/(\[\w+])/g,""),this}get value(){return this._value}}class Ji{constructor(e){this._trackUrl=e.trackUrl,this._errorReportingUrl=e.trackUrl,this._dataCenter=e}addCommonDataAndSendEvent(e,t){null!==this.pageHeightInformation&&void 0!==this.pageHeightInformation||(this.pageHeightInformation=fr.pageHeightInformation(this._dataCenter));const n=Math.round(this._dataCenter.currentTime).toString();let i;i=this._dataCenter.isEventImpSend?hi(this.pageHeightInformation.pageHeight):0;let r=this.checkAndGetUrlForAsync(e,{eventType:t,vs:n,ppx:i,spp:hi(this.pageHeightInformation.positionPercentage)});return this._dataCenter.exclude&&this._dataCenter.exclude>0&&(r+="&exclude="+this._dataCenter.exclude),fr.sendHttpRequestToServer(r),r}checkAndGetUrlForAsync(e,t){return e.setupEventName(t.eventType).assignKeyValue("vs",t.vs).assignKeyValue("ppx",t.ppx.toString()).assignKeyValue("spp",t.spp.toString()).clearMarco().value}sendTrackingEvent(e,t){const n=new Zi(this._trackUrl);if(this._trackUrl&&-1!==this._trackUrl.indexOf("//")){switch(e){case Hi.events.BANNER_CLICK:"string"==typeof t&&this.addCommonDataAndSendEvent(n,e),void 0!==t.eng&&n.setupBannerClickEng(t.eng),void 0!==t.clickLabel&&n.setupClickLabel(`${this._dataCenter.pid}_${t.bannerInfo}_${t.bannerIndex}_${t.clickLabel}`);break;case Hi.events.ENGAGEMENT:void 0!==t.buttonIndex?n.assignKeyValue("eng",t.buttonIndex):void 0!==t.engName?n.assignKeyValue("eng",t.engName):n.assignKeyValue("eng",JSON.stringify(t).replace(/"/g,""))}return this.addCommonDataAndSendEvent(n,e),n}}sendErrorReporting(e,t){if(e.errorCode&&e.errorDesc&&e.errorMsg&&this._errorReportingUrl&&-1!==this._errorReportingUrl.indexOf("//"))try{let n=this._errorReportingUrl.replace(Wi,"error").replace(Gi,e.errorCode).replace(Qi,encodeURIComponent(e.errorMsg));return t&&(e.errorDesc.extraDesc=t),n=n.replace(Xi,encodeURIComponent(JSON.stringify(e.errorDesc))),fr.sendHttpRequestToServer(n),n}catch(e){return}}sendThirdPartyTracking(e){const t=[];if(void 0!==e&&e.length>0){const n=String(+new Date);for(const i of e){let e=i;(null==e?void 0:e.indexOf("//"))>-1&&(e=e.replace("[timestamp]",n),fr.sendHttpRequestToServer(e),t.push(e))}}return t}}class $i{constructor(e){this._minimizeAds=[],this._hasIrPlus=!1,this._envInfo=pi.getInstance(),this._accessibleHighestWin=this._envInfo.scopeInfo.accessibleHighestWin}static getInstance(){const e=pi.getInstance().scopeInfo.accessibleHighestWin;return e.ONEAD_PlayerCenter||(e.ONEAD_PlayerCenter=new $i(new ui)),e.ONEAD_PlayerCenter}checkHasIrPlus(e,i){i!==t.IR||e!==n.IS_FOLLOW_DF&&e!==n.IS_FOLLOW_INSYNC||(this._hasIrPlus=!0)}get hasIrPlus(){return this._hasIrPlus}checkNeedToMinimizeAds(e){e.dataCenter.playerType.indexOf("FOLLOW")>-1&&(this._minimizeAds||(this._minimizeAds=[]),this._minimizeAds.push(e))}setCurrentMiniLayout(){if(this.currentMiniLayout){const e=this.filterCanUseLayoutArr();e&&(this.checkNeedToChangeMinimizeLayout(this.currentMiniLayout,e)&&(this.currentMiniLayout.isMinimize=!1,this.currentMiniLayout.resetMinimizeLayout(),e.isMinimize=!e.isAdVisible(),e.resetMinimizeLayout(),this.currentMiniLayout=e),this.currentMiniLayout.isExpand||(this.currentMiniLayout.isAdVisible()?this.currentMiniLayout.isMinimize=!1:e.adOffsetTop===this.currentMiniLayout.adOffsetTop||e.isAdVisible()?this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible():(this.currentMiniLayout.isMinimize=!1,this.currentMiniLayout.isCloseFollow=!0,e.beenSeen&&(this.currentMiniLayout=e,this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible()))))}else this.currentMiniLayout=this.filterCanUseLayoutArr(),this.currentMiniLayout.isMinimize=!this.currentMiniLayout.isAdVisible()}filterCanUseLayoutArr(){this._minimizeAds.sort(((e,t)=>e.dataCenter.desktopLayout.adOffsetTop-this._currentPosition>t.dataCenter.desktopLayout.adOffsetTop-this._currentPosition?1:-1)),this._currentPosition=this._accessibleHighestWin.document.body.scrollTop;let e=this._minimizeAds.filter((e=>e.dataCenter.desktopLayout.adOffsetTop<=this._currentPosition)).filter((e=>!e.dataCenter.desktopLayout.isCloseFollow)).filter((e=>!this.hasIrPlus||e.dataCenter.playMode===t.IR));return 0===e.length?(e=this._minimizeAds.filter((e=>e.dataCenter.desktopLayout.adOffsetTop>this._currentPosition)).filter((e=>!e.dataCenter.desktopLayout.isCloseFollow)).filter((e=>!this.hasIrPlus||e.dataCenter.playMode===t.IR)),e.length>0?e[0].dataCenter.desktopLayout:void 0):e[e.length-1].dataCenter.desktopLayout}checkNeedToChangeMinimizeLayout(e,t){return e.adOffsetTop>t.adOffsetTop}}var er;!function(e){e.HIDE_TIPS="hideTips",e.LANDSCAPE="landscape",e.ONLY_VIDEO="onlyVideo",e.ONLY_BANNER="onlybanner",e.MOAT_VIDEO="moatUseVideo",e.CROSS_BANNER="crossbanner",e.MOAT_DISPLAY="moatUseDisplay",e.CLOSE_AREA_SET="closeAreaSet",e.HIDE_FLASH_CLOSE_BTN="hideFlashCloseBtn",e.IAB_IMPRESSION="useIabImpression",e.USE_FIRST_BANNER="useFirstBanner",e.HIDE_REPLAY_MORE="hideReplayMore",e.USE_GALLERY_LITE="useGalleryLite",e.HIDE_PLAY_BUTTON="hidePlayButton",e.STOP_IN_LOOP_LAST="stopInLoopLast",e.HIDE_VOLUME_BUTTON="hideVolumeButton",e.OPEN_URL_WITH_ASSIGN="openUrlWithAssign",e.PAGE_CLICK_IN_SIGHT_ONLY="pageClickInSightOnly",e.USE_OLD_STYLE_PLAY_BUTTON="useOldStylePlayButton",e.LISTEN_CLICK_ON_BANNER_IFRAME="listenClickOnBannerIframe",e.SHOW_TEMP_INFO="showTempInfo",e.SHOW_TODAYTEMP_INFO="showTodayTempInfo",e.SHOW_HUMI_INFO="showHumiInfo",e.SHOW_AQI_INFO="showAqiInfo",e.SHOW_UVI_INFO="showUviInfo",e.NEW_UI="newUI",e.DOCUMENT_CLICK="documentClick",e.ADD_BANNER_CLICK_AREA="addBannerClickArea",e.USE_CPC_HEIGHT="useCpcHeight"}(er||(er={}));class tr{setKeyword(e,t,n){const i=Object.keys(e),r=t.match(/(\w+\(.+?\))|(\w+)/g);if(r)for(const t of r)if(i.indexOf(t)>-1)e[t]=!0;else{const e=t.split("(");if(e[1]){const t=JSON.parse(e[1].split(")")[0]);"setUiPos"===e[0]?(n._funcParamMapForKeyWord[e[0]]||(n._funcParamMapForKeyWord[e[0]]=[]),n._funcParamMapForKeyWord[e[0]].push(t)):n._funcParamMapForKeyWord[e[0]]=t}}return e}}var nr,ir,rr=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};class sr{constructor(e){this.hasMraid=!1,this.hasVideo=!1,this.appearOpening=!1,this.isVpaid=!1,this.isJson=!1,this.isIR_DF=!1,this.isDesktop=!1,this._adTotalTime=0,this.trackingCodes=[],this._jsonSource={},this.adDisplayTimeParam={slope:1,adjust:0},this._volume=0,this._isEventImpSend=!1,this._isStoryUserClick=!1,this._isSafeFramePreview=!1,this.autoReplay=!1,this._adIsExposed=!1,this._adIsVisible=!1,this.keywords={},this.oneadVastTest=!1,this._videoSource={src:[],poster:"",click_link:"",cid:"",video_type:"",duration:0},this._emojiParam={title:"",icon:"",animate:""},this._eventCenter=e,this._envInfo=pi.getInstance(),this._playerCenter=$i.getInstance(),this._initData(),this._addListeners()}_initData(){this._materialHasTrackingEvent=!1,this.gotBannerClickTriggeredFromMaterial=!1,this._funcParamMapForKeyWord={}}_addListeners(){this._eventCenter.subscribe(Hi.materialEvent.NEED_SYNC_BEFORE_CLOSE,(()=>{this._materialHasTrackingEvent=!0,this._eventCenter.subscribe(Hi.materialEvent.SEND_BANNER_CLICK_TO_WARROOM,(()=>{this.gotBannerClickTriggeredFromMaterial=!0}),1)}))}initDataByExternalParam(e){var r,s,Be;return rr(this,void 0,void 0,(function*(){this.oneadVastTest=window.ONEAD?window.ONEAD.VastTest:e.VastTest,this.pid=e.pid,this.uid=e.uid,this._ctid=e.ct_id,this._pmId=e.pm_id,this._advId=e.adv_id,this._campId=e.camp_id,this._exclude=e.exclude,this._oneadObj=e.oneadObj,this.isipIndex=e.isip_index,this._isSafeFrame=e.isSafeFrame,this.isVast="true"===e.is_vast,this.isJson=void 0!==e.l_json,this.appearOpening=e.appearOpening,this._isRon=e.ct_id===i.RON,this.trackUrl=this.oneadVastTest?e.tracking:e.trackUrl,this.engCountUrl=void 0!==e.l_json?e.l_json.eng:"",this._hasSfGeomApi=null===(s=null===(r=window.$sf)||void 0===r?void 0:r.ext)||void 0===s?void 0:s.geom(),this.reporting=new Ji(this),this.isDesktop=function(e){switch(e){case t.IN_STREAM:case t.IR:case t.DPF:return!0;default:return!1}}(e.play_mode),this._adFormat=function(e,i){switch(e){case t.IN_STREAM:return function(e){switch(e){case n.IS_DF:return Se;case n.IS_INSYNC:return Re;case n.IS_FOLLOW_DF:return we;case n.IS_FOLLOW_INSYNC:return xe;default:return null}}(i);case t.IR:return function(e){switch(e){case n.IS_DF:return De;case n.IS_FOLLOW_DF:return be;default:return null}}(i);case t.MIR:return function(e){switch(e){case n.INSTANT:return h;case n.TRANSFORMER:return o;case n.TRANSFORMER_STICKY:return l;case n.TRANSFORMER_SWAP:return d;case n.TRANSFORMER_SOCIAL:return c;case n.SCRATCH:return u;case n.SCRATCH_BNB:return p;case n.PAGE:return v;case n.PAGE_V2:return O;case n.PAGE_BANNER:return S;case n.PAGE_BANNER_V2:return w;case n.PAGE_LINKTREE:return f;case n.POSTER:return R;case n.SCROLLER:return m;case n.SCROLLER_V2:return E;case n.VERTICAL_VIDEOBANNER:return L;case n.VERTICAL_SHOW:return C;case n.SHOW:return k;case n.SCROLLER_VERTICAL:return T;case n.MOBILE:return M;case n.VERTICAL:return g;case n.VERTICAL_V2:return I;case n.VERTICAL_BANNER:return N;case n.VERTICAL_BANNER_V2:return _;case n.SKIRT:return y;case n.STATIC:return x;case n.LANDSCAPE_ENGAGEMENT:return B;case n.FRAME_ENGAGEMENT:return F;case n.BNB:return A;case n.STORY:return J;case n.TRANSFORMER_GALLERY:return a;case n.TAG:return U;case n.FLASH:return D;case n.H5_320X480:return b;case n.H5_320X480_BANNER:return P;case n.H5_320X480_VIDEO_BANNER:return j;default:return null}}(i);case t.MIC:return function(e){switch(e){case n.BOTTOM:return $;case n.BOTTOM_CLASSIC:return ie;case n.BOTTOM_CUBE:return ee;case n.BOTTOM_PEEK:return te;case n.BOTTOM_PEEK_BANNER:return ne;case n.BOTTOM_BANNER_640X273:return ve;case n.BOTTOM_CUBE_BANNER_640X273:return Oe;case n.BOTTOM_FLASH_V2:return re;case n.BOTTOM_FLASH_V2_BANNER_640X273:return fe;case n.BOTTOM_FLASH_BANNER:return Ce;case n.BOTTOM_GALLERY:return _e;case n.BOTTOM_GALLERY_BANNER:return Le;case n.BOTTOM_GALLERY_WEBGL:return Me;case n.BOTTOM_INSTANT:return Ne;case n.BOTTOM_HIT:return Ee;case n.BOTTOM_HIT_NF:return Te;case n.BOTTOM_GALLERY_ZOOM:return Ae;case n.BOTTOM_HIT_VIDEO:return ge;case n.BOTTOM_HIT_VIDEO_NF:return Ie;case n.BOTTOM_FLASH_VIDEO:return se;case n.BOTTOM_REEL:return oe;case n.BOTTOM_REELS_V2:return ae;case n.BOTTOM_STAR:return le;case n.BOTTOM_STAR_VIDEO:return de;case n.BOTTOM_LOCATION:return ce;case n.BOTTOM_LOCATION_GALLERY:return ue;case n.BOTTOM_LOCATION_VIDEO:return pe;case n.BOTTOM_LOCATION_DOOR_VIDEO:return he;case n.BOTTOM_FLASH_LOCATION:return ye;case n.BOTTOM_FLASH_LOCATION_V2:return me;default:return null}}(i);case t.DPR:return Pe;case t.MPR:return je;case t.APR:return ke;case t.DSP:return Ue;case t.MFS:return function(e){switch(e){case n.FULLSCREEN_COVER:return H;case n.FULLSCREEN_COVER_BANNER:return V;case n.FULLSCREEN_COVER_VIDEO:return z;case n.FULLSCREEN_COVER_STORY:return W;case n.FULLSCREEN_COVER_PLAY:return Y;case n.FULLSCREEN_COVER_SCRATCH:return G;case n.FULLSCREEN_COVER_POSTER:return Q;case n.FULLSCREEN_COVER_POSTER_VIDEO:return X;case n.FULLSCREEN_FLASH_DRIVE_320:return K;case n.FULLSCREEN_FLASH_DRIVE_300:return q;default:return null}}(i);case t.MS:return function(e){switch(e){case n.BRAND_LIFT:case n.BRAND_LIFT2:case n.BRAND_LIFT3:return Z;default:return null}}(i);default:return null}}(e.play_mode,e.player_type),this.returnControlToPublish=e.returnControlToPublish,this._videoEndWrapperDisplayType=function(e,t){let n;n=e?Ve.BOTH:Ve.NONE;return n}(this.isDesktop,this.isVast),sr.oid=e.oid,sr.isSafeFrame=e.isSafeFrame,sr.dataCenterArr_[e.isip_index]=this,yi.isip_index=this.isipIndex,e.clientSetupParam&&(this._slotId=e.clientSetupParam.slotId,this._dfpConfig=e.clientSetupParam.dfpConfig,this._acc=e.clientSetupParam.acc),this._slotElement=(null===(Be=null==e?void 0:e.clientSetupParam)||void 0===Be?void 0:Be.slotElement)?e.clientSetupParam.slotElement:this._getSlotElement(e.play_mode),this._isSafeFramePreview=e.clientSetupParam?void 0!==e.clientSetupParam.noExternal:this.isSafeFramePreview,this._setupLocationHref(e.clientSetupParam),this._playerCenter.checkHasIrPlus(e.player_type,e.play_mode)}))}setKeyWordsStytem(){let e="";e=this.lXml?function(e,t,n){let i;if(e.querySelector(t)){const i=e.querySelector(t);return n?fr.isValid(i.getAttribute(n)).value:fr.isValid(i.textContent).value}return i}(this.lXml,"body")||"":this.lJson.xml.linkXml.body||"",this.keywords={[er.HIDE_TIPS]:!1,[er.LANDSCAPE]:!1,[er.ONLY_VIDEO]:!1,[er.ONLY_BANNER]:!1,[er.HIDE_FLASH_CLOSE_BTN]:!1,[er.CLOSE_AREA_SET]:!1,[er.IAB_IMPRESSION]:!1,[er.USE_GALLERY_LITE]:!1,[er.HIDE_PLAY_BUTTON]:!1,[er.HIDE_REPLAY_MORE]:!1,[er.STOP_IN_LOOP_LAST]:!1,[er.HIDE_VOLUME_BUTTON]:!1,[er.OPEN_URL_WITH_ASSIGN]:!1,[er.PAGE_CLICK_IN_SIGHT_ONLY]:!1,[er.USE_OLD_STYLE_PLAY_BUTTON]:!1,[er.LISTEN_CLICK_ON_BANNER_IFRAME]:!1,[er.SHOW_TEMP_INFO]:!1,[er.SHOW_TODAYTEMP_INFO]:!1,[er.SHOW_HUMI_INFO]:!1,[er.SHOW_AQI_INFO]:!1,[er.SHOW_UVI_INFO]:!1,[er.NEW_UI]:!1,[er.DOCUMENT_CLICK]:!1,[er.USE_CPC_HEIGHT]:!1};const t=new tr;this.keywords=t.setKeyword(this.keywords,e,this)}vastSetupData(e){return rr(this,void 0,void 0,(function*(){const n=e.vast_list[0].vast_url;if(this.vastAdInfo=yield function(e){return Ms(this,void 0,void 0,(function*(){return(new Cs).get(e).then((e=>{if(0===e.ads.length)throw new Error("vast ad is empty");return e.ads[0]})).catch((e=>{var t;const n=window._ONEAD;return(null===(t=null==n?void 0:n.pub)||void 0===t?void 0:t.queryAdCallback)&&n.pub.queryAdCallback({param:null}),{errorMessage:e.toString()}}))}))}(n),this.vastAdInfo.errorMessage)return;let i=this.vastAdInfo.creatives,r={},s={linkXml:{tracking_code:void 0}};if(this.vastAdInfo.creatives.isVpaid){const e=this.vastAdInfo.creatives.vpaidParam,t=JSON.parse(e);r=t.xml,s=t.xml,i=this.vastAdInfo.creatives}else{for(const e of this.vastAdInfo.creatives.video)if("linear"===e.type){r={linkXml:{defaultURL:void 0,clickURL:e.videoClickThroughURLTemplate?e.videoClickThroughURLTemplate.url:""},videos:{video:{videoURL_mp4:{content:"","-format":e.mediaFiles[0].mimeType},videoURL_mp4_1200k:"",duration:e.duration}}};for(const e of this.vastAdInfo.creatives.video[0].mediaFiles)1200===e.bitrate?r.videos.video.videoURL_mp4_1200k=e.fileURL:r.videos.video.videoURL_mp4.content=e.fileURL}const e=this.vastAdInfo.impressionURLTemplates;if(0===e.length)s.linkXml.tracking_code="";else{s.linkXml.tracking_code={code:[]};for(const t of e){const e={"#content":t.url,event_type:"impression","-format":"pixel"};s.linkXml.tracking_code.code.push(e)}}}e.l_json&&this._setupShowIdentity(e.l_json.xml),this._setupBannerData(i),this.playMode!==t.MS&&this._setupImpPixelCodes(s),this._setupVideoSource(r)}))}static getInstanceByIsipIndex(e){return sr.dataCenterArr_[e]}dataSetup(e){var i;return rr(this,void 0,void 0,(function*(){if(this.guid=e.guid,this.lJson=e.l_json,this._playMode=e.play_mode,this._playerType=e.player_type,this.isipIndex=e.isipIndex||e.isip_index,this.isIR_DF=e.play_mode===t.IR,this.fp=e.oneadObj?e.oneadObj.fp:"",this.enc=e.oneadObj?e.oneadObj.enc:(null===(i=window._ONEAD.pub)||void 0===i?void 0:i.enc)||"",this._isDF=this._playerType.indexOf("DF")>-1,this.oneadVastTest||!this.lJson||this.isVast)if(this.oneadVastTest||this.isVast){if(yield this.vastSetupData(e),this.vastAdInfo.errorMessage)return}else yield this.xmlSetupData(e);else{const i=e.l_json.xml;this.playerType!==n.FULLSCREEN_FLASH_DRIVE_320&&this.playerType!==n.FULLSCREEN_FLASH_DRIVE_300||this.setupTextData(i),this._setupBannerData(i),this._setupShowIdentity(i),this._setupVideoSource(i),this.playMode!==t.MS&&this._setupImpPixelCodes(i)}this.autoReplay=this.hasVideo,this.setKeyWordsStytem(),this.isDesktop&&(this.adWrapper=this.slotElement.firstChild,this._videoSize=function(e){const{_isDF:t,isLandscape:n,isOnlyBanner:i}=e,o={width:0,height:0};return o.width=t||!n&&!i?r:s,o}({_isDF:this._isDF,isLandscape:this.isLandscape,isOnlyBanner:this.isOnlyBanner}),this._playerCenter.checkNeedToMinimizeAds(this._eventCenter))}))}xmlSetupData(e){return rr(this,void 0,void 0,(function*(){yield fetch(e.l_url).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>{this.lXml=e;const i=e.querySelectorAll("companions")[0].children,r={companions:void 0};if(i.length>0){r.companions={companion:1===i.length?{}:[]};for(const e of i){const t={cid:e.querySelector("cid").textContent,imgURL:e.querySelector("imgURL").textContent,linkURLs:{linkURL:[]}},n=e.querySelector("linkURLs").children;for(const e of n){const n={"#content":e.textContent};t.linkURLs.linkURL.push(n)}"number"==typeof r.companions.companion.length?r.companions.companion.push(t):r.companions.companion=t}}const s=e.querySelector("videoURL_mp4");let o={};s&&(o={linkXml:{defaultURL:e.querySelector("defaultURL").textContent,clickURL:e.querySelector("clickURL").textContent},videos:{video:{videoURL_mp4:{content:e.querySelector("videoURL_mp4_800k").textContent,"-format":s.getAttribute("format")||"video"},videoURL_mp4_1200k:e.querySelector("videoURL_mp4_1200k").textContent,duration:e.querySelector("duration").textContent}}});const a=e.querySelectorAll("tracking_code code"),l={linkXml:{tracking_code:void 0}};if(0===a.length)l.linkXml.tracking_code="";else{l.linkXml.tracking_code={code:[]};for(const e of a){const t={"#content":e.textContent,event_type:e.getAttribute("event_type"),"-format":e.getAttribute("format")};l.linkXml.tracking_code.code.push(t)}}const d={linkXml:{show_identity:e.querySelectorAll("show_identity")[0].textContent}};this.playerType!==n.FULLSCREEN_FLASH_DRIVE_320&&this.playerType!==n.FULLSCREEN_FLASH_DRIVE_300||this.setupTextData(e),this._setupBannerData(r),this._setupVideoSource(o),this.playMode!==t.MS&&this._setupImpPixelCodes(l),this._setupShowIdentity(d)}))}))}setupTextData(e){const t={content:[]},n=[];if(this.isJson){if(e.text_contents.text_content.length)for(const t of e.text_contents.text_content)n.push(t);else{const t=e.text_contents.text_content;n.push(t)}t.content=n}else{for(let t=0;t<e.querySelectorAll("content").length;t++){const i={content:e.querySelectorAll("content")[t].textContent,countDown:{dueDayTime:"0",unit:""},linkURL:e.querySelectorAll("linkURL")[t].textContent,tid:e.querySelectorAll("tid")[t].textContent,title:e.querySelectorAll("title")[t].textContent};n.push(i)}t.content=n}this.textData=t}_setupBannerData(e){let t;if(!this.bannerDataInXml){let n,i,r,s,o,a;if(this.bannerDataInXml=[],this.isVast)for(const t of e.banner){const e=t.variations;for(const t of e){if(t.htmlResources[0]||t.iframeResources[0]||t.staticResources[0]){let e=(t.htmlResources[0]||t.iframeResources[0]||t.staticResources[0]).url;e=As(e,this.isipIndex,this.uid,this.pid);const n=t.companionClickThroughURLTemplate,i=[];for(const e of this.vastAdInfo.creatives.banner[0].variations[0].companionClickThroughURLTemplates)i.push(e);this.bannerDataInXml=this.bannerDataInXml||[],this.bannerDataInXml.push({cid:"-1",sourceUrl:e,isHtml:e.indexOf(".html")>-1,hasLink:"string"!=typeof n,width:t.width,height:t.height,linkUrls:i})}}}else if(t=e,n=t.companions,n){if(1===(void 0!==t.companions.companion[1]?Object.keys(t.companions.companion).length:1)){if(i=t.companions.companion.cid,s=[],t.companions.companion.linkURL)s.push(t.companions.companion.linkURL);else if(void 0===t.companions.companion.linkURLs.linkURL.length)s.push(t.companions.companion.linkURLs.linkURL["#content"]);else for(const e of t.companions.companion.linkURLs.linkURL)s.push(e["#content"]);r=t.companions.companion.imgURL,r.indexOf(".zip")>-1||r.indexOf(".html")>-1?(r=As(r,this.isipIndex,this.uid,this.pid),o=!0):(r=`${r}?uid=${this.uid}&pid=${this.pid}`,o=!1),a=!!fr.checkUrlIsAvaliable(s),this.bannerDataInXml.push({cid:i,sourceUrl:r,linkUrls:s,isHtml:o,hasLink:a,width:void 0,height:void 0})}else for(const e of t.companions.companion){if(i=e.cid,r=e.imgURL,s=[],void 0===e.linkURLs.linkURL.length)s.push(e.linkURLs.linkURL["#content"]);else for(const t of e.linkURLs.linkURL)s.push(t["#content"]);r.indexOf(".zip")>-1||r.indexOf(".html")>-1?(r=As(r,this.isipIndex,this.uid,this.pid),o=!0):(r=`${r}?uid=${this.uid}&pid=${this.pid}`,o=!1),a=!!fr.checkUrlIsAvaliable(s[0]),this.bannerDataInXml.push({cid:i,sourceUrl:r,linkUrls:s,isHtml:o,hasLink:a,width:void 0,height:void 0})}}}}setTaskCenter(e){this._taskCenter=e}getBannerDataByIndex(e){return e>=0?this.bannerDataInXml[e]:null}_setupShowIdentity(e){const t=e.linkXml.show_identity;this.identity="true"===t}_setupImpPixelCodes(e){let t;if(t=""===e.linkXml.tracking_code?[]:void 0!==e.linkXml.tracking_code.code.length?e.linkXml.tracking_code.code:[e.linkXml.tracking_code.code],t.length>0)for(const e of t)e["#content"].indexOf("http")>-1&&this.trackingCodes.push(e["#content"])}computeAdDisplayTime(){return new Promise(((e,t)=>{sr.adDisplayTime?e(sr.adDisplayTime):this._eventCenter.subscribe(Hi.events.CREATE_VIEW,(()=>{const n=performance.now(),i=.55*n/1e4,r=this.lXml.querySelector("body")?this.lXml.querySelector("body").textContent:"";""!==r&&(r.indexOf("display_s")>-1&&(this.adDisplayTimeParam.slope=parseFloat(r.split("display_s=")[1].split(",")[0])),r.indexOf("display_a")>-1&&(this.adDisplayTimeParam.adjust=1e3*parseFloat(r.split("display_a=")[1].split(",")[0]))),sr.adDisplayTime=n*i*this.adDisplayTimeParam.slope+this.adDisplayTimeParam.adjust,sr.adDisplayTime<1e3&&(sr.adDisplayTime=1e3),"number"==typeof sr.adDisplayTime?e(sr.adDisplayTime):t(new Error("[Error] Compute display time error."))}))}))}_setupVideoSource(e){try{if(e.videos){const t=e.linkXml,n=e.videos,i=t.defaultURL,r=t.clickURL,s=n?n.video.duration:0,o=[],a=n.video.videoURL_mp4_1200k,l=n.video.videoURL_mp4["#content"],d="video"===n.video.videoURL_mp4["-format"]?"video":"html";a&&o.push(a),o.push(l),this._videoSource={src:o,poster:i,click_link:r,cid:"-1",video_type:d,duration:s}}this.hasVideo=this.videoSource.src.length>0,this._adTotalTime=this._videoSource.duration}catch(e){}}getJsonSource(){return new Promise(((e,t)=>{this._jsonSource.files_index?e(this._jsonSource):(this._jsonSource.videoSrc=this.videoSource.src[0],this._jsonSource.videoSrc?fr.getJSON(this._jsonSource.videoSrc.replace("mp4","json")).then((t=>{for(const e in t)this._jsonSource[e]=t[e];e(this._jsonSource)})).catch((e=>t(e))):t(new Error("no mp4")))}))}vpaidSetupDataFromJson(e){switch(this._vpaidParam=e,this.guid=e.linkXml.guid,this.uid=+e.linkXml.UID,this.pid=+e.linkXml.PID,this._pmId=+e.linkXml.PmID,this._advId=+e.linkXml.AdvID,this._campId=+e.linkXml.CampID,this._playMode=e.linkXml.playerMode,this._playerType=e.linkXml.playerType,this.duration=+e.videos.video.duration,this._adTotalTime=this.duration,this._playMode){case t.MPR:this._adFormat=je;break;case t.DPR:this._adFormat=Pe;break;case t.APR:this._adFormat=ke}const n=this._vpaidParam.linkXml.body;n.indexOf("showTempInfo")>-1&&(this._showTempInfo=!0),n.indexOf("showTodayTempInfo")>-1&&(this._showTodayTempInfo=!0),n.indexOf("showHumiInfo")>-1&&(this._showHumiInfo=!0),n.indexOf("showAqiInfo")>-1&&(this._showAqiInfo=!0),n.indexOf("showUviInfo")>-1&&(this._showUviInfo=!0),"string"!=typeof e.linkXml.emojis&&(this._emojiParam.title=e.linkXml.emojis.emoji.name,this._emojiParam.icon=e.linkXml.emojis.emoji.button,this._emojiParam.animate=e.linkXml.emojis.emoji.animate)}_setupLocationHref(e){(null==e?void 0:e.locationHref)?this._locationHref=e.locationHref:this._locationHref=this._envInfo.scopeInfo.accessibleHighestWin.location.href}_getSlotElement(e){var t;const n=this._envInfo.scopeInfo.accessibleHighestWin,i=(null===(t=this.oneadObj)||void 0===t?void 0:t.slot_id[e])||this._slotId||"div-onead-ad";return n.document.getElementById(i)||document.getElementById(i)}_setProp(e,t){this[e]=t}_getProp(e){return this[e]}set params(e){this._params=e}get params(){return this._params}get materialHasTrackingEvent(){return this._materialHasTrackingEvent}get playerType(){return this._playerType}get playMode(){return this._playMode}get adTotalTime(){return this._adTotalTime}get videoSource(){return this._videoSource}get envInfo(){return this._envInfo}get adFormat(){return this._adFormat}get bannerSizeErrorRule(){return this.keywords[er.USE_FIRST_BANNER]}get taskCenter(){return this._taskCenter}get isOnlyBanner(){return this.keywords[er.ONLY_BANNER]||0===this.videoSource.src.length}get isCrossBanner(){return this.keywords[er.CROSS_BANNER]}get isOnlyVideo(){return this.keywords[er.ONLY_VIDEO]}get currentTime(){return this._currentTime=this._taskCenter._timeEventHandler._currentTime,this._currentTime<0&&(this._currentTime=0),this._currentTime}get videoEndWrapperDisplayType(){return this._videoEndWrapperDisplayType}get displayVideoEndWrapper(){return this._videoEndWrapperDisplayType>0}get useOldStylePlayButton(){return this.keywords[er.USE_OLD_STYLE_PLAY_BUTTON]}get advId(){return this._advId}get campId(){return this._campId}get pmId(){return this._pmId}get isDF(){return this._isDF}get isLandscape(){return this.keywords[er.LANDSCAPE]}get videoSize(){return this._videoSize}get libCustomSetting(){let e;try{e=this._envInfo.scopeInfo.accessibleHighestWin.ONEADs[this.isipIndex].customSetting}catch(t){e=void 0}return e}get slotElement(){return this._slotElement}get isRon(){return this._isRon}get isHideVolumeButton(){return this.keywords[er.HIDE_VOLUME_BUTTON]}get isHidePlayButton(){return this.keywords[er.HIDE_PLAY_BUTTON]}get _isipIndex(){return this.isipIndex}get dfpConfig(){return this._dfpConfig}get oneadObj(){return this._oneadObj}get isSafeFrame(){return this._isSafeFrame}get hasSfGeomApi(){return this._hasSfGeomApi}get acc(){return this._acc||""}get locationHref(){return this._locationHref}get isHideReplayMore(){return this.keywords[er.HIDE_REPLAY_MORE]}get volume(){return this.isOnlyBanner?0:this._volume}set volume(e){this._volume=e}get isIabImpression(){return this.keywords[er.IAB_IMPRESSION]}get isBigCloseArea(){return this.keywords[er.CLOSE_AREA_SET]}get isNewUI(){return this.keywords[er.NEW_UI]}get isDocumentClick(){return this.keywords[er.DOCUMENT_CLICK]}set isStoryUserClick(e){this._isStoryUserClick=e}get isStoryUserClick(){return this._isStoryUserClick}set isEventImpSend(e){this._isEventImpSend=e}get isEventImpSend(){return this._isEventImpSend}get useNativePlayer(){return this.playMode!==t.DSP}get hideFlashCloseBtn(){return this.keywords[er.HIDE_FLASH_CLOSE_BTN]}get cubeChatbotId(){return this._cubeChatbotId}get isVpaidParam(){return void 0!==this._vpaidParam}get funcParamMapForKeyWord(){return this._funcParamMapForKeyWord}get campaignTypeID(){return this._ctid}get isUseAssign(){return this.keywords[er.OPEN_URL_WITH_ASSIGN]}get isListenClickOnBannerIframe(){return this.keywords[er.LISTEN_CLICK_ON_BANNER_IFRAME]}get exclude(){return this._exclude}get hasBanner(){return this.bannerDataInXml.length>0}get isSafeFramePreview(){return this._isSafeFramePreview}get vpaidParam(){return this._vpaidParam}get emojiParam(){return this._emojiParam}get engCounts(){return this._engCounts}set engCounts(e){this._engCounts=e}get adIsExposed(){return this._adIsExposed}set adIsExposed(e){this._adIsExposed=e}get adIsVisible(){return this._adIsVisible}set adIsVisible(e){this._adIsVisible=e}get hideTips(){return this.keywords[er.HIDE_TIPS]}get stopInLoopLast(){return this.keywords[er.STOP_IN_LOOP_LAST]}get videoSourceObj(){return this._videoSource}get _useGalleryLite(){return this.keywords[er.USE_GALLERY_LITE]}get pageClickInSightOnly(){return this.keywords[er.PAGE_CLICK_IN_SIGHT_ONLY]}get showTempInfo(){return this.keywords[er.SHOW_TEMP_INFO]||this._showTempInfo}get showTodayTempInfo(){return this.keywords[er.SHOW_TODAYTEMP_INFO]||this._showTodayTempInfo}get showHumiInfo(){return this.keywords[er.SHOW_HUMI_INFO]||this._showHumiInfo}get showAqiInfo(){return this.keywords[er.SHOW_AQI_INFO]||this._showAqiInfo}get showUviInfo(){return this.keywords[er.SHOW_UVI_INFO]||this._showUviInfo}get useCpcHeight(){return this.keywords[er.USE_CPC_HEIGHT]}}sr.dataCenterArr_=[],sr.isSafeFrame=!1;class or{constructor(){this.ready=!1,this.data={},this.on_complete=function(){}}complete(e){this.ready=!0,this.data=e,this.on_complete()}then(e){this.on_complete=e}}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(nr||(nr={}));class ar{get status(){return this._status}get value(){return this._value}get id(){return this._id}constructor(e){if(ar._promiseArr.push(this),this._id=ar._promiseArr.length,this._status=nr.PENDING,this._value=void 0,this._onFulfilledActions=[],this._onFailedActions=[],this._resolve=this._resolve.bind(this),this._reject=this._reject.bind(this),e)try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}_resolve(e){this._status===nr.PENDING&&(this._status=nr.RESOLVED,this._value=e,this._onFulfilledActions.forEach((e=>{e(this._value)})))}_reject(e){this._status===nr.PENDING&&(this._status=nr.REJECTED,this._value=e,this._onFailedActions.forEach((e=>{e(this._value)})))}then(e,t){const n=new ar,i=t=>{try{let i;i=e?e(t):t,n._resolve(i)}catch(e){n._reject(e)}};switch(this.status){case nr.PENDING:this._onFulfilledActions.push(i);break;case nr.RESOLVED:i(this.value)}const r=e=>{try{let i;i=t?t(e):e,n._reject(i)}catch(e){n._reject(e)}};switch(this._status){case nr.PENDING:this._onFailedActions.push(r);break;case nr.REJECTED:r(this.value)}return n}catch(e){return this.then(void 0,e)}static all(e){const t=e.length;let n=0;return new ar(((i,r)=>{e.forEach((e=>{e.then((e=>{++n===t&&i()})).catch((e=>{r(e)}))}))}))}}ar._promiseArr=[];class lr{static toParam(e){const t=[];if(void 0===e.length)for(const n in e)if(void 0!==e[n]&&e[n].constructor===Array)for(const i of e[n]){let e=i;isNaN(e)&&(e=encodeURIComponent(i)),t[t.length]=encodeURIComponent(n+"[]")+"="+e}else t[t.length]=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;return t.join("&").replace(/%20/g,"+")}static assign(e,...t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let n=Object(e);for(const e of t){const t=e;if(null!=t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n[e]!==t[e]&&("object"==typeof t[e]?(n[e]=n[e]||{},lr.assign(n[e],t[e])):n[e]=t[e])}return n}}class dr{constructor(e){this._props=dr.setPropertyReadOnly(e),this._state={}}get props(){return this._props}get state(){return this._state}setState(e){let t=this._state;null!=t&&(this._state=lr.assign({},t,e))}static setPropertyReadOnly(e){for(let t in e)Object.defineProperty(e,t,{writable:!1});return e}}!function(e){e.EXPANDED="expanded",e.COLLAPSED="collapsed",e.FAILED="failed",e.GEOM_UPDATE="geom-update",e.FOCUS_CHANGE="focus-change"}(ir||(ir={}));class cr extends dr{static getInstance(){if(!cr._instance)throw new Error("no sf handler");return cr._instance}constructor(e){if(cr._instance)throw new Error("already new");super(e),this._state={isExpanded:!1,isSlotInited:!1,currentWidth:0},this._sf=window.$sf;const t=this.sf.ext.geom();this.sf.ext.register(t.win.w,Math.ceil(t.win.w*e.collapseWidth/e.collapseHeight),((e,t)=>{switch(e){case ir.GEOM_UPDATE:if(!this.state.isSlotInited){let e=this._sf.ext.geom().self.w;this.state.currentWidth!==e&&(this.setState({currentWidth:e,isSlotInited:!0}),this.props.resizeCallback())}break;case ir.EXPANDED:case ir.COLLAPSED:this.props.resizeCallback();case ir.FAILED:}})),cr._instance=this}get sf(){return this._sf}}const ur="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAACZCAYAAABwtpVCAAAACXBIWXMAAAsSAAALEgHS3X78AAAJNklEQVR4nO2dS3baSBRAyzlhbA+ZJb2CeAdNr8DegZ0V2D1h2s6USdsraLKCJiuI2QFeQdszhmbMgD6lvMJlIQkJSlJ97j2Hg33wR4h39er7dLLZbBS4ZzhZf1ZKfW7r1C7Hg0c+NvcgRAHDyfpcKXUmr+QD237NvP6p1wN+zzz3/bM8DLZIi+V48NrDMXpLUkJYV+0zCWzNSJ59C+yuMSIZgbQoC5VYNopOCCvoR1bg6+cvHhxe6MwtUTJxYpMlaCGGk/VIAv5cJPjdg8NKkRcR5FFk0U2x5xDPQzBCyJV/JI9zrvjesxI5tCSPoWQSb4UYTtZnEvyX8pxy+z4W5iLIbDkeLHx8T14JIRJcyuPCg0OC9tDNrJlkj5kv59kLIYaT9TUSJI2R477vvkdvQkif4FYppWU47eUgwEd0s2q6HA+mfRxb50LIpJcW4arTfwyhobPGVLJGZ5OHnQkhGeGeZhE0ZCVS3HVx4loXQjrK92QEOBKdMW7b7oC3KoR0lu/pI4BDdB/juq3OdytCSFaYMXMMLaGbUXfL8eDe9Z93LoQsp5iRFaADfki2cNbp/uDymIeTtR49+okM0BF6gOZRRi6d4CxDDCfrKR1n6AndhBq5WA7iJEMgA/TMqWSKy2MP4+gMgQzgGX8cs7L2qAyBDOAhs2P6FAcLMZys75ABPMQ0nw4q8HBQk0naav8SDeAxT9LRbjQk2zhDiHm9rEQEaMAXWSXRiEOaTFPmGSAQrpqOPDUSQibeWI4BITGVpUS1qC2E/NFOluACOOS0Sdw2yRCsWoVQuak76vSxzg/JH2OI9a20Sp6qiaCFFPdyRb6Upk1RPVmKtP1ialVpLKXWsOtwsp5FtNPtyQrQfN3TfPBGWfs0V7tWFUg2yr0WS8tg7yz2XiFkOfdP10fmEDvA7Te7/ZpK2W7IVTQv+9pngebL8aAyS9QRoq/sYAL91WqmmMB+9bXQFfxCBmHMEgpbGBOQfYlTmSUqhZArwn9tHVmOJ9kzy9U8Iays01Ur5MdyPCidm9gnRJeL9/amM4iX4WTdZT2k38r2ZJcOu1plJQFio3Reomoegop6ECuXZbPX+4QAiJHTstZPoRAyTs1kDsRMfSHIDpAAF0XLOcqEoDMNKbAT5ztCSHOJu/VACuwM8xdlCLIDpMJFfrSpSAgmxyAl3sV7kRDsiIOUKBdCVrYCIETRiwAJ8MXuRyAEwNsy9R0hnJUVBwiIbSLYCiGzdizmK+LhZKQeTqbq4eSg8ojgPYUZgg+7mqtssxRixMj287SFoP9QD8SIj+1CVjLE4SBGRJgS+ghxPIgRB9nQqy0EI0zHgRhhk3UZbCEYYXIDYgRMJoTL25rCFluM2tWnoTfeZQg+sPa4ysplPpzcIYb/IEQ36OboX4jhNe9GmWgydQNi+EvWh3Zy43ZoDGJ4Ck2mfkEMj9D7gWgy+QFieAJNJr9AjJ5BCD9BjJ5ACL9BjG7Z9iGotOE3iNERZIiwQIyWQYgwQYyWQIiwQQzHIEQcIIYjECIuEONIECJOEOMwRggRN4jREIRIA8SoCUKkBWLs4QMl8JMEMUogQ6SNEWOR1a8FhAD1opS6UzebR06FUh+W4wEnIk20CF/VzeazutlMUz8Zho9+HAZ0iMkISFAAQqQDItQAIeIHERqAEPGCCM15Roj4QITDQYiIQAQHIET4IIJDECJcEKEFECI8EKFFjBD6JH+K8h3Gw0opdYsI7WLWMj3H+gYjQIvwLbspJjK0DaNMHqNFuM8eN5vX1E9GRyCEhyBCjxghOPH9gwgeYIRYKKUukj4T/YEI/rCgydQfiOAZy/HglSZT9yCCx9hNJmgXRPCbJ8VMdScgQhhkn00mhN5XPZysUz8hrkGEsMgmp8kQ7kGEMNkRYs6ttY4CEcKGDOEIRIiDHSEeyRCNQIS4yEZabSFY8VoPRIiPlZ6UUwjRCESIl+083FYIhl4rWch+BESIk10hBD1b9yX1s7MDIsTOVoh89W8KH0OKbOM+LwRrmiA1dId6238mQ0DqvIv5d0KIKS+pnyFIinIhBLIEpMTMfq9FQswIB0iEF7v/oIqEWI4HCAGpsBPrZTdd/EFIQALsFH4rE4IsAbGjm0s70wyFQizHg6ms3QGIlcKLftV9qskSEDP3Re+tSojCXwCIgHl+dGmvENK+mvPpQ4SUVlGvyhCq6hcBAuVF+siFnGw2m8q3NZysnzu6mcpKFhe+WosMzaz5wuxognAZTtbnSqmzbG/Jr4dmJM9dbV/+czkelHYH6ghxrZT6p40jO4CVJcuztcvPiJRtdPLkWJNgOFnbwV0U6Gce7bHR8fO56uK6VwjVbZZwySq3nN0WZWHVs30tGo9OkeFkrYP33Hrr5oqucsHuU5A34dtyPLir+vm6QviUJdrmJbe//Llgv/miqEB0X9kpd5W2sQPaMMp9n0qllb3ZQdUVQoWbJXwjn7XqEOrV2De+VnWmDU2E0FeWn/GdJ0gAPbJUlEF32DfsukWaAyz6gxC5rnvMtYUQblnjBIHx0KRv10gIme6+JSIgEPQASeWoUp6mGcKshP1OREAAXDad0G0shHBrbkEE4ClfD5lfqj3KlEcmcXQT6pSIAM/4vhwPanekbQ7NEEpS0YhONnjGwTKoY4RQb0vEkQJ84SgZ1LFCKKQAfzhaBuVCCPUmxTkdbeiJby5kUK6EUG9zFCNms6FDVjKa1GiuoYqDR5mqGE7Welj2byIDWkS3Rq5dL91vRQj1tjtqykpNaIG9+xoOpTUhDJIt7pivAAfoohe3bW7oal0I9TaJp/exXrX+zyBGXkSE1muFdSKEQXZ23SEG1CRbnFdnY48rOhXCIGJcy5oomlKQRzeNpl2KYOhFCIM0pS5FjlT29kIxKymfet9n0YdehbCRrGHkYGQqHfS81ayPbFCEN0LYWHJckjmi40VKAs18vDmPl0LYSLNqZD3IHmGxEgGyh+81sLwXogipADKS9VPnlMfxirmU2lmIAIVVtn0lSCGKEElMwS7zNaK0x9wq4qav/s+hBX8R0QhRhlVgt+iZId9ynqzC0++eYy48Hb0Q+8jVM7VLP+brmsaQbez7fdjlOM3Xyde5TV6IQ7Cyjk2+ZqohX0D4GF4rSmEW1qDlNgINUEr9D6GoqRtsNpTcAAAAAElFTkSuQmCC",pr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwIDE3TDE1IDEyTDEwIDciIHN0cm9rZT0iIzE2ODhGOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==";function hr(e){return e.includes("VERTICAL")||e.includes("SCROLLER")||e.includes(n.POSTER)||e.includes(n.PAGE)||e.includes(n.SHOW)||e.includes(n.TAG)}function yr(e){switch(e){case n.FULLSCREEN_FLASH_DRIVE_320:case n.FULLSCREEN_FLASH_DRIVE_300:return!0;default:return!1}}function mr(e){return e===n.IS_FOLLOW_INSYNC||e===n.IS_FOLLOW_DF}class Er{constructor(e,t,n,i,r,s){this.url=e,this.MIRcustomFunc=t,this.MIBcustomFunc=n,this.MFScustomFunc=i,this.MScustomFunc=r,this.DesktopcustomFunc=s}}function Tr(e){var t,i,r,s,o,a,l,d,c,u,p,h,y,m,E;let T;switch(null===(t=e.layout.slotTag.closest(".position-container"))||void 0===t||t.style.setProperty("transform","unset","important"),null===(i=e.layout.slotTag.closest(".position-container"))||void 0===i||i.style.setProperty("width","100vw","important"),null===(r=e.layout.slotTag.closest(ci.CHINATIMES))||void 0===r||r.style.setProperty("overflow","visible","important"),null===(s=e.layout.slotTag.closest(ci.CHINATIMES))||void 0===s||s.style.setProperty("display","flex","important"),null===(o=e.layout.slotTag.closest(ci.CHINATIMES))||void 0===o||o.style.setProperty("justify-content","center","important"),null===(a=e.layout.slotTag.closest(ci.CHINATIMES2))||void 0===a||a.style.setProperty("position","relative","important"),null===(l=e.layout.slotTag.closest(ci.CHINATIMES2))||void 0===l||l.style.setProperty("width","100vw","important"),e.container.style.setProperty("width","100vw","important"),e.slotElement.style.setProperty("left","0vw","important"),e.slotElement.style.setProperty("width","100vw","important"),hr(e.playerType)?null===(d=e.slotElement.closest(".with-placeholder"))||void 0===d||d.style.setProperty("z-index","1004","important"):(null===(c=e.layout.videoContainer)||void 0===c||c.style.setProperty("width","100vw","important"),null===(u=e.layout.videoContainer)||void 0===u||u.style.setProperty("height","56.25vw","important"),null===(h=null===(p=e.layout.player)||void 0===p?void 0:p.videoClickArea)||void 0===h||h.element.style.setProperty("height","56.25vw","important")),e.playerType){case"INSTANT":e.container.style.setProperty("height","unset","important");break;case"BNB":T=e.container.querySelector("#banner-wrapper0"),T.style.setProperty("height","56.31vw","important");break;case"SCRATCH_BNB":T=e.container.querySelector("#banner-wrapper0"),T.style.setProperty("height","139.84vw","important");break;case n.TRANSFORMER_STICKY:case n.TRANSFORMER:null===(y=e.slotElement.closest(ci.CHINATIMES2))||void 0===y||y.style.setProperty(Ui.CLIP_PATH,"none","important"),null===(m=e.slotElement.closest(ci.CHINATIMES2))||void 0===m||m.style.setProperty(Ui.CLIP_PATH_KIT,"none","important"),null===(E=e.slotElement.closest(".ad"))||void 0===E||E.style.setProperty("z-index","10","important")}}function gr(e){var t,i,r,s,o,a,l;null===(l=null===(a=null===(o=null===(s=null===(r=null===(i=null===(t=e.slotElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement)||void 0===s?void 0:s.parentElement)||void 0===o?void 0:o.parentElement)||void 0===a?void 0:a.parentElement)||void 0===l||l.style.setProperty("padding","0","important"),e.playerType===n.TRANSFORMER_STICKY&&e.layout.videoContainer.style.setProperty("margin-bottom","0","important"),Or(e.layout)}function Ir(e){var n,i,r;e.playMode===t.IN_STREAM&&(null===(n=e.layout.container.closest(".cnyes-dfp-top-banner"))||void 0===n||n.style.setProperty("height","390px","important"),null===(r=null===(i=e.layout.player)||void 0===i?void 0:i.bannerWrapper)||void 0===r||r.banner.element.style.setProperty("max-width","none","important"))}function Nr(){const e=document.body.querySelector("#gpt-ad-vertical-top .ad-container");e&&(e.style.setProperty("transform","unset","important"),e.style.setProperty("position","relative","important"),e.style.setProperty("left","-0.938rem","important"))}function _r(e){var t,n;const i=top.window.innerWidth,r=.5625*i;hr(e.playerType)||(e.slotElement.style.setProperty("max-width",.94*i+"px","important"),null===(t=e.layout.videoContainer)||void 0===t||t.style.setProperty("max-width","100%","important"),null===(n=e.layout.videoContainer)||void 0===n||n.style.setProperty(Ui.MAX_HIGTH,.94*r+"px","important")),Mr(e)}function Lr(e){var t,n,i,r,s,o,a,l,d,c;const u=null===(r=null===(i=null===(n=null===(t=e.layout.slotTag)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement;null==u||u.style.setProperty("display","block");const p="overflow-x",h=document.createElement("style");document.head.appendChild(h);const y=h.sheet;let m;if(null==y||y.insertRule(`#div-onead-ad${e.dataCenter.isipIndex} * { margin-top: unset !important }`),null==y||y.insertRule(`#div-onead-ad${e.dataCenter.isipIndex} * { padding-top: unset !important }`),hr(e.playerType)){const t=top.window.innerWidth;e.layout.slotTag.style.setProperty("width",t+"px","important");const n=e.layout.underlayContainer;null===(s=n.closest(".article_show"))||void 0===s||s.style.setProperty(p,"visible","important"),null===(o=n.closest(".banner"))||void 0===o||o.style.setProperty(p,"visible","important"),e.slotElement.style.setProperty("margin-top","0px","important"),e.slotElement.style.setProperty("padding-top","0px","important")}else if(m=null===(l=null===(a=e.layout.slotTag)||void 0===a?void 0:a.parentNode)||void 0===l?void 0:l.parentNode,m){const t=Math.floor(window.screen.width),n=Math.floor(.5625*t);e.layout.container.style.setProperty("width",t+"px","important"),null===(d=e.layout.player)||void 0===d||d.element.style.setProperty("width",t+"px","important"),null===(c=e.layout.player)||void 0===c||c.element.style.setProperty("height",n+"px","important"),e.layout.slotTag.style.setProperty(Ui.MARGIN_LEFT,"-15px","important")}}function Cr(e){hr(e.playerType)&&Or(e.layout)}function Mr(e){var t,n,i,r,s,o;const a=document.createElement("div");a.style.setProperty("position","absolute","important"),a.style.setProperty("left","0","important"),a.style.setProperty("top","0","important"),a.style.setProperty("width","100%","important"),a.style.setProperty("height","100%","important"),a.style.setProperty("z-index","100","important");const l=a.cloneNode(!0),d=a.cloneNode(!0),c=a.cloneNode(!0),u=a.cloneNode(!0);null===(t=e.layout.logoButton)||void 0===t||t.element.appendChild(a),null===(n=e.layout.player)||void 0===n||n.muteButton.element.appendChild(l),null===(r=null===(i=e.layout.player)||void 0===i?void 0:i.playButton)||void 0===r||r.element.appendChild(d),null===(s=e.layout.closeButton)||void 0===s||s.element.appendChild(c),null===(o=e.layout.skipButton)||void 0===o||o.element.appendChild(u)}Er.DEFAULT=new Er(null,null,null,(e=>{var t,n,i,r,s;yr(e.playerType)&&1000470===e.uid&&(null===(t=e.layout.container)||void 0===t||t.style.setProperty("background-color","rgba(0,0,0,0.48)","important"),null===(i=null===(n=e.layout.closeBtn)||void 0===n?void 0:n.element)||void 0===i||i.style.setProperty("opacity","0","important"),null===(s=null===(r=e.layout.closeBtn)||void 0===r?void 0:r.element)||void 0===s||s.style.setProperty("pointer-events","none","important"))})),Er.ONEAD=new Er(Ye,(()=>{})),Er.STAGING=new Er(We,(()=>{})),Er.superDsp=new Er(Ge,(()=>{})),Er.APPLENEWS=new Er(Ke,(()=>{})),Er.BASKETBALLTOP=new Er(qe,(e=>{fr.apply_css(e.slotElement,{left:"",right:"0px"}),hr(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","998","important")})),Er.FOOTBALL=new Er(Ze,(()=>{})),Er.FTV=new Er(Je,(e=>{var t;if(hr(e.playerType)){const n=fr.createElement({type:"div",id:`onead-notice${e.dataCenter.isipIndex}`,styles:{width:"100vw",height:"40px"},attr:{}}),i=fr.createElement({type:"img",id:`onead-notice-img${e.dataCenter.isipIndex}`,styles:{width:"200px",height:"100%",margin:"0 auto"},attr:{src:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMzA0IDQwIiB3aWR0aD0iMzA0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im02LjQgMjcuMDQgMS43Ni4yMjRjLS4xMjggMi43NTItLjQ0OCA1LjIxNi0uODk2IDcuMzZsLTEuODU2LS41NzZjLjUxMi0yLjA0OC44MzItNC4zODQuOTkyLTcuMDA4em00LjcwNC0uMzg0Yy4zMiAyLjAxNi41NzYgNC4xOTIuOCA2LjU2bC0xLjc5Mi4zODRjLS4xOTItMi40OTYtLjM4NC00LjY3Mi0uNjA4LTYuNTkyem0yLjk0NC04LjE5MmMuNTc2IDEuODI0IDEuMTIgMy45MDQgMS41NjggNi4yNzJsLTEuNjk2LjQxNi0uMzItMS41NjhjLTIuNjI0LjgzMi01LjEyIDEuNDQtNy40ODggMS43OTJsLS41NDQtMS45MmMuMzUyLS4xNi42NzItLjM1Mi45MjgtLjYwOCAxLjA4OC0xLjIxNiAyLjQzMi0zLjIgMy45NjgtNS45ODQtMS41MDQuMjg4LTIuOTc2LjU0NC00LjQxNi44bC0uNTQ0LTEuOTJjLjMyLS4xMjguNjQtLjM4NC44OTYtLjc2OCAxLjM3Ni0yLjY4OCAyLjU2LTUuNzYgMy41ODQtOS4yMTZsMi4wMTYuNzY4Yy0xLjM0NCAzLjc3Ni0yLjY4OCA2LjgxNi00LjA2NCA5LjA1NiAxLjE1Mi0uMTYgMi4zMDQtLjM1MiAzLjUyLS42MDguNjQtMS4yOCAxLjM0NC0yLjY1NiAyLjA0OC00LjEyOGwxLjkyLjczNmMtMi43ODQgNS40NzItNS4wODggOS4zNDQtNi45NDQgMTEuNTg0IDEuNi0uMjg4IDMuMi0uNjcyIDQuNzM2LTEuMTItLjI1Ni0xLjA4OC0uNTQ0LTIuMDgtLjgzMi0zLjA0em0uMDk2IDcuMzkyYy41NDQgMS42NjQgMS4wMjQgMy40ODggMS40NCA1LjQwOGwtMS42MzIuNzA0Yy0uNDE2LTIuMTEyLS44NjQtNC0xLjM0NC01LjZ6bTQuNDE2LTUuODU2djEyLjY0aDE1LjY4djEuODg4aC0xNy42NjR2LTI4LjM1MmgxLjk4NHYxMi4wMzJoMTUuNTg0djEuNzkyem0xNC41MjggNi44MTZjLjM1MiAxLjI4LjY3MiAyLjc1Mi45OTIgNC40MTZsLTEuMzc2LjM1MmMtLjA5Ni0uNDQ4LS4xOTItLjg5Ni0uMjU2LTEuMjgtMS43OTIuMzItMy4zOTIuNjA4LTQuODY0LjhsLS4zMi0xLjM3NmMuNzY4LS40OCAxLjcyOC0xLjY2NCAyLjkxMi0zLjU1MmwtMy4yMzIuMzg0LS4zODQtMS4zNDRjLjIyNC0uMTI4LjQ0OC0uMzIuNjQtLjU3Ni44MzItMS4yMTYgMS41NjgtMi41OTIgMi4yMDgtNC4xMjhsMS41MzYuNTc2Yy0uOCAxLjYzMi0xLjYgMi45NzYtMi40MzIgNCAuODMyLS4wOTYgMS42OTYtLjIyNCAyLjU2LS4zODRsMS4xODQtMi4xNzYgMS40MDguNTc2Yy0xLjc5MiAzLjIzMi0zLjIgNS4zNzYtNC4yODggNi40NjQuODMyLS4xMjggMS43Ni0uMzIgMi44MTYtLjUxMi0uMTYtLjY0LS4zMi0xLjI0OC0uNDQ4LTEuNzkyem0tNy4zMjguMjI0Yy4zNTIgMS4yOC42NzIgMi43Mi45NiA0LjM4NGwtMS4zNDQuMzUyYy0uMDY0LS40OC0uMTYtLjkyOC0uMjU2LTEuMzc2LTEuODU2LjM1Mi0zLjU4NC42NC01LjE1Mi44OTZsLS4zNTItMS4zNzZjLjg2NC0uNDggMS45NTItMS42NjQgMy4yNjQtMy41NTJsLTMuMi4yNTYtLjM4NC0xLjM0NGMuMjU2LS4xMjguNDQ4LS4zMi42NC0uNTc2Ljg5Ni0xLjIxNiAxLjY5Ni0yLjYyNCAyLjM2OC00LjE5MmwxLjU2OC41NzZjLS44NjQgMS42OTYtMS43MjggMy4wNzItMi41NiA0LjA5Ni44MzItLjA2NCAxLjY5Ni0uMTYgMi41MjgtLjI4OC40NDgtLjcwNC44OTYtMS40NzIgMS4zNDQtMi4yNGwxLjUwNC41NzZjLTEuOTg0IDMuMi0zLjU4NCA1LjM0NC00LjggNi40NjQuODY0LS4xNiAxLjg1Ni0uMzUyIDIuOTc2LS41NzYtLjEyOC0uNTc2LS4yMjQtMS4xNTItLjM1Mi0xLjY2NHptNy4zMjgtMTQuNDY0Yy4zNTIgMS4yOC42NzIgMi43Mi45OTIgNC4zNTJsLTEuMzc2LjM1MmMtLjA5Ni0uNDQ4LS4xOTItLjgzMi0uMjU2LTEuMjE2LTEuNzkyLjMyLTMuMzkyLjYwOC00Ljg2NC44bC0uMzItMS4zNzZjLjc2OC0uNDggMS43MjgtMS42NjQgMi45MTItMy41NTJsLTMuMjMyLjM4NC0uMzg0LTEuMzc2Yy4yMjQtLjA5Ni40NDgtLjI4OC42NC0uNTQ0LjgzMi0xLjIxNiAxLjU2OC0yLjU5MiAyLjIwOC00LjEyOGwxLjUzNi41NzZjLS44IDEuNjMyLTEuNiAyLjk0NC0yLjQgMy45NjguODMyLS4wOTYgMS42NjQtLjIyNCAyLjQ5Ni0uMzUyLjM4NC0uNzA0LjgtMS40MDggMS4yMTYtMi4xNzZsMS40MDguNTc2Yy0xLjc5MiAzLjItMy4yMzIgNS4zNzYtNC4zMiA2LjQ2NC44MzItLjEyOCAxLjc2LS4zMiAyLjg0OC0uNTEyLS4xMjgtLjY0LS4yODgtMS4yMTYtLjQ0OC0xLjc5MnptLTcuMzkyLjIyNGMuMzg0IDEuMjE2LjcwNCAyLjY1NiAxLjAyNCA0LjMybC0xLjM0NC4zMi0uMjU2LTEuMzEyYy0xLjg4OC4zODQtMy42MTYuNjcyLTUuMTUyLjg5NmwtLjM1Mi0xLjM0NGMuODY0LS40OCAxLjk1Mi0xLjY2NCAzLjI2NC0zLjU1MmwtMy4yLjI1Ni0uMzg0LTEuMzc2Yy4yNTYtLjEyOC40NDgtLjI4OC42NC0uNTQ0Ljg5Ni0xLjI0OCAxLjY2NC0yLjY1NiAyLjMwNC00LjE5MmwxLjU2OC41NzZjLS44MzIgMS42NjQtMS42NjQgMy4wMDgtMi40OTYgNC4wNjQuODMyLS4wNjQgMS42OTYtLjE2IDIuNTI4LS4yNTYuNDQ4LS43MDQuODk2LTEuNDcyIDEuMzQ0LTIuMjRsMS41MDQuNTc2Yy0xLjk4NCAzLjItMy41ODQgNS4zNDQtNC44IDYuNDY0Ljg2NC0uMTYgMS44NTYtLjM1MiAyLjk3Ni0uNTc2LS4xMjgtLjYwOC0uMjg4LTEuMTg0LS40MTYtMS42OTZ6bTEyLjg2NCAxNC4yMDggMS44ODguMjI0Yy0uMTYgMi43ODQtLjUxMiA1LjI0OC0xLjA1NiA3LjM2bC0xLjk1Mi0uNjA4Yy42MDgtMi4wNDguOTkyLTQuMzUyIDEuMTItNi45NzZ6bTUuMzEyLS40MTZjLjM4NCAyLjAxNi43MDQgNC4xOTIuOTkyIDYuNTZsLTEuOTUyLjQ0OGMtLjIyNC0yLjQ5Ni0uNDgtNC43MDQtLjgtNi42MjR6bTMuMjY0LTguMDY0Yy42MDggMS43OTIgMS4xNTIgMy44NzIgMS42MzIgNi4yMDhsLTEuODU2LjQ4LS4zMi0xLjYzMmMtMi44OC44NjQtNS42MzIgMS40NC04LjI1NiAxLjc2bC0uNTc2LTEuOTUyYy4zODQtLjE2LjcwNC0uMzUyLjk2LS41NzYgMS4yMTYtMS4yMTYgMi42NTYtMy4yMzIgNC4zODQtNi4wNDgtMS42OTYuMjU2LTMuMzkyLjQ4LTUuMDg4LjcwNGwtLjU0NC0xLjg1NmMuMzItLjE2LjYwOC0uNDE2Ljg2NC0uOCAxLjcyOC0yLjU5MiAzLjIzMi01LjUzNiA0LjQ4LTguODY0bDIuMDQ4Ljc2OGMtMS42IDMuNjE2LTMuMiA2LjUyOC00LjgzMiA4LjcwNCAxLjQwOC0uMTI4IDIuODE2LS4zMiA0LjE5Mi0uNTc2LjY3Mi0xLjIxNiAxLjM3Ni0yLjQ5NiAyLjExMi0zLjg3MmwxLjk4NC43MzZjLTMuMDQgNS40MDgtNS41MzYgOS4yMTYtNy41MiAxMS40NTYgMS43OTItLjMyIDMuNjE2LS43MDQgNS40MDgtMS4xODQtLjI1Ni0uOTkyLS41NDQtMS45NTItLjgzMi0yLjg4em0uMTI4IDcuMjY0Yy41NzYgMS42OTYgMS4wODggMy40ODggMS41MDQgNS40MDhsLTEuNzI4Ljc2OGMtLjQ0OC0yLjExMi0uOTI4LTQtMS40NC01LjYzMnptMi4wMTYtMTguMjRoNy4zNnYtMS43MjhoMi4yMDh2MS43MjhoNy4zNnYxLjY2NGgtNy4zNnYxLjY5Nmg2LjQzMnYxLjUwNGgtMTUuMDcydi0xLjUwNGg2LjQzMnYtMS42OTZoLTcuMzZ6bS4yODggNi4zNjhoMTYuMjU2djUuMzQ0aC0xNi4yNTZ6bTE0LjMwNCAzLjkwNHYtMi40NjRoLTMuMDcydjIuNDY0em0tNC42NCAwdi0yLjQ2NGgtMy4wNHYyLjQ2NHptLTQuNjA4IDB2LTIuNDY0aC0zLjEwNHYyLjQ2NHptLTQuMDk2IDIuODQ4aDE0LjR2MTAuNTI4aC00LjgzMmMyLjQzMi43MDQgNC42NzIgMS41NjggNi42ODggMi41NmwtMS4wNTYgMS42Yy0yLjE3Ni0xLjE4NC00LjM4NC0yLjExMi02LjY1Ni0yLjgxNmwuODk2LTEuMzQ0aC01LjAyNGwxLjE4NCAxLjM0NGMtMS45MiAxLjA4OC00LjI4OCAyLjAxNi03LjEzNiAyLjcybC0uODMyLTEuNjk2YzIuNzItLjY0IDQuOTYtMS40MDggNi42ODgtMi4zNjhoLTQuMzJ6bTEyLjI1NiA5LjAyNHYtMS43MjhoLTEwLjE3NnYxLjcyOHptLTEwLjE3Ni0zLjAwOGgxMC4xNzZ2LTEuNTY4aC0xMC4xNzZ6bTAtMi44MTZoMTAuMTc2di0xLjc2aC0xMC4xNzZ6bTIzLjM2LTE3Ljk1MiAyLjAxNi45NmMtMS42MzIgMy40MjQtNC4zMiA2LjQ2NC04LjAzMiA5LjEybC0uNjcyLTIuMjcyYzMuMDcyLTIuMzA0IDUuMjgtNC44OTYgNi42ODgtNy44MDh6bS44MzIgOC4xMjggMS45ODQuODk2Yy0uNzY4IDEuNjMyLTEuNzYgMy4xNjgtMi45MTIgNC42MDh2MTUuNDU2aC0yLjI0di0xMy4wMjRjLTEuMDI0Ljk2LTIuMTc2IDEuOTItMy4zOTIgMi44MTZsLS42NzItMi4yMDhjMy4yOTYtMi40OTYgNS42OTYtNS4zNDQgNy4yMzItOC41NDR6bTIuMzM2LTIuNjU2aDguNTQ0Yy0uNzA0LTEuNjk2LTEuNTA0LTMuMzI4LTIuNDMyLTQuODk2bDIuMjQtLjYwOGMxLjAyNCAxLjgyNCAxLjc5MiAzLjQ4OCAyLjMwNCA1LjAyNGwtMS4yNDguNDhoOS4zMTJ2Mi4yMDhoLTguMTZ2Ny44MDhoNy4zMjh2Mi4xNDRoLTcuMzI4djguNjRoOC44djIuMjA4aC0yMC40NDh2LTIuMjA4aDkuMzEydi04LjY0aC03LjQyNHYtMi4xNDRoNy40MjR2LTcuODA4aC04LjIyNHptMjIuNjI0LTMuODRoMjguNDQ4djIuMjcyaC0xMy44ODh2NC44MzJjMy45NjggMS45ODQgOCA0LjI4OCAxMi4wOTYgNi45MTJsLTEuMzc2IDIuMDQ4Yy00LjI1Ni0yLjgxNi03Ljg0LTQuOTkyLTEwLjcyLTYuNTI4djE4LjE3NmgtMi4zMzZ2LTI1LjQ0aC0xMi4yMjR6bTM0LjIwOC0xLjEyYzIuMzA0IDEuNjY0IDQuMjU2IDMuMzYgNS44MjQgNS4wMjRsLTEuNTY4IDEuNTM2Yy0xLjQwOC0xLjU2OC0zLjM2LTMuMjY0LTUuODI0LTUuMDU2em0tLjMyIDcuODcyYzIuMDggMS42IDMuODQgMy4xNjggNS4yOCA0Ljc2OGwtMS41NjggMS41NjhjLTEuMjgtMS41MzYtMy4wNC0zLjEzNi01LjI4LTQuODY0em0zLjEwNCA5LjEyIDEuOTg0Ljc2OGMtMS4zNDQgMy44NC0yLjgxNiA3LjQ4OC00LjQ4IDEwLjg4bC0yLjA4LS44OTZjMS43Ni0zLjUyIDMuMjk2LTcuMTA0IDQuNTc2LTEwLjc1MnptMjAuODY0LTE2LjQxNnY4LjYwOGgyLjExMnY1LjM0NGgtMi4yMDh2LTMuMzZoLTE1LjM2djMuMzZoLTIuMjA4di01LjM0NGgyLjMzNnYtOC42MDh6bS0xMy4xNTIgOC42MDhoNC40OHYtNC4xOTJoNi40OTZ2LTIuNGgtMTAuOTc2em0xMC45NzYtMi41MjhoLTQuNTc2djIuNTI4aDQuNTc2em0xLjY2NCA2LjcydjEyLjg5NmMwIDEuNjY0LS45NiAyLjQ5Ni0yLjg4IDIuNDk2aC00Ljg5NmwtLjU0NC0yLjA4YzEuNzI4LjA2NCAzLjMyOC4xMjggNC44LjEyOC44OTYgMCAxLjM3Ni0uNDQ4IDEuMzc2LTEuMzEydi0yLjY1NmMtMi44MTYuNzA0LTYuMDQ4IDEuMzQ0LTkuNjMyIDEuOTg0bC0uNTEyLTEuODg4YzMuNzEyLS41NzYgNy4wNzItMS4yNDggMTAuMTQ0LTEuOTg0di01LjUwNGgtMTAuMDE2djEuNzkyYzIuNjg4LjI4OCA1LjIxNi42NzIgNy42NDggMS4xODRsLS42NCAxLjY2NGMtMi4yNzItLjQ4LTQuNjA4LS44NjQtNy4wNC0xLjE4NC0uMTI4IDQuMDY0LTEuMDI0IDcuMzkyLTIuNzIgOS45NTJsLTEuNjY0LTEuNTM2YzEuNTA0LTIuMzA0IDIuMjcyLTUuMjE2IDIuMzA0LTguNzY4di01LjE4NHptOC44LTguMDY0aDEwLjE0NGMuMzUyLS43NjguNjcyLTEuNTY4Ljk5Mi0yLjMzNi0zLjEzNi4xOTItNi41MjguMjg4LTEwLjE3Ni4yODhsLS42NzItMS45MmM5LjA4OCAwIDE2LjYwOC0uNjA4IDIyLjU5Mi0xLjgyNGwxLjA1NiAxLjgyNGMtMy4wNC42NzItNi41NiAxLjE1Mi0xMC41OTIgMS40NzItLjI4OC44NjQtLjYwOCAxLjY5Ni0uOTI4IDIuNDk2aDExLjkwNHYxLjk4NGgtMTIuODMyYy0uMzg0Ljc2OC0uOCAxLjQ3Mi0xLjIxNiAyLjE3NmgxNS45MDR2Mi4wNDhoLTE3LjMxMmMtLjU3Ni43NjgtMS4xNTIgMS41MDQtMS43NiAyLjIwOGgxNS44NzJ2MTUuMDcyaC0yLjIwOHYtMS4zNzZoLTE0LjQ2NHYxLjM3NmgtMi4yMDh2LTEyYy0xLjYzMiAxLjQ3Mi0zLjQyNCAyLjkxMi01LjQwOCA0LjI1NmwtMS4yNDgtMS45ODRjMy40ODgtMi4zNjggNi4zNjgtNC44NjQgOC42NC03LjU1MmgtNy44MDh2LTIuMDQ4aDkuNDA4Yy41MTItLjczNi45OTItMS40NzIgMS40MDgtMi4xNzZoLTkuMDg4em02LjMwNCAxNC4yNHYyLjAxNmgxNC40NjR2LTIuMDE2em0xNC40NjQtMS43OTJ2LTIuMTQ0aC0xNC40NjR2Mi4xNDR6bS0xNC40NjQgNS42djIuMTc2aDE0LjQ2NHYtMi4xNzZ6bTI0LjA5Ni0yMi42NTZoMjcuNDI0djIuMTQ0aC0xMi41NzZ2Mi43ODRoOS45MnYxMi42NzJoLTEwLjMwNGMtLjM4NCAyLjExMi0uOTkyIDMuODA4LTEuODg4IDUuMDg4IDQuNDggMS44ODggOS43OTIgMi45NDQgMTUuOTM2IDMuMTM2bC0uNTc2IDIuMjA4Yy02LjQzMi0uMjU2LTEyLjAzMi0xLjUwNC0xNi44LTMuNjgtMi4yNCAxLjkyLTUuOTIgMy4xMzYtMTEuMDA4IDMuNzEybC0uOTkyLTIuMTEyYzQuNDQ4LS4zNTIgNy43MTItMS4yNDggOS43Ni0yLjcyLTEuODU2LTEuMDI0LTMuNTg0LTIuMjA4LTUuMTUyLTMuNTUybDEuNzYtMS4yMTZjMS41MDQgMS4yNDggMy4xNjggMi4zMzYgNC45NiAzLjI2NC43NjgtMS4wODggMS4zNDQtMi40NjQgMS42NjQtNC4xMjhoLTkuMzc2di0xMi42NzJoOS43OTJ2LTIuNzg0aC0xMi41NDR6bTIyLjQ5NiAxNS41ODR2LTMuMzkyaC03LjY0OHYxLjEybC0uMDk2IDIuMjcyem0tMTAuMDQ4IDBjLjA2NC0uNzM2LjA5Ni0xLjUwNC4wOTYtMi4yNzJ2LTEuMTJoLTcuNTJ2My4zOTJ6bS03LjQyNC01LjMxMmg3LjUydi0zLjM2aC03LjUyem05LjgyNC0zLjM2djMuMzZoNy42NDh2LTMuMzZ6bTMwLjcyLTguMjg4IDIuMDQ4IDEuMDg4Yy0uNTc2LjY0LTEuMTg0IDEuMjQ4LTEuODI0IDEuODI0aDkuMTg0djEuODI0Yy0zLjQ1NiA2LjE0NC05Ljg4OCA5LjYtMTkuMjMyIDEwLjMzNmwtLjk5Mi0yLjA4YzIuODgtLjE5MiA1LjQ0LS42MDggNy43NDQtMS4yOC0uOTkyLTEuMjE2LTIuMDQ4LTIuMzM2LTMuMTM2LTMuMzI4bDIuMDE2LS45NmMxLjE1MiAxLjA4OCAyLjI0IDIuMjQgMy4yNjQgMy41MiAzLjMyOC0xLjM0NCA1LjkyLTMuMzYgNy43MTItNS45ODRoLTkuMzQ0Yy0yLjQ5NiAxLjQ3Mi01LjQ0IDIuNTkyLTguODY0IDMuMzZsLTEuMzQ0LTIuMTEyYzUuNjk2LTEuMDg4IDkuOTUyLTMuMTM2IDEyLjc2OC02LjIwOHptLTEuMjE2IDIwYzEuMjE2IDEuMjQ4IDIuNCAyLjU5MiAzLjQ4OCA0LjAzMiAzLjU1Mi0xLjUzNiA2LjMzNi0zLjc0NCA4LjM4NC02LjU2aC05LjQ3MmMtMi44MTYgMS4zNDQtNi4xNDQgMi4zNjgtMTAuMDE2IDMuMDRsLTEuMzc2LTIuMDQ4YzYuOTc2LS43MDQgMTIuMTI4LTIuODQ4IDE1LjQ1Ni02LjM2OGwxLjk4NCAxLjA4OGMtLjc2OC43NjgtMS41NjggMS41MDQtMi40NjQgMi4xNzZoOC43Njh2MS44MjRjLTQuNTQ0IDcuNTUyLTEyLjk5MiAxMS40NTYtMjUuNDA4IDExLjc0NGwtLjkyOC0yLjIwOGM0Ljk5Mi0uMDMyIDkuMzEyLS42NCAxMi45MjgtMS44NTYtMS4wODgtMS40NC0yLjIwOC0yLjc1Mi0zLjM5Mi0zLjkwNHoiIGZpbGw9IiMzZDNkM2QiLz48ZyBzdHJva2U9IiMzZDNkM2QiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJtMjk0IDEwLTEwIDEwLTEwLTEwIi8+PHBhdGggZD0ibTI5NCAyMC0xMCAxMC0xMC0xMCIvPjwvZz48L3N2Zz4="}});n.appendChild(i),null===(t=e.slotElement)||void 0===t||t.parentElement.insertBefore(n,e.slotElement)}})),Er.CK=new Er($e,null,(e=>{e.slotElement.style.bottom="90px",e.slotElement.style.zIndex="99997"})),Er.COOL3C=new Er(et,(e=>{var t;if(hr(e.playerType)){const n=e.container,i=e.layout;i.fixedContainer.style.setProperty("top","20px","important"),i.fixedContainer.style.setProperty("transform","scale(0.9)","important"),null===(t=n.closest(".col-12"))||void 0===t||t.style.setProperty("padding","0","important")}})),Er.BC3T_2=new Er(nt,gr),Er.BC3T=new Er(tt,gr),Er.CARNEWS=new Er(it,(e=>{hr(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","98","important")})),Er.BBCOM=new Er(rt,(e=>{var t,n,i,r;const s=e.container;let o;hr(e.playerType)&&(null===(t=s.closest(".tdb-block-inner"))||void 0===t||t.style.setProperty("transform","none","important"),null===(n=s.closest(".tdb-block-inner"))||void 0===n||n.style.setProperty("-webkit-transfor","none","important")),e.playerType.indexOf("STICKY")>-1&&(o=null===(r=null===(i=e.slotElement.parentElement.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.parentElement,null==o||o.style.setProperty("transform","unset","important"),null==o||o.style.setProperty("-webkit-transfor","unset","important"))})),Er.CHEERS=new Er(st,(e=>{if(e.slotElement.style.zIndex="49",hr(e.playerType)){const t=document.getElementsByClassName("page__primary")[0];null==t||t.style.setProperty("overflow","initial");const n=null==t?void 0:t.getElementsByClassName("parallaxAd")[0];null==n||n.style.setProperty("maxWidth","unset"),Or(e.layout)}})),Er.CARSTUFF=new Er(ot,Cr,(e=>{e.container.style.setProperty("left","0","important")})),Er.BRAIN=new Er(at,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","4999","important")})),Er.BCCNEWS=new Er(lt,(e=>{var t;(hr(e.playerType)||e.playerType.indexOf("STICKY")>-1)&&(null===(t=e.layout.slotTag.closest(".td-fix-index"))||void 0===t||t.style.setProperty("transform","none","important"))})),Er.COOL_STYLE=new Er(dt,null,null,null,null,vr),Er.CAVA=new Er(ct,Lr),Er.CAVA2=new Er(ut,Lr),Er.DCARD=new Er(pt,(e=>{var t,i,r,s,o,a,l,d,c,u,p;null===(r=null===(i=null===(t=e.slotElement.parentElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r||r.style.setProperty("height","auto","important"),null===(a=null===(o=null===(s=e.slotElement.parentElement)||void 0===s?void 0:s.parentElement)||void 0===o?void 0:o.parentElement)||void 0===a||a.style.setProperty("height","auto"),e.playerType===n.TAG&&(null===(c=null===(d=null===(l=e.slotElement.childNodes[0])||void 0===l?void 0:l.childNodes[0])||void 0===d?void 0:d.childNodes[0])||void 0===c||c.style.setProperty("height","820px")),hr(e.playerType)&&(null===(p=null===(u=e.slotElement.parentElement.parentElement)||void 0===u?void 0:u.parentElement)||void 0===p||p.style.setProperty("height","auto","important"))})),Er.CTEE=new Er(ht,(e=>{var t,n,i;hr(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","9998","important"),null===(t=e.slotElement.closest(ci.CHINATIMES))||void 0===t||t.style.setProperty("max-width","unset"),null===(n=e.slotElement.closest(ci.CHINATIMES))||void 0===n||n.style.setProperty("width","calc(96vw + 1rem)"),null===(i=e.slotElement.closest(ci.CHINATIMES))||void 0===i||i.style.setProperty("left","-0.989rem"))})),Er.CW=new Er(yt,(e=>{var t;null===(t=e.slotElement.closest(".ad--scrollvideo"))||void 0===t||t.style.setProperty("z-index","2","important")})),Er.DAYBUY=new Er(mt,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","989","important")})),Er.CNEWS=new Er(Et,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","2","important")})),Er.CTS=new Er(Tt,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","20","important")})),Er.CTI=new Er(gt,(e=>{var t,n,i,r,s,o,a;const l=e.slotElement,d=e.playerType;null===(t=l.closest(".article__main"))||void 0===t||t.style.setProperty("overflow","visible","important");const c=null===(n=top.window.document.getElementById("main"))||void 0===n?void 0:n.clientWidth;if(e.container.style.setProperty("width",`${c}px`,"important"),d.includes("TRANSFORMER"))null===(i=e.layout.videoContainer)||void 0===i||i.style.setProperty("height",.5625*c+"px","important"),e.layout.container.style.setProperty("align-items","unset","important");else if(d.includes("STICKY")||"SCRATCH"===d){null===(r=e.layout.videoContainer)||void 0===r||r.style.setProperty("height",.5625*c+"px","important"),null===(s=e.layout.videoContainer)||void 0===s||s.style.setProperty("width",`${c}px`,"important"),null===(o=e.layout.videoContainer)||void 0===o||o.style.setProperty("display","block","important");const t=e.layout.videoContainer;new MutationObserver((function(e){e.forEach((function(){"fixed"===(null==t?void 0:t.style.position)?t.style.top="135px":t.style.top=""}))})).observe(t,{attributes:!0,attributeFilter:["style"]})}else if(hr(d))null===(a=e.layout.container.querySelector(".moat_trackable"))||void 0===a||a.style.setProperty("width",`${c}px`,"important");else if("SCRATCH_BNB"===d){const t=e.container.querySelector(`#banner-wrapper${e.dataCenter.isipIndex}`),n=0!==e.slotElement.clientWidth?e.slotElement.clientWidth:window.screen.width,i={height:895,ratio:Math.floor(n)/640},r=i.height*i.ratio;null==t||t.style.setProperty("height",`${r}px`,"important")}})),Er.CMONEY=new Er(It,Mr),Er.DAILYVIEW=new Er(Nt,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","0","important")})),Er.DDM=new Er(Lt,(()=>{})),Er.BUZZHAND=new Er(Ct,(()=>{})),Er.DRAMAQUEEN=new Er(At,(e=>{var t,n,i,r,s;null===(t=e.layout.player)||void 0===t||t.muteButton.element.style.setProperty("overflow","unset","important"),null===(n=e.layout.closeButton)||void 0===n||n.element.style.setProperty("overflow","unset","important"),hr(e.playerType)&&(Or(e.layout),e.layout.fixedContainer.style.setProperty("transform-style","preserve-3d","important"),null===(i=e.layout.player)||void 0===i||i.muteButton.element.style.setProperty("transform","translateZ(99999994px)","important"),null===(r=e.layout.closeButton)||void 0===r||r.element.style.setProperty("transform","translateZ(90007px)","important"),e.playerType.indexOf("LOCK")>-1&&(document.documentElement.style.setProperty("overflow-y","unset"),document.body.style.setProperty("height","unset"),null===(s=e.layout.moreInfoButton)||void 0===s||s.querySelector("span").style.setProperty("color","#141414")))}),(e=>{var t,n,i;e.container.style.setProperty("overflow","unset","important"),null===(t=e.layout.player)||void 0===t||t.muteButton.element.style.setProperty("overflow","unset","important"),null===(n=e.layout.bottomWrapper)||void 0===n||n.style.setProperty("overflow","unset","important"),null===(i=e.layout.closeButton)||void 0===i||i.element.style.setProperty("overflow","unset","important")}),null,null,(e=>{mr(e.playerType)&&(e.container.style.bottom="120px")})),Er.EVERYLITTLED=new Er(vt,(e=>{hr(e.playerType)&&(e.layout.slotTag.style.setProperty("width","100vw","important"),e.layout.underlayContainer.style.setProperty("z-index","1000002","important"),e.layout.fixedContainer.style.setProperty("z-index","1000002","important"),e.layout.fixedContainer.style.setProperty(Ui.MARGIN_LEFT,"4%","important"))})),Er.HARPERSBAZAAR=new Er(Ot,(e=>{var t;null===(t=e.slotElement.closest(".ad-container"))||void 0===t||t.style.setProperty("transform","none","important")})),Er.UTAGGO=new Er(ft,(e=>{var t,n,i,r;null===(r=null===(i=null===(n=null===(t=e.slotElement.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===r||r.style.setProperty(Ui.MAX_HIGTH,"none","important")})),Er.ICOOK=new Er(St,Cr,(e=>{e.slotElement.style.zIndex="2147483643"})),Er.HOW01=new Er(wt,(e=>{var t,n;e.playerType.includes("SHOW")&&(null===(t=e.layout.banner[0])||void 0===t||t.bannerImg.element.style.setProperty(Ui.MAX_HIGTH,"none","important"),null===(n=e.layout.banner[1])||void 0===n||n.bannerImg.element.style.setProperty(Ui.MAX_HIGTH,"none","important"))})),Er.JUKSY=new Er(Rt,null,null,null,null,(e=>{var n,i;if(e.playMode===t.IN_STREAM){e.container.querySelectorAll("iframe").forEach((e=>e.style.setProperty("max-width","none","important"))),null===(i=null===(n=e.player)||void 0===n?void 0:n.videoplayer)||void 0===i||i.element.style.setProperty("z-index","9899","important")}mr(e.playerType)&&vr(e.layout)})),Er.IFOOD=new Er(xt,(()=>{})),Er.LINETV=new Er(Dt,(e=>{e.slotElement.parentNode.parentNode.style.setProperty("display","block","important")}),null,null,(e=>{e.slotElement.parentNode.parentNode.style.setProperty("display","block","important")})),Er.INSIDE=new Er(bt,(e=>{if(hr(e.playerType)){const t=top.window,n=t.document.getElementsByClassName("board-in_a_p2_special")[0];n&&-1===e.playerType.indexOf("PAGE")&&(n.style.setProperty("height",t.innerHeight+"px","important"),e.slotElement.style.position="absolute"),Or(e.layout)}})),Er.HELLOYISHI=new Er(Pt,(e=>{var t,n;let i;hr(e.playerType)?(i=e.layout.underlayContainer,e.layout.slotTag.style.setProperty("left","0px","important"),e.layout.slotTag.style.setProperty("width",top.window.innerWidth+"px","important"),e.layout.slotTag.parentElement.style.setProperty("margin-right","-1rem","important"),e.layout.slotTag.parentElement.style.setProperty(Ui.MARGIN_LEFT,"-1rem","important"),e.layout.slotTag.parentElement.parentElement.parentElement.style.setProperty("overflow","unset","important")):(i=e.layout.container,null===(t=e.layout.slotTag.parentElement.parentElement)||void 0===t||t.parentElement.style.setProperty(Ui.MAX_HIGTH,"none","important"),null===(n=e.layout.slotTag.parentElement.parentElement)||void 0===n||n.parentElement.style.setProperty("max-width","none","important"));const r=i.closest(".deeekb");r&&(r.style.setProperty("width",top.window.innerWidth+"px","important"),r.style.setProperty(Ui.MAX_HIGTH,"none","important"),r.style.setProperty("max-width","none","important"),r.style.setProperty("overflow","unset","important"))})),Er.KEELUNGHIHI=new Er(jt,(e=>{if(hr(e.playerType)){const e=top.window.document.getElementsByClassName("single-post")[0];null==e||e.style.setProperty("overflow-x","unset","important")}})),Er.LAVIE=new Er(kt,(()=>{})),Er.MABABY=new Er(Ut,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","9998","important")})),Er.MIRROR=new Er(Ft,(e=>{hr(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","518","important")}),(e=>{e.slotElement.style.zIndex="9000"})),Er.MAMACLUB=new Er(Vt,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","1033","important")})),Er.MONEYLINK=new Er(zt,(e=>{var t;null===(t=e.layout.fixedContainer)||void 0===t||t.style.setProperty("top","95px","important")})),Er.MNEWS=new Er(Yt,(()=>{})),Er.NIUSNEWS=new Er(Wt,(e=>{if(hr(e.playerType)){const t=e.layout.slotTag.closest(".post-onead");null==t||t.style.setProperty("overflow","visible","important")}})),Er.NEWSLENS=new Er(Gt,(e=>{if(hr(e.playerType)){e.slotElement.parentElement.parentElement.style.setProperty("overflow","initial","important")}})),Er.NEWTALK=new Er(Qt,(e=>{e.container.style.zIndex="10000"}),(e=>{e.container.style.zIndex="949999"}),(e=>{e.container.style.zIndex="10045"})),Er.NOCANCERS=new Er(Xt,(e=>{var t,n;e.playerType.includes("SHOW")&&(null===(t=e.layout.banner[0])||void 0===t||t.bannerImg.element.style.setProperty(Ui.MAX_HIGTH,"none","important"),null===(n=e.layout.banner[1])||void 0===n||n.bannerImg.element.style.setProperty(Ui.MAX_HIGTH,"none","important"))})),Er.LOOKIN=new Er(Kt,(e=>{hr(e.playerType)&&e.slotElement.style.setProperty("width","100vw","important")})),Er.POPDAILY=new Er(Jt,(e=>{var t,n;const i=e.layout.slotTag.closest(".Zi_ad_ar_iR"),r="scale(0.5475) translateY(320px)",s=e.layout.slotTag.getBoundingClientRect().width;i&&(i.style.setProperty("display","block","important"),e.slotElement.style.setProperty("margin","unset","important"),e.slotElement.style.setProperty("max-width","unset","important"),e.slotElement.style.setProperty("width",s+"px","important")),e.playerType.indexOf("STICKY")>-1&&(e.layout.videoContainer.style.setProperty("width",s+"px","important"),e.layout.banner.element.style.setProperty("transform",r,"important")),"SCRATCH"===e.playerType&&(e.layout.videoContainer.style.setProperty("width",s+"px","important"),null===(t=e.layout.banner[0])||void 0===t||t.element.style.setProperty("transform",r,"important"),null===(n=e.layout.banner[1])||void 0===n||n.element.style.setProperty("transform",r,"important")),Cr(e)}),null,null,null,(e=>{mr(e.playerType)&&(e.layout.container.style.bottom="50px",e.layout.container.style.align="left bottom")})),Er.PUNCHLINE=new Er($t,(e=>{var t;let n;if(hr(e.playerType)){null===(t=e.layout.underlayContainer.closest(".main-wrap"))||void 0===t||t.style.setProperty("transform","none","important")}else e.playerType.indexOf("STICKY")>-1&&(n=top.window.document.querySelector(".main-wrap"),null==n||n.style.setProperty("transform","none","important"))})),Er.STARRYEAGLE=new Er(tn,(e=>{var t;hr(e.playerType)&&(null===(t=e.layout.underlayContainer.closest(".Zi_ad_ar_iR"))||void 0===t||t.style.setProperty("overflow","initial","important"))})),Er.STORM=new Er(nn,(e=>{var t,n;null===(t=e.container.closest(".storm_magic_placeholder"))||void 0===t||t.style.setProperty("margin","unset","important"),null===(n=e.container.closest(".storm_magic_placeholder"))||void 0===n||n.style.setProperty("min-width","100%","important"),Or(e.layout)}),null,(e=>{var t;if(document.body.style.overflow="auto",e.playerType.indexOf("POSTER")<=-1){const n=e.layout.container.querySelector(`#close-button${e.dataCenter.isipIndex}`);if(n){const e=n.cloneNode(!0);e.id="close-img-layer",e.style.setProperty("z-index","2147483646","important"),e.style.setProperty("pointer-events","none","important"),e.style.setProperty("opacity","1","important"),e.style.setProperty("display","block","important"),n.parentElement.appendChild(e),null===(t=n.firstElementChild)||void 0===t||t.remove(),n.addEventListener("click",(e=>{e.stopPropagation()}))}}})),Er.SPORTSV=new Er(rn,(e=>{hr(e.playerType)&&(e.slotElement.style.left="unset",e.layout.underlayContainer.style.zIndex="99998",e.layout.fixedContainer.style.zIndex="99998",Or(e.layout))})),Er.TEEPR=new Er(sn,null,null,(e=>{var t,n,i,r;null===(t=e.container.querySelector("#close-img"))||void 0===t||t.style.setProperty("right","4px"),null===(n=e.container.querySelector("#close-img"))||void 0===n||n.style.setProperty("top","4px"),yr(e.playerType)&&(null===(i=e.layout.ctaIcon)||void 0===i||i.style.setProperty("box-sizing","unset","important"),null===(r=e.layout.ctaIcon)||void 0===r||r.style.setProperty("left","unset","important"))})),Er.TEL3C=new Er(on,(e=>{hr(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","9998","important"),e.layout.fixedContainer.style.setProperty("transform","scale(0.88)","important"))})),Er.TOYPEOPLE=new Er(an,(e=>{e.container.querySelectorAll("img").forEach((e=>{e.style.setProperty("box-shadow","none","important")})),hr(e.playerType)&&e.layout.underlayContainer.style.setProperty("z-index","99","important")})),Er.TTSHOW=new Er(ln,(()=>{})),Er.TTVC=new Er(dn,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","998","important")})),Er.UCAR=new Er(cn,Cr),Er.WALKERLAND=new Er(un,null,null,null,null,(e=>{var n,i;if(e.playMode===t.IN_STREAM){const t=e.layout.container;null===(n=t.closest(".top-slide-ad"))||void 0===n||n.style.setProperty("height","auto","important"),null===(i=t.closest(".container"))||void 0===i||i.style.setProperty(Ui.MAX_HIGTH,"none","important")}})),Er.WOMANCRAZY=new Er(pn,null,(e=>{e.slotElement.style.marginBottom="44px",e.slotElement.classList.add("ad-bottom")})),Er.WOMENSHUO=new Er(hn,(()=>{})),Er.MARIECLAIRE=new Er(yn,(e=>{if(e.layout.slotTag.style.setProperty("padding-top","20px","important"),hr(e.playerType)){e.layout.fixedContainer.style.setProperty("top","34.36px","important"),e.layout.fixedContainer.style.setProperty("transform","translateZ(0px) scale(0.946)","important");const t=document.createElement("style");document.head.appendChild(t);const n=t.sheet;null==n||n.insertRule(".adUnderlay:before{z-index:2147483646}")}})),Er.ZI=new Er(mn,(e=>{var t;e.playerType.indexOf("SCRATCH")>-1&&e.slotElement.style.setProperty("width","100%","important"),null===(t=e.layout.fixedContainer)||void 0===t||t.style.setProperty("top","100px","important")}),null,null,null,(e=>{mr(e.playerType)&&vr(e.layout)})),Er.BABYHOME=new Er(En,(e=>{var t,n,i,r;const s=null===(n=null===(t=(e.layout.underlayContainer||e.layout.slotTag).parentElement)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement;if((hr(e.playerType)||"TRANSFORMER"===e.playerType)&&s&&(s.style.setProperty("overflow","unset","important"),s.style.setProperty("width","auto","important"),s.style.setProperty("height","auto","important")),null===(i=e.layout.fixedContainer)||void 0===i||i.style.setProperty("bottom","40px","important"),"TRANSFORMER"===e.playerType){const t=Math.floor(window.screen.width),n=Math.floor(.5625*t);e.layout.container.style.setProperty("width","auto","important"),null===(r=e.layout.player)||void 0===r||r.element.style.setProperty("height",n+"px","important")}})),Er.BUSINESSTODAY=new Er(Tn,(()=>{})),Er.WAYNESAN=new Er(gn,(()=>{})),Er.BUZZORANGE=new Er(In,(e=>{var t;e.playerType.indexOf("PAGE")>-1&&e.container.style.setProperty("position","absolute","important"),hr(e.playerType)&&(e.container.style.setProperty("position","sticky","important"),null===(t=e.layout.closeButton)||void 0===t||t.element.style.setProperty("transform","translateZ(1px)","important"))})),Er.TOMORROW=new Er(Nn,(e=>{var t,n;hr(e.playerType)&&(null===(t=e.layout.underlayContainer.closest(".main-container"))||void 0===t||t.style.setProperty("overflow","unset","important"),null===(n=e.layout.underlayContainer.closest(".post-content"))||void 0===n||n.style.setProperty("overflow","unset","important"))})),Er.KPOPN=new Er(_n,(()=>{})),Er.HINETMAIL=new Er(Ln,(()=>{})),Er.LIFE_MOBILE=new Er(Cn,(e=>{var t;e.playerType.indexOf("LOCK")>-1&&(null===(t=e.layout.countDownTimer)||void 0===t||t.element.style.setProperty("right","7.5vw"))})),Er.BIJI_HIKING=new Er(Mn,(e=>{hr(e.playerType)&&(Or(e.layout),e.container.style.setProperty(Ui.CLIP_PATH,"inset(0% -5%)","important"))})),Er.BIJI_RUNNING=new Er(An,(()=>{})),Er.BIJI_BASKETBALL=new Er(vn,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","11","important")})),Er.BNEXT_MEET=new Er(On,(()=>{})),Er.BNEXT_DIGITALERA=new Er(fn,(e=>{var t,n;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","9","important"),null===(n=e.layout.fixedContainer)||void 0===n||n.style.setProperty("top","90px","important")})),Er.BNEXT_MANAGER=new Er(Sn,(e=>{Ar(e.layout)}),(e=>{Ar(e.layout)}),(e=>{Ar(e.layout);const t=e.layout.bannerCloseButton||e.layout.videoCollapseButton||e.layout.bannerCollapseButton;t&&(t.element.style.width="50px",t.element.style.height="50px",t.element.style.top="35px",t.element.style.right="15px")})),Er.BNEXT_DESIGN=new Er(wn,null,null,null,null,vr),Er.BUSINESSWEEKLY_MAIN=new Er(Rn,null,null,null,null,(e=>{mr(e.playerType)&&(e.container.style.bottom="100px")})),Er.BUSINESSWEEKLY_WEALTH=new Er(xn,(e=>{var t,n,i,r;hr(e.playerType)&&(null===(r=null===(i=null===(n=null===(t=e.slotElement.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode)||void 0===i?void 0:i.parentElement)||void 0===r||r.style.setProperty("height","auto"),Or(e.layout))})),Er.BUSINESSWEEKLY_HEALTH=new Er(Dn,(e=>{var t,n;hr(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","101","important"),null===(t=e.slotElement.parentElement)||void 0===t||t.parentElement.style.setProperty("height","auto","important"),null===(n=e.slotElement.parentElement)||void 0===n||n.style.setProperty("height","auto","important"),Or(e.layout))})),Er.CHINATIMES_MAIN=new Er(bn,(e=>{var t,i;const r=e.slotElement.closest(ci.CHINATIMES2);hr(e.playerType)&&(null==r||r.style.setProperty(Ui.CLIP_PATH,"polygon(-5% 0%, 105% 0%, 105% 100%, -5% 100%)","important"),null==r||r.style.setProperty(Ui.CLIP_PATH_KIT,"polygon(-5% 0%, 105% 0%, 105% 100%, -5% 100%)","important"),null===(t=e.container.closest(ci.CHINATIMES))||void 0===t||t.style.setProperty("overflow","unset","important")),e.playerType!==n.TRANSFORMER_STICKY&&e.playerType!==n.TRANSFORMER||(null==r||r.style.setProperty(Ui.CLIP_PATH,"none","important"),null==r||r.style.setProperty(Ui.CLIP_PATH_KIT,"none","important"),null===(i=e.container.closest(".ad"))||void 0===i||i.style.setProperty("z-index","2","important"))}),null,(e=>{var t;null===(t=e.container.querySelector(`#close-button${e.dataCenter.isipIndex}`))||void 0===t||t.style.setProperty("transform","scale(1.2)")}),null,(e=>{var t,n,i,r;if(mr(e.playerType)){e.slotElement.style.setProperty("bottom","120px","important");const s=e.slotElement.querySelector("#follow-control-wrapper0");null===(t=null==s?void 0:s.querySelector("#close-button0"))||void 0===t||t.style.setProperty("right","-24px","important"),null===(n=null==s?void 0:s.querySelector("#close-button0"))||void 0===n||n.style.setProperty("top","-24px","important"),null===(i=null==s?void 0:s.querySelector("#scale-button0"))||void 0===i||i.style.setProperty("right","4px","important"),null===(r=null==s?void 0:s.querySelector("#scale-button0"))||void 0===r||r.style.setProperty("top","4px","important"),e.slotElement.style.setProperty(Ui.CLIP_PATH,"none","important")}})),Er.CHINATIMES_TRUEMII=new Er(Pn,Tr),Er.CHINATIMES_WANTRICH=new Er(jn,Tr),Er.COMMONHEALTH_CLUB=new Er(kn,(e=>{hr(e.playerType)&&(Or(e.layout),e.container.style.setProperty("z-index","0","important"))})),Er.COMMONHEALTH_HEALTH=new Er(Un,(e=>{var t;null===(t=e.slotElement.closest("#parallax-ads"))||void 0===t||t.style.setProperty("display","block","important"),hr(e.playerType)&&(Or(e.layout),e.container.style.zIndex="50")}),null,null,(e=>{var t;null===(t=e.slotElement.closest("#parallax-ads"))||void 0===t||t.style.setProperty("display","block","important")})),Er.HEARST_WOMENHEALTH=new Er(Bn,Nr,Nr,Nr),Er.HEARST_ELLE=new Er(Fn,Nr,Nr,Nr),Er.HEARST_COPO=new Er(Hn,Nr,Nr,Nr),Er.CNYES_MOBILE=new Er(Vn,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","3","important")}),null,null,null,Ir),Er.CNYES_NEWS=new Er(zn,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","3","important")}),null,null,null,Ir),Er.ETTODAY_MAIN=new Er(Yn,(()=>{})),Er.ETTODAY_NEWS=new Er(Wn,null,(e=>{e.slotElement.style.zIndex="999999999"})),Er.EBC_EBCBUZZ=new Er(Gn,(e=>{var t,i,r,s,o,a;e.slotElement.style.setProperty(Ui.MARGIN_LEFT,"unset","important"),e.slotElement.style.setProperty("margin-right","unset","important");const l=top.window.innerWidth,d=.5625*l,c=l/640*.94;hr(e.playerType)||(e.slotElement.style.setProperty("max-width",.94*l+"px","important"),e.playerType===n.TRANSFORMER_SOCIAL&&(null===(t=e.layout.banner[1])||void 0===t||t.bannerImg.element.style.setProperty("transform",`scale(${c})`,"important"),null===(i=e.layout.uiController)||void 0===i||i.style.setProperty("width",.94*l+"px","important"),null===(r=e.layout.uiController)||void 0===r||r.style.setProperty("height",.94*l+"px","important")),e.playerType===n.BNB&&(e.layout.logoButton.element.style.setProperty("max-width",76*c+"px"),e.layout.logoButton.element.style.setProperty(Ui.MAX_HIGTH,64*c+"px"),null===(s=e.layout.banner[0])||void 0===s||s.element.style.setProperty(Ui.MAX_HIGTH,.94*d+"px","important")),null===(o=e.layout.videoContainer)||void 0===o||o.style.setProperty("max-width",.94*l+"px","important"),null===(a=e.layout.videoContainer)||void 0===a||a.style.setProperty(Ui.MAX_HIGTH,.94*l+"px","important"))})),Er.EBC_HOUSE=new Er(Qn,(()=>{})),Er.EBC_FNC=new Er(Xn,_r),Er.EBC_MAIN=new Er(Kn,_r),Er.GVM_HEALTH=new Er(Jn,null,(e=>{e.slotElement.style.marginBottom="50px"})),Er.LTN_MAIN=new Er(ti,(e=>{var t;e.container&&(e.container.style.zIndex="0"),hr(e.playerType)&&(e.layout.underlayContainer&&(e.layout.underlayContainer.style.zIndex="999"),e.playerType.indexOf("PAGE")>-1&&(null===(t=e.layout.closeButton)||void 0===t||t.element.style.setProperty("transform","scale(1.2)","important")))}),(e=>{e.container.style.zIndex="997"}),null,null,(e=>{var n;if(mr(e.playerType)&&(e.container.style.left="unset",e.container.style.bottom="0px",e.container.style.right="0px",e.container.style.align="right bottom"),e.playMode===t.IN_STREAM)try{e.slotElement.parentElement.parentElement.parentElement.parentElement.style.textAlign="center"}catch(e){null===(n=document.getElementById("ad-K11"))||void 0===n||n.style.setProperty("text-align","center")}})),Er.NOWNEWS_MAIN=new Er(ni,(e=>{Ar(e.layout),Cr(e)}),(e=>{e.slotElement.style.zIndex="5999"}),(e=>{Ar(e.layout)}),null,(e=>{mr(e.playerType)&&(e.container.style.bottom="100px")})),Er.NOWNEWS_DEMO=new Er(ii,(()=>{})),Er.PARENTING_MAIN=new Er(ri,(e=>{hr(e.playerType)&&(e.layout.underlayContainer.style.setProperty("z-index","4","important"),Or(e.layout))})),Er.TECHBANG_MAIN=new Er(oi,(e=>{var t;null===(t=e.layout.underlayContainer)||void 0===t||t.style.setProperty("z-index","99","important")})),Er.TECHBANG_MF=new Er(ai,(e=>{Ar(e.layout)}),(e=>{Ar(e.layout)})),Er.TECHBANG_DIGIPHOTO=new Er(li,(e=>{var t,n;e.layout.player&&(null===(n=null===(t=e.layout.player)||void 0===t?void 0:t.muteButton._button)||void 0===n||n.element.style.setProperty("padding","0","important"))})),Er.PIXNET_MAIN=new Er(di,(e=>{var t,n,i,r,s,o,a,l,d;const c=e.layout.player;null===(t=e.layout.slotTag.closest(ci.PIXNET_IR))||void 0===t||t.style.setProperty("width","100%","important"),null===(n=e.layout.slotTag.closest(ci.PIXNET_IR))||void 0===n||n.style.setProperty("display","block","important"),null===(i=e.layout.slotTag.closest(ci.PIXNET))||void 0===i||i.style.setProperty("width","100%","important"),null===(r=e.layout.slotTag.closest(ci.PIXNET))||void 0===r||r.style.setProperty("display","block","important"),e.slotElement.style.setProperty("z-index","99998","important"),c&&(null===(s=null==c?void 0:c.muteButton._button)||void 0===s||s.element.style.setProperty("background","none","important"),null===(o=null==c?void 0:c.muteButton._button)||void 0===o||o.element.style.setProperty("border","none","important"),null==c||c.muteButton.element.style.setProperty("background","none","important"),null==c||c.muteButton.element.style.setProperty("border","none","important")),hr(e.playerType)&&(null===(d=null===(l=null===(a=e.slotElement.parentElement.parentElement)||void 0===a?void 0:a.parentElement)||void 0===l?void 0:l.parentElement)||void 0===d||d.style.setProperty("height","inherit","important"),Or(e.layout))}),(e=>{e.container.style.setProperty("margin-bottom","45px","important"),e.container.style.setProperty("z-index","99999","important")}),(()=>{const e=top.window.document.querySelector("body");null==e||e.style.setProperty("position","absolute","important")}),(e=>{var t,n,i;const r=e.slotElement;null===(t=r.closest(ci.PIXNET_IR))||void 0===t||t.style.setProperty("width","100%","important"),null===(n=r.closest(ci.PIXNET))||void 0===n||n.style.setProperty("width","100%","important"),null===(i=r.closest(".in-read-ad-sticky-wrapper"))||void 0===i||i.style.setProperty("width","unset","important"),e.container.style.setProperty("width","100%","important")}),(e=>{var t,n;const i=null===(n=null===(t=e.slotElement.parentNode)||void 0===t?void 0:t.parentNode)||void 0===n?void 0:n.parentNode;null==i||i.style.setProperty("width","100%","important"),null==i||i.style.setProperty("height","auto","important")})),Er.OPENNEWS=new Er(qt,Cr),Er.FULLFEN=new Er(Mt,Cr),Er.MOMBABY=new Er(Ht,Cr),Er.PANSCI=new Er(Zt,Cr),Er.MING=new Er(Bt,Cr),Er.GQ=new Er(_t,Cr);function Ar(e){var t;null===(t=e.logoButton)||void 0===t||t.element.style.setProperty("border","none","important")}function vr(e){e.container.style.left="unset",e.container.style.bottom="0px",e.container.style.right="0px",e.container.style.align="right bottom"}function Or(e){e.fixedContainer&&(e.fixedContainer.style.transform="scale(0.9)")}class fr{static exec_array_of_functions(e){let t="";if("object"!=typeof e)throw new Error("funcs not an array object");for(const n of e)t+=n();return t}static to_js_style(e){let t=e.toLowerCase();t=t.split("-");let n=t[0];for(let e=1;e<t.length;e++){const i=t[e];n+=i[0].toUpperCase()+i.substr(1)}return n}static createElement(e){const t=document.createElement(e.type);if(t.id=e.id,fr.apply_css(t,e.styles),e.attr){const n=e.attr;for(const e in n)t.setAttribute(e,n[e])}return t}static apply_css(e,t){for(const n in t)"width"===n||"height"===n||"margin"===n||"text-align"===n||"max-width"===n||"background"===n||"border"===n||"min-width"===n?e.style.setProperty(n,t[n],"important"):e.style.setProperty(n,t[n])}static get_css(e){const t={},n=e.style;for(const e of n)t[e]=n[fr.to_js_style(e)];return t}static applyImgInitCss(e){const t={width:"100% ",height:"100%",left:"0",top:"0","max-width":"none",margin:"initial",padding:"initial",border:"0px",background:"none"};for(const n in t)e.style.setProperty(n,t[n],"important")}static ajax(e){const t=new or,n=new XMLHttpRequest,i=void 0===e.async||e.async,r=e.method||"get",s=e.success||function(){},o=e.url;let a,l=e.parameters||null;if("string"!=typeof o)throw new Error("AJAX url error");if(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){const e=new DOMParser;a=e.parseFromString(n.responseText,"text/xml"),t.complete(a),s(a)}},null!==l){l="";for(const t in e.parameters)l+=`${t}=${e.parameters[t]}&`;l=l.substr(l,l.length-1)}return n.open(r,o,i),"post"===r&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(l),t}static post(e,t,n){fr.ajax({url:e,method:"post",parameters:t,success:n})}static get_script(e,t){const n=document,i=new or,r=n.createElement("script");if(r.async=!0,r.type="text/javascript",r.src=e,r.onload=function(){i.complete(e+"_ready")},void 0===t){const e=n.getElementsByTagName("script")[0];e.parentNode.insertBefore(r,e.nextSibling)}else t.appendChild(r);return i}static checkSpriteSheetFileExist(e,t,n){const i=e.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0],r=new XMLHttpRequest,s=t.files_index.split("/"),o=`//${i}/sites/default/files/video_converted/${t.hash}/${s[s.length-1]}_001.jpeg`;r.open("HEAD",o,!0),r.onload=function(){let e;e=200===r.status,n(e)},r.send()}static getMobileSizeCheckerParams(e,t){return{elements:[e.layout.container?e.layout.container:e.layout.underlayContainer],playMode:t.play_mode,playerType:t.player_type,hasBanner:e.layout.banner}}static getCustomClientElement(e){switch(e.type){case"id":return document.getElementById(e.name);case"class":return document.getElementsByClassName(e.name)[0];case"tag":return document.getElementsByTagName(e.name)[0];default:return null}}static checkUrlIsAvaliable(e){return null!==e&&"null"!==e&&""!==e&&void 0!==e&&e.indexOf("//")>-1}static isPopupBlocked(e){return!e||void 0===e||void 0===e.closed||e.closed}static openUrl(e,t){let n;if(e)if(t.isUseAssign)window.location.assign(e);else if(pi.getInstance().isMobile)if(/^http/.exec(e)){if(t.isSafeFrame||t.isVpaidParam||[Zn,qn].some((e=>location.host.includes(e))))n=window.open(e,"_blank");else if(1000470===t.uid){n=-1!==navigator.userAgent.toLowerCase().indexOf("iphone")?window.open(e,"_top"):window.open(e,"_blank")}else n=window.open(e,"_parent");fr.isPopupBlocked(n)&&!sr.isSafeFrame&&window.location.assign(e)}else window.location.assign(e);else if(t.isVpaidParam)window.open(e,"_blank");else try{top.open(e,"_blank")}catch(t){window.open(e,"_blank")}}static throttle(e,t=10,n=!0,i=!0){let r;const s=()=>{r=null,i&&e()};return()=>{r||(n&&e(),r=setTimeout(s,t))}}static setAutoClearInterval(e,t){const n=window.setInterval((()=>{try{e(n)}catch(e){clearInterval(n)}}),t)}static getJSON(e){return e&&""!==e?new ar(((t,n)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.addEventListener("load",(()=>{if(i.readyState===i.DONE&&200===i.status){const e=JSON.parse(i.response);t(e)}})),i.addEventListener("error",(()=>n(new Error("poster json request fail")))),i.send()})):null}static isValid(e){return"null"===e||null==e||""===e?{valid:!1}:{valid:!0,value:e}}static getSlotCheckFunctionWithPercentage(e){return t=>{const n=t.getBoundingClientRect().top,i=t.getBoundingClientRect().bottom,r=t.clientHeight*e;return Math.abs(n)<=window.innerHeight-r&&i>=r}}static pageHeightInformation(e){let n=0,i=0,r=0;if(pi.getInstance().scopeInfo.isBlockedBySameOriginPolicy){if(e.isSafeFrame&&e.hasSfGeomApi){const e=cr.getInstance().sf.ext.geom();n=e.self.t,i=e.self.t+e.self.h+e.self.b}}else{const r=top.document.body,s=top.document.documentElement;let o;i=Math.max(r.scrollHeight,r.offsetHeight,r.clientHeight,s.scrollHeight,s.offsetHeight,s.clientHeight),e.playMode===t.MIC||e.playMode===t.MFS||e.playMode===t.CTV_CREATIVE?n=e.layout.container.parentElement.offsetTop:(o=e.slotElement,n=fr.slotOffsetTop(o))}return r=n>0&&i>0?Math.round(n/i*100):0,{slotHeight:n,pageHeight:i,positionPercentage:r}}static slotOffsetTop(e){let t=e.offsetTop,n=0;for(;e&&e!==top.document.body&&n<=10;)n++,t=(e=e.offsetParent)?t+e.offsetTop:t;return null==t&&(t=0),t}static getElementExposureRatio(e,t,n){let i;return i=e<=n?e/t:1-(e-n)/t,(i>1||i<0)&&(i=i>1?1:0),i}static setBaseStyles(e){fr.apply_css(e,{border:"0",margin:"0",padding:"0",display:"initial","margin-bottom":"0"})}static verifyTop(e){let i,r=10;const s=window.location.host;if(s.indexOf(Yn)>-1&&(r=600),this.dataCenter.playerType===n.BOTTOM||this.dataCenter.playerType===n.BOTTOM_CLASSIC)r=150;else if(this.dataCenter.playMode===t.MFS)switch(!0){case s.indexOf(Kn)>-1:case s.indexOf(Xn)>-1:case s.indexOf(Gn)>-1:case s.indexOf(Qn)>-1:case 1000470===this.dataCenter.uid:case s.indexOf(en)>-1:r=0;break;case s.indexOf(si)>-1:r=.33*fr.pageHeightInformation(this.dataCenter).pageHeight;break;default:r=1}else if(this.dataCenter.playerType===n.BOTTOM_FLASH_V2||this.dataCenter.playerType===n.BOTTOM_FLASH_BANNER||this.dataCenter.playerType===n.BOTTOM_FLASH_VIDEO||this.dataCenter.playerType===n.BOTTOM_FLASH_CARD||this.dataCenter.playerType===n.BOTTOM_HIT||this.dataCenter.playerType===n.BOTTOM_HIT_VIDEO)switch(!0){case s.indexOf(Kn)>-1:case s.indexOf(Xn)>-1:case s.indexOf(Gn)>-1:r=450}(this.dataCenter.appearOpening||this.dataCenter.playMode===t.CTV_CREATIVE)&&(r=0),fr.setAutoClearInterval(function(t){switch(!0){case s.indexOf(Jt)>-1:i=document.getElementById("__next")||document.getElementsByClassName("content")[0]||document.getElementById("headerMenuRoot");break;case s.indexOf(hn)>-1:i=document.getElementsByClassName("jeg_navbar_mobile_wrapper")[0];break;case s.indexOf(Wn)>-1:i=document.getElementsByClassName("article-container")[0];break;case s.indexOf(jt)>-1:i=document.getElementsByClassName("jeg_viewport")[0];break;default:i=top.document.firstElementChild}i||(i=top.document.firstElementChild);const n=-1*i.getBoundingClientRect().top;let o;o=Math.abs(n)>=r,e(o,t)}.bind(this),500)}static setPixnetMeasure(e){const t=e.tagName;"DIV"===t?e.setAttribute("data-falcon-ad-container",""):"VIDEO"===t||"CANVAS"===t?e.setAttribute("data-falcon-ad-video",""):e.setAttribute("data-falcon-ad","")}static createObserver(e,t,n){n=n||{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]};const i=new IntersectionObserver(t,n);return i.observe(e),i}static checkObserverSupport(){let e=!1;return window.IntersectionObserver&&window.IntersectionObserverEntry&&(e=!0),e}static slideDirection(e,t,n,i,r){e.addEventListener("touchstart",(function(t){e!==window&&t.preventDefault();const i=function(e){return e.touches||e.originalEvent.touches}(t)[0];a=i.clientX,l=i.clientY,null==n||n(o,s)}),!1),e.addEventListener("touchmove",(function(e){if(!a||!l)return;const t=e.touches[0].clientX,n=e.touches[0].clientY,r=a-t,d=l-n;Math.abs(r)>Math.abs(d)?(r>.35&&(o.isRight=!1,o.isLeft=!0),r<-.35&&(o.isLeft=!1,o.isRight=!0)):d>.1?(o.isUp=!1,o.isDown=!0):(o.isUp=!0,o.isDown=!1);a=null,l=null,null==i||i(o,s)}),!1),e.addEventListener("touchend",(function(t){e!==window&&t.preventDefault();null==r||r(o,s)}),!1);const s=t,o={isLeft:!1,isRight:!1,isUp:!1,isDown:!1};let a=null,l=null}static thoroughHideElement(e){e.css({display:"none","pointer-events":"none",opacity:"0"})}static setIframeScale(e,n,i,r,s){return e===t.IR?(i.width=0!==n.offsetWidth?Math.min(n.offsetWidth,i.width||r.width):i.width||r.width,s=Math.min(i.width/r.width,i.height/r.height)):s=Math.min(i.width/r.width,i.width/r.height),s}static assignEventKeyValue(e,t,n){const i=new RegExp(`(\\?|\\&)${t}=([^&?]+|)`,"g");return e=e.replace(i,`$1${t}=${encodeURIComponent(n)}`)}static usePlayerComponents(e){switch(e){case n.TRANSFORMER_300X250:case n.TRANSFORMER_320X480:case n.DSP_VIDEO_ONLY_300X250:return!1;default:return!0}}static getIrTagAbsTop(e){try{return Math.abs(top.document.getElementById(e.id).getBoundingClientRect().top+top.scrollY)}catch(t){return Math.abs(e.getBoundingClientRect().top+top.scrollY)}}static send(e,t,n){t=JSON.stringify(t);let i="https://onead.onevision.com.tw/v2/push?"+fr.to_param({host:"https://onead.onevision.com.tw",event:"7000",dt:(new Date).getTime()||"",p1:e.uid||"",p2:e.guid||"",p3:window.location.href||"",p4:document.title||"",p5:document.referrer||"",p6:e.fp||"",p7:"",pub:"",acc:"",vendor:"",action:"ent",eng:t,enc:e.enc,adid:"",cu1:"",cu2:"",cu3:"",cu4:"",utm_source:"",utm_medium:"",utm_campaign:"",utm_term:"",utm_content:"",ssid:fr.getSSId()});1===n&&(i+="&exclude=1"),fr.sendHttpRequestToServer(i)}static getSSId(){const e=new Date,t=e.getMilliseconds();return(100*(3600*e.getHours()+60*e.getMinutes()+e.getSeconds())+t).toString(36)}static to_param(e){const t=[];if(void 0===e.length)for(const n in e)if(e[n]&&e[n].constructor===Array)for(const i of e[n]){let e=i;isNaN(e)&&(e=encodeURIComponent(i)),t[t.length]=`${encodeURIComponent(n+"[]")}=${e}`}else t[t.length]=`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`;return t.join("&").replace(/%20/g,"+")}static sendHttpRequestToServer(e,t){if(void 0!==e&&""!==e&&e.indexOf("//")>-1){(new Image).src=e}else t&&"function"==typeof t&&t("reporting url error: "+e)}static sendRequestToServerByFetch(e,t){void 0!==e&&""!==e&&e.indexOf("//")>-1?fetch(e).then((e=>e)).catch((e=>{})):t&&"function"==typeof t&&t("reporting url error: "+e)}static isPhoneModel(e){const t={IPhone11:{width:414,height:896},IPhone11Pro:{width:375,height:812},IPhone11ProMax:{width:414,height:896},IPhone12:{width:390,height:844},IPhone12Mini:{width:360,height:780},IPhone12Pro:{width:390,height:844},IPhone12ProMax:{width:428,height:926},IPhone13:{width:390,height:844},IPhone13Mini:{width:360,height:780},IPhone13Pro:{width:390,height:844},IPhone13ProMax:{width:428,height:926},IPhone14:{width:390,height:844},IPhone14Plus:{width:428,height:926},IPhone14Pro:{width:393,height:852},IPhone14ProMax:{width:430,height:932}}[e],{innerWidth:n,innerHeight:i}=top.window;return n===t.width&&i===t.height}static buildIasWrapper(e,i,r){var s,o;let a;if(a=r===mi.ONEAD_IAS_NESTLE?{id:e[1],width:"100px",height:"100px",positionType:i.dataCenter.playMode===t.MIC?"bottom":"top",range:i.dataCenter.playMode===t.MIC?"10%":"50%",left:"50%",imgWidth:"100px",imgHeight:"100px"}:{id:e[1],width:e[2],height:i.dataCenter.playerType.indexOf(n.TRANSFORMER)>-1?"100%":e[3],positionType:e[4],range:e[5],left:e[6],imgWidth:e[7],imgHeight:i.dataCenter.playerType.indexOf(n.TRANSFORMER)>-1?"100%":e[8]},!document.getElementById(r+i.dataCenter.isipIndex)){const e=document.createElement("div");e.id=r+i.dataCenter.isipIndex;const t={position:"absolute",width:a.width,height:a.height,left:a.left,top:"",bottom:"",opacity:"0","z-index":"-1"};"top"===a.positionType?t.top=a.range:t.bottom=a.range,fr.apply_css(e,t);const n=document.createElement("img");n.src="https://ad-specs.guoshipartners.com/static/images/1x1_pixel.png",n.id="ias-imp"+i.dataCenter.isipIndex;const l={width:a.imgWidth,height:a.imgHeight,opacity:"0"};fr.apply_css(n,l),e.appendChild(n);const d=document.createElement("script");d.type="application/javascript",d.async=!0,d.src=a.id,e.appendChild(d),(null===(s=i.dataCenter.layout.fixedContainer)||void 0===s?void 0:s.appendChild(e))||null===(o=i.dataCenter.layout.container)||void 0===o||o.appendChild(e)}}}fr.checkSlotWithRateOfViewable=fr.getSlotCheckFunctionWithPercentage(Fe),fr.checkSlotWithRateOfVideoStart=fr.getSlotCheckFunctionWithPercentage(He);let Sr=null;const wr={data:{},length:0,getItem(e){return this.data[e]},setItem(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem(e){delete this.data[e],this.length=Object.keys(this.data).length},clear(){this.data={},this.length=0}};class Rr{constructor(){this.storage=this.initStorage()}initStorage(){if(Sr)return Sr;try{Sr="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){Sr=null}return Sr&&!this.isStorageDisabled(Sr)||(Sr=wr,Sr.clear()),Sr}isStorageDisabled(e){const t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}getItem(e){return this.storage.getItem(e)}setItem(e,t){return this.storage.setItem(e,t)}removeItem(e){return this.storage.removeItem(e)}clear(){return this.storage.clear()}}function xr(e={}){return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}const Dr=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function br(e,t={},n={}){const i=[],r=kr(e);!t.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=Hr(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING;for(const e in t)t[e]=Fr(t[e]);for(const e in r){const n=r[e];"string"==typeof n&&i.push(Pr(n,t))}return i}function Pr(e,t){const n=(e=jr(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;let i=n.filter((e=>Dr.indexOf(e)>-1));return 0===i.length?e:(i=i.reduce(((e,t)=>(e[t]=-1,e)),{}),jr(e,i))}function jr(e,t){let n=e;for(const e in t){const i=t[e];n=n.replace(new RegExp(`(?:\\[|%%)(${e})(?:\\]|%%)`,"g"),i)}return n}function kr(e){return Array.isArray(e)?e.map((e=>e&&e.hasOwnProperty("url")?e.url:e)):e}function Ur(e,t){for(let n=0;n<t.length;n++)if(Br(t[n],e))return!0;return!1}function Br(e,t){if(e&&t){const n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);return n.length===i.length&&(e.id===t.id&&e.url===t.url)}return!1}function Fr(e){return encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16)}`))}function Hr(e,t=8){const n=String(e);return n.length<t?Vr(0,t-n.length,!1).map((()=>"0")).join("")+n:n}function Vr(e,t,n){const i=[],r=e<t,s=n?r?t+1:t-1:t;for(let t=e;r?t<s:t>s;r?t++:t--)i.push(t);return i}const zr={track:function(e,t,n){br(e,t,n).forEach((e=>{if("undefined"!=typeof window&&null!==window){(new Image).src=e}}))},resolveURLTemplates:br,extractURLsFromTemplates:kr,containsTemplateObject:Ur,isTemplateObjectEqual:Br,encodeURIComponentRFC3986:Fr,replaceUrlMacros:Pr,leftpad:Hr,range:Vr,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce(((t,n)=>t.concat(Array.isArray(n)?e(n):n)),[])},joinArrayOfUniqueTemplateObjs:function(e=[],t=[]){const n=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[];return n.concat(i).reduce(((e,t)=>(Ur(t,e)||e.push(t),e)),[])}};function Yr(e){return-1!==["true","TRUE","True","1"].indexOf(e)}const Wr={childByName:function(e,t){const n=e.childNodes;for(const e in n){const i=n[e];if(i.nodeName===t)return i}},childrenByName:function(e,t){const n=[],i=e.childNodes;for(const e in i){const r=i[e];r.nodeName===t&&n.push(r)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){const{protocol:t}=location;return`${t}${e}`}if(-1===e.indexOf("://")){return`${t.slice(0,t.lastIndexOf("/"))}/${e}`}return e},parseBoolean:Yr,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){const i=t.getAttribute(e);i&&n.setAttribute(e,i)},parseAttributes:function(e){const t=e.attributes,n={};for(let e=0;e<t.length;e++)n[t[e].nodeName]=t[e].nodeValue;return n},parseDuration:function(e){if(null==e)return-1;if(zr.isNumeric(e))return parseInt(e);const t=e.split(":");if(3!==t.length)return-1;const n=t[2].split(".");let i=parseInt(n[0]);2===n.length&&(i+=parseFloat(`0.${n[1]}`));const r=60*parseInt(t[1]),s=60*parseInt(t[0])*60;return isNaN(s)||isNaN(r)||isNaN(i)||r>3600||i>60?-1:s+r+i},splitVAST:function(e){const t=[];let n=null;return e.forEach(((i,r)=>{if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){const t=e[r-1];if(t&&t.sequence===i.sequence-1)return void(n&&n.push(i));delete i.sequence}n=[i],t.push(n)})),t},assignAttributes:function(e,t){if(e)for(const n in e){const i=e[n];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){let e=i.nodeValue;"boolean"==typeof t[i.nodeName]&&(e=Yr(e)),t[i.nodeName]=e}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[...e.viewableImpression,...t.viewableImpression]),e.followAdditionalWrappers=t.followAdditionalWrappers,e.fallbackOnNoAd=t.fallbackOnNoAd;const n=(t.creatives.banner||[]).filter((e=>e&&"companion"===e.type)),i=n.reduce(((e,t)=>((t.variations||[]).forEach((t=>{(t.companionClickTrackingURLTemplates||[]).forEach((t=>{zr.containsTemplateObject(t,e)||e.push(t)}))})),e)),[]);e.creatives.banner=e.creatives.banner.concat(n);const r=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,s=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.banner.forEach((e=>{if(t.trackingEvents&&t.trackingEvents[e.type])for(const n in t.trackingEvents[e.type]){const i=t.trackingEvents[e.type][n];Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(i)}"linear"===e.type&&(r&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),s&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&i.length&&(e.variations||[]).forEach((e=>{e.companionClickTrackingURLTemplates=zr.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,i)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function Gr(e,t){const n=function(e={}){const{id:t,adId:n,sequence:i,apiFramework:r}=xr(e);return{id:t,adId:n,sequence:i,apiFramework:r,type:"companion",required:null,variations:[]}}(t);return n.required=e.getAttribute("required")||null,n.variations=Wr.childrenByName(e,"Companion").map((e=>{const t=function(e={}){return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickThroughURLTemplates:[],companionClickTrackingURLTemplates:[],trackingEvents:{}}}(Wr.parseAttributes(e));t.htmlResources=Wr.childrenByName(e,"HTMLResource").reduce(((e,t)=>{const n=Wr.parseNodeText(t);return n?e.concat(n):e}),[]),t.iframeResources=Wr.childrenByName(e,"IFrameResource").reduce(((e,t)=>{const n=Wr.parseNodeText(t);return n?e.concat(n):e}),[]),t.staticResources=Wr.childrenByName(e,"StaticResource").reduce(((e,t)=>{const n=Wr.parseNodeText(t);return n?e.concat({url:n,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=Wr.parseNodeText(Wr.childByName(e,"AltText"))||null;const n=Wr.childByName(e,"TrackingEvents");n&&Wr.childrenByName(n,"Tracking").forEach((e=>{const n=e.getAttribute("event"),i=Wr.parseNodeText(e);n&&i&&(Array.isArray(t.trackingEvents[n])||(t.trackingEvents[n]=[]),t.trackingEvents[n].push(i))})),t.companionClickTrackingURLTemplates=Wr.childrenByName(e,"CompanionClickTracking").map((e=>({id:e.getAttribute("id")||null,url:Wr.parseNodeText(e)}))),t.companionClickThroughURLTemplate=Wr.parseNodeText(Wr.childByName(e,"CompanionClickThrough"))||null,t.companionClickThroughURLTemplates=Wr.childrenByName(Wr.childByName(e,"CompanionClickThroughs"),"CompanionClickThrough").map((e=>Wr.parseNodeText(e)));const i=Wr.childByName(e,"AdParameters");return i&&(t.adParameters=Wr.parseNodeText(i),t.xmlEncoded=i.getAttribute("xmlEncoded")||null),t})),n}function Qr(e,t){let n;const i=function(e={}){const{id:t,adId:n,sequence:i,apiFramework:r}=xr(e);return{id:t,adId:n,sequence:i,apiFramework:r,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);i.duration=Wr.parseDuration(Wr.parseNodeText(Wr.childByName(e,"Duration")));const r=e.getAttribute("skipoffset");if(null==r)i.skipDelay=null;else if("%"===r.charAt(r.length-1)&&-1!==i.duration){const e=parseInt(r,10);i.skipDelay=i.duration*(e/100)}else i.skipDelay=Wr.parseDuration(r);const s=Wr.childByName(e,"VideoClicks");if(s){const e=Wr.childByName(s,"ClickThrough");i.videoClickThroughURLTemplate=e?{id:e.getAttribute("id")||null,url:Wr.parseNodeText(e)}:null,Wr.childrenByName(s,"ClickTracking").forEach((e=>{i.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:Wr.parseNodeText(e)})})),Wr.childrenByName(s,"CustomClick").forEach((e=>{i.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:Wr.parseNodeText(e)})}))}const o=Wr.childByName(e,"AdParameters");return o&&(i.adParameters=Wr.parseNodeText(o)),Wr.childrenByName(e,"TrackingEvents").forEach((e=>{Wr.childrenByName(e,"Tracking").forEach((e=>{let t=e.getAttribute("event");const r=Wr.parseNodeText(e);if(t&&r){if("progress"===t){if(n=e.getAttribute("offset"),!n)return;t="%"===n.charAt(n.length-1)?`progress-${n}`:`progress-${Math.round(Wr.parseDuration(n))}`}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r)}}))})),Wr.childrenByName(e,"MediaFiles").forEach((e=>{Wr.childrenByName(e,"MediaFile").forEach((e=>{i.mediaFiles.push(function(e){const t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=Wr.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);const n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=Wr.parseBoolean(n));const i=e.getAttribute("maintainAspectRatio");i&&"string"==typeof i&&(t.maintainAspectRatio=Wr.parseBoolean(i));return t}(e))}))})),i}function Xr(e){const t=[];return e.forEach((e=>{const n=Kr(e);n&&t.push(n)})),t}function Kr(e){if("#comment"===e.nodeName)return null;const t={name:null,value:null,attributes:{},children:[]},n=e.attributes,i=e.childNodes;if(t.name=e.nodeName,e.attributes)for(const e in n)if(n.hasOwnProperty(e)){const i=n[e];i.nodeName&&i.nodeValue&&(t.attributes[i.nodeName]=i.nodeValue)}for(const e in i)if(i.hasOwnProperty(e)){const n=Kr(i[e]);n&&t.children.push(n)}if(0===t.children.length||1===t.children.length&&["#cdata-section","#text"].indexOf(t.children[0].name)>=0){const n=Wr.parseNodeText(e);""!==n&&(t.value=n),t.children=[]}return null===(r=t).value&&0===Object.keys(r.attributes).length&&0===r.children.length?null:t;var r}function qr(e){const t={banner:[],video:[],isVpaid:!1,hasVideo:null,vpaidParam:null};return e.forEach((e=>{const n={id:e.getAttribute("id")||null,adId:Zr(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},i=[];let r;Wr.childrenByName(e,"UniversalAdId").forEach((e=>{const t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:Wr.parseNodeText(e)};i.push(t)}));const s=Wr.childByName(e,"CreativeExtensions");s&&(r=Xr(Wr.childrenByName(s,"CreativeExtension")));for(const s in e.childNodes){const o=e.childNodes[s];let a;switch(o.nodeName){case"Linear":a=Qr(o,n);break;case"CompanionAds":a=Gr(o,n)}a&&(i&&(a.universalAdIds=i),r&&(a.creativeExtensions=r),"linear"===a.type?(a.mediaFiles[0]&&a.mediaFiles[0].apiFramework&&"VPAID"===a.mediaFiles[0].apiFramework.toUpperCase()&&(t.isVpaid=!0,t.vpaidParam=a.adParameters),t.video.push(a),t.hasVideo=!0):t.banner.push(a))}})),t}function Zr(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}const Jr={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function $r(e,t){if(!Jr[e.nodeName]||!Jr[e.nodeName].attributes)return;const n=Jr[e.nodeName].attributes.filter((t=>!e.getAttribute(t)));n.length>0&&ns({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n,subElements:void 0,oneOfResources:void 0},t)}function es(e,t,n){const i=Jr[e.nodeName],r=!n&&"Wrapper"!==e.nodeName;if(!i||r)return;if(i.subElements){const n=i.subElements.filter((t=>!Wr.childByName(e,t)));n.length>0&&ns({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:n,attributes:void 0,oneOfResources:void 0},t)}if(!n||!i.oneOfinLineResources)return;i.oneOfinLineResources.some((t=>Wr.childByName(e,t)))||ns({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:void 0,subElements:void 0,oneOfResources:i.oneOfinLineResources},t)}function ts(e){return e.children&&0!==e.children.length}function ns({name:e,parentName:t,attributes:n,subElements:i,oneOfResources:r},s){let o=`Element '${e}'`;o+=n?` missing required attribute(s) '${n.join(", ")}' `:i?` missing required sub element(s) '${i.join(", ")}' `:r?` must provide one of the following '${r.join(", ")}' `:" is empty",s("VAST-warning",{message:o,parentElement:t,specVersion:4.1})}const is={verifyRequiredValues:function e(t,n,i){if(t&&t.nodeName)if("InLine"===t.nodeName&&(i=!0),$r(t,n),ts(t)){es(t,n,i);for(let r=0;r<t.children.length;r++)e(t.children[r],n,i)}else 0===Wr.parseNodeText(t).length&&ns({name:t.nodeName,parentName:t.parentNode.nodeName,attributes:void 0,subElements:void 0,oneOfResources:void 0},n)},hasSubElements:ts,emitMissingValueWarning:ns,verifyRequiredAttributes:$r,verifyRequiredSubElements:es};function rs(e,t,{followAdditionalWrappers:n}){n=n||void 0;const i=e.childNodes;for(const r in i){const s=i[r];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==n)){if(Wr.copyNodeAttribute("id",e,s),Wr.copyNodeAttribute("sequence",e,s),Wr.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:as(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:ss(s,t),type:"INLINE"}}}}function ss(e,t){return os(e,t)}function os(e,t){let n=[];t&&is.verifyRequiredValues(e,t);const i=e.childNodes,r=function(e={}){return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:{banner:[],video:[],isVpaid:!1,hasVideo:null,vpaidParam:null},extensions:[],adVerifications:[]}}(Wr.parseAttributes(e));for(const e in i){const t=i[e];switch(t.nodeName){case"Error":r.errorURLTemplates.push(Wr.parseNodeText(t));break;case"Impression":r.impressionURLTemplates.push({id:t.getAttribute("id")||null,url:Wr.parseNodeText(t)});break;case"Creatives":r.creatives=qr(Wr.childrenByName(t,"Creative"));break;case"Extensions":{const e=Wr.childrenByName(t,"Extension");r.extensions=Xr(e),r.adVerifications.length||(n=cs(e));break}case"AdVerifications":r.adVerifications=ds(Wr.childrenByName(t,"Verification"));break;case"AdSystem":r.system={value:Wr.parseNodeText(t),version:t.getAttribute("version")||null};break;case"AdTitle":r.title=Wr.parseNodeText(t);break;case"ViewableImpression":r.viewableImpression.push(us(t));break;case"Description":r.description=Wr.parseNodeText(t);break;case"Advertiser":r.advertiser={id:t.getAttribute("id")||null,value:Wr.parseNodeText(t)}}}return r}function as(e,t){const n=os(e,t);e.getAttribute("followAdditionalWrappers"),e.getAttribute("fallbackOnNoAd");let i=Wr.childByName(e,"VASTAdTagURI");i?n.nextWrapperURL=Wr.parseNodeText(i):(i=Wr.childByName(e,"VASTAdTagURL"),i&&(n.nextWrapperURL=Wr.parseNodeText(Wr.childByName(i,"URL"))));for(const e in n.creatives)n.creatives[e]&&"object"==typeof n.creatives[e]&&ls(n,n.creatives[e]);if(n.nextWrapperURL)return n}function ls(e,t){t.forEach((t=>{if(-1!==["linear","nonlinear"].indexOf(t.type)){if(t.trackingEvents){e.trackingEvents||(e.trackingEvents={}),e.trackingEvents[t.type]||(e.trackingEvents[t.type]={});for(const n in t.trackingEvents){const i=t.trackingEvents[n];Array.isArray(e.trackingEvents[t.type][n])||(e.trackingEvents[t.type][n]=[]),i.forEach((i=>{e.trackingEvents[t.type][n].push(i)}))}}t.videoClickTrackingURLTemplates&&(Array.isArray(e.videoClickTrackingURLTemplates)||(e.videoClickTrackingURLTemplates=[]),t.videoClickTrackingURLTemplates.forEach((t=>{e.videoClickTrackingURLTemplates.push(t)}))),t.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate),t.videoCustomClickURLTemplates&&(Array.isArray(e.videoCustomClickURLTemplates)||(e.videoCustomClickURLTemplates=[]),t.videoCustomClickURLTemplates.forEach((t=>{e.videoCustomClickURLTemplates.push(t)})))}}))}function ds(e){const t=[];return e.forEach((e=>{const n={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=e.childNodes;Wr.assignAttributes(e.attributes,n);for(const e in i){const t=i[e];switch(t.nodeName){case"JavaScriptResource":case"ExecutableResource":n.resource=Wr.parseNodeText(t),Wr.assignAttributes(t.attributes,n);break;case"VerificationParameters":n.parameters=Wr.parseNodeText(t)}}const r=Wr.childByName(e,"TrackingEvents");r&&Wr.childrenByName(r,"Tracking").forEach((e=>{const t=e.getAttribute("event"),i=Wr.parseNodeText(e);t&&i&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(i))})),t.push(n)})),t}function cs(e){let t=null,n=[];return e.some((e=>t=Wr.childByName(e,"AdVerifications"))),t&&(n=ds(Wr.childrenByName(t,"Verification"))),n}function us(e){const t={};t.id=e.getAttribute("id")||null;const n=e.childNodes;for(const e in n){const i=n[e],r=i.nodeName,s=Wr.parseNodeText(i);if(("Viewable"===r||"NotViewable"===r||"ViewUndetermined"===r)&&s){const e=r.toLowerCase();Array.isArray(t[e])||(t[e]=[]),t[e].push(s)}}return t}class ps{constructor(){this._handlers=[]}on(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type "+typeof t);if(!e)throw new TypeError("The event argument must be of type String. Received type "+typeof e);return this._handlers.push({event:e,handler:t}),this}once(e,t){return this.on(e,function(e,t,n){const i={fired:!1,wrapFn:void 0};function r(...r){i.fired||(e.off(t,i.wrapFn),i.fired=!0,n.bind(e)(...r))}return i.wrapFn=r,r}(this,e,t))}off(e,t){return this._handlers=this._handlers.filter((n=>n.event!==e||n.handler!==t)),this}emit(e,...t){let n=!1;return this._handlers.forEach((i=>{"*"===i.event&&(n=!0,i.handler(e,...t)),i.event===e&&(n=!0,i.handler(...t))})),n}removeAllListeners(e){return e?(this._handlers=this._handlers.filter((t=>t.event!==e)),this):(this._handlers=[],this)}listenerCount(e){return this._handlers.filter((t=>t.event===e)).length}listeners(e){return this._handlers.reduce(((t,n)=>(n.event===e&&t.push(n.handler),t)),[])}eventNames(){return this._handlers.map((e=>e.event))}}const hs={get:function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))}};function ys(){try{const e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function ms(e,t,n){const i=n?408:e.status,r=n?`XHRURLHandler: Request timed out after ${e.timeout} ms (${i})`:`XHRURLHandler: ${e.statusText} (${i})`;t(new Error(r),null,{statusCode:i})}const Es={get:function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{const i=ys();i.open("GET",e),i.timeout=t.timeout||ze,i.withCredentials=t.withCredentials||!1,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.onload=()=>function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):ms(e,t,!1)}(i,n),i.onerror=()=>ms(i,n,!1),i.onabort=()=>ms(i,n,!1),i.ontimeout=()=>ms(i,n,!0),i.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!ys()}};const Ts={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),e=function(e){let t=window.ONEAD;switch(!0){case e.indexOf($n)>-1:case e.indexOf(ei)>-1:e=t.liadId&&""!==t.liadId?(e=e.replace("{LIADID}",t.liadId)).replace("[LIADID]",t.liadId):""}return e}(e),"undefined"==typeof window||null===window?hs.get(e,t,n):Es.supported()?Es.get(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}};let gs=0,Is=0;const Ns=(e,t)=>{if(!e||!t||e<=0||t<=0)return;Is=(Is*gs+8*e/t)/++gs},_s={ERRORCODE:900,extensions:[]};class Ls extends ps{constructor(){super(),this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=null,this.URLTemplateFilters=[],this.fetchingOptions={},this.parsingOptions={}}addURLTemplateFilter(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}removeURLTemplateFilter(){this.URLTemplateFilters.pop()}countURLTemplateFilters(){return this.URLTemplateFilters.length}clearURLTemplateFilters(){this.URLTemplateFilters=[]}trackVastError(e,t,...n){this.emit("VAST-error",Object.assign({},_s,t,...n)),zr.track(e,t,{})}getErrorURLTemplates(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}getEstimatedBitrate(){return Is}fetchVAST(e,t=0,n=null,i=null){return new Promise(((r,s)=>{this.URLTemplateFilters.forEach((t=>{e=t(e)})),this.parentURLs.push(e);const o=Date.now();this.emit("VAST-resolving",{url:e,previousUrl:n,wrapperDepth:t,maxWrapperDepth:this.maxWrapperDepth,timeout:this.fetchingOptions.timeout,wrapperAd:i}),this.urlHandler.get(e,this.fetchingOptions,((i,a,l={})=>{const d=Math.round(Date.now()-o),c=Object.assign({url:e,previousUrl:n,wrapperDepth:t,error:i,duration:d},l);this.emit("VAST-resolved",c),Ns(l.byteLength,d),i?s(i):r(a)}))}))}initParsingStatus(e={}){this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||ze,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||Ts,this.vastVersion=null,Ns(e.byteLength,e.requestDuration)}getRemainingAds(e){if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));const t=e?zr.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(t,{wrapperDepth:0,previousUrl:void 0,url:this.rootURL}).then((e=>this.buildVASTResponse(e)))}getAndParseVAST(e,t){return t=t||void 0,this.initParsingStatus(t),this.URLTemplateFilters.forEach((t=>{e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((n=>(t.previousUrl=e,t.isRootVAST=!0,t.url=e,this.parse(n,t).then((e=>this.buildVASTResponse(e))))))}parseVAST(e,t){return this.initParsingStatus(t),(t=t||{}).isRootVAST=!0,this.parse(e,t).then((e=>this.buildVASTResponse(e)))}buildVASTResponse(e){const t=function({ads:e,errorURLTemplates:t,version:n}){return{ads:e||[],errorURLTemplates:t||[],version:n||null}}({ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion});return this.completeWrapperResolving(t),t}parseVastXml(e,{isRootVAST:t=!1,url:n=null,wrapperDepth:i=0,followAdditionalWrappers:r}){if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:n,wrapperDepth:i}),new Error("Invalid VAST XMLDocument");const s=[],o=e.documentElement.childNodes,a=e.documentElement.getAttribute("version");t&&a&&(this.vastVersion=a);for(const e in o){const l=o[e];if("Error"===l.nodeName){const e=Wr.parseNodeText(l);t?this.rootErrorURLTemplates.push(e):this.errorURLTemplates.push(e)}else if("Ad"===l.nodeName){const e=rs(l,this.emit.bind(this),{followAdditionalWrappers:r});e.ad?(s.push(e.ad),this.emit("VAST-ad-parsed",{type:e.type,url:n,wrapperDepth:i,adIndex:s.length-1,vastVersion:a})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return s}parse(e,{url:t=null,resolveAll:n=!0,wrapperSequence:i=null,previousUrl:r=null,wrapperDepth:s=0,isRootVAST:o=!1,followAdditionalWrappers:a,allowMultipleAds:l}={}){let d=[];try{d=this.parseVastXml(e,{isRootVAST:o,url:t,wrapperDepth:s,followAdditionalWrappers:a})}catch(e){return Promise.reject(e)}return 1===d.length&&null!=i&&(d[0].sequence=i),!1===n&&(this.remainingAds=Wr.splitVAST(d),d=this.remainingAds.shift()),this.resolveAds(d,{wrapperDepth:s,previousUrl:r,url:t})}resolveAds(e=[],{wrapperDepth:t,previousUrl:n,url:i}){const r=[];return e.forEach((e=>{const n=this.resolveWrappers(e,t,i);r.push(n)})),Promise.all(r).then((e=>{const r=zr.flatten(e);if(!r&&this.remainingAds.length>0){const e=this.remainingAds.shift();return this.resolveAds(e,{wrapperDepth:t,previousUrl:n,url:i})}return r}))}resolveWrappers(e,t,n){return new Promise((i=>{if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=this.maxWrapperDepth||-1!==this.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=Wr.resolveVastAdTagURI(e.nextWrapperURL,n),this.URLTemplateFilters.forEach((t=>{e.nextWrapperURL=t(e.nextWrapperURL)}));const r=e.sequence;this.fetchVAST(e.nextWrapperURL,t,n,e).then((s=>this.parse(s,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:r,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers}).then((t=>{if(delete e.nextWrapperURL,0===t.length)return e.creatives={},i(e);t.forEach((t=>{t&&Wr.mergeWrapperAdData(t,e)})),i(t)})))).catch((t=>{e.errorCode=301,e.errorMessage=t.message,i(e)}))}))}completeWrapperResolving(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(let t=e.ads.length-1;t>=0;t--){const n=e.ads[t];(n.errorCode||0===n.creatives.banner.length&&0===n.creatives.video.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}class Cs{constructor(e,t,n){this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=t||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new Ls,this.storage=n||new Rr,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}getParser(){return this.vastParser}get lastSuccessfulAd(){return this.storage.getItem("vast-client-last-successful-ad")}set lastSuccessfulAd(e){this.storage.setItem("vast-client-last-successful-ad",e)}get totalCalls(){return this.storage.getItem("vast-client-total-calls")}set totalCalls(e){this.storage.setItem("vast-client-total-calls",e)}get totalCallsTimeout(){return this.storage.getItem("vast-client-total-calls-timeout")}set totalCallsTimeout(e){this.storage.setItem("vast-client-total-calls-timeout",e)}hasRemainingAds(){return this.vastParser.remainingAds.length>0}getNextAds(e){return this.vastParser.getRemainingAds(e)}get(e,t={}){const n=Date.now();return(t=Object.assign({},this.defaultOptions,t)).hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise(((i,r)=>{if(this.cappingFreeLunch>=this.totalCalls)return r(new Error(`VAST call canceled  FreeLunch capping not reached yet ${this.totalCalls}/${this.cappingFreeLunch}`));const s=n-this.lastSuccessfulAd;if(s<0)this.lastSuccessfulAd=0;else if(s<this.cappingMinimumTimeInterval)return r(new Error(`VAST call canceled  (${this.cappingMinimumTimeInterval})ms minimum interval reached`));this.vastParser.getAndParseVAST(e,t).then((e=>i(e))).catch((e=>r(e)))}))}}var Ms=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};function As(e,t,n,i){return`${e.replace(".zip","/index.html")}?isipIndex=${t}&uid=${n}&pid=${i}`}var vs=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};function Os(e){return vs(this,void 0,void 0,(function*(){let t={content:[],title:"",tid:"",linkURL:{"#content":""}};return yield fetch(e.l_url).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((n=>{var i,r,s,o;e.l_json={},e.l_json.xml={},e.l_json.xml.text_contents={},e.l_json.xml.banner_contents={};let a,l,d,c,u,p=parseInt(null===(i=n.querySelectorAll("dueDayTime")[0])||void 0===i?void 0:i.textContent),h=null===(r=n.querySelectorAll("unit")[0])||void 0===r?void 0:r.textContent,y=(p-(new Date).getTime())/1e3;const m=n.querySelectorAll("body")[0].textContent||"";switch(h){case"day":a=y/60/60/24,u=Math.round(a),c="",a<1&&(l=y/60/60,u=Math.round(l),c="",l<1&&(d=y/60,u=Math.round(d),c=""));break;case"hour":l=y/60/60,u=Math.round(l),c="",l<1&&(d=y/60,u=Math.round(d),c="")}let E,T,g=n.querySelectorAll("companions")[0].children;if(g.length>0){E={companion:[]};for(const e of g){let t={cid:e.querySelector("cid").textContent,imgURL:e.querySelector("imgURL").textContent,linkURLs:{linkURL:[]}},n=e.querySelector("linkURLs").children;for(const e of n){let n={"#content":e.textContent};t.linkURLs.linkURL.push(n)}E.companion.push(t)}}let I=[];for(let e=0;e<n.querySelectorAll("content").length;e++)T=n.querySelectorAll("content")[e].textContent.replace("[time]",` ${u} ${c}`),I.push(T);t.content=I,t.tid=null===(s=n.querySelector("tid"))||void 0===s?void 0:s.textContent,t.title=null===(o=n.querySelector("title"))||void 0===o?void 0:o.textContent,t.linkURL["#content"]=n.querySelector("linkURL").textContent,e.l_json.xml.keywords=m,e.l_json.xml.text_contents.text_content=t,e.l_json.xml.banner_contents=E})),e}))}function fs(){return vs(this,void 0,void 0,(function*(){const e={tempData:{value:"",display:!0,key:"temp"},todayTempData:{tempMax:"",tempMin:"",display:!0,key:"todayTemp"},humiData:{value:"",display:!0,key:"humi"},aqiData:{value:"",display:!0,key:"aqi"},uviData:{value:"",display:!0,key:"uvi"},descData:{value:"",display:!1,key:"desc"}};return yield fetch("https://onead.onevision.com.tw/v2/geo.xml",{method:"get"}).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((function(t){e.tempData.value=parseInt(t.querySelectorAll("Temp")[0].textContent).toString(),e.todayTempData.tempMax=parseInt(t.querySelectorAll("TempMax")[0].textContent).toString(),e.todayTempData.tempMin=parseInt(t.querySelectorAll("TempMin")[0].textContent).toString(),e.humiData.value=t.querySelectorAll("Humi")[0].textContent,e.aqiData.value=t.querySelectorAll("AQI")[0].textContent,e.uviData.value=t.querySelectorAll("UVI")[0].textContent})),e}))}function Ss(e){let t;if(window.frameElement&&!function(){let e=window.location.host;return e.indexOf("rd-occ")>-1||e.indexOf("staging-occ")>-1||e.indexOf("creative.onead.com.tw")>-1||e.indexOf("creative.dsp.com.tw")>-1}())t=document.createElement("div"),t.id="div-onead-draft",window.frameElement.parentNode.insertBefore(t,window.frameElement.parentNode.children[0]);else try{t=document.getElementById(e)||parent.document.getElementById(e)||top.document.getElementById(e)}catch(n){t=document.getElementById(e)}return t}function ws(e,t,n){return`${e}-${t}-${n}`}var Rs=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};class xs{constructor(e){this.isJson=!1,this.textContainers={layout:void 0,wrapper:void 0},this.keywords={},this.assignExternalParams(e),this.initData()}initData(){this._funcParamMapForKeyWord={}}assignExternalParams(e){this.isJson=!!e.res_array[0].l_json;const t=e.pub;this.uniqueID=e.adUniqueID,this.exclude=e.preview_mode,this.textContents=e.res_array,this.blockGroupId=e.block_group_id,this.playMode=t?t.player_mode:e.res_array[0].play_mode,this.playerType=e.res_array[0].player_type,this.ctId=null==t?void 0:t.ct_id,this.slotId=t?e.pub.slotobj.id:e.defaultSlot,this.slotElement=Ss(this.slotId)}assignResponseParams(e){var t,n,i,r,s,o,a,l,d,c,u,p,h;return Rs(this,void 0,void 0,(function*(){this.pid=e.pid,this.isipIndex=e.isip_index,this.uid=e.uid,this.playerType=e.player_type,this.tracking=e.tracking,this.trackUrl=e.tracking,this.textData=null===(i=null===(n=null===(t=e.l_json)||void 0===t?void 0:t.xml)||void 0===n?void 0:n.text_contents)||void 0===i?void 0:i.text_content,this.targetTime=null===(l=null===(a=null===(o=null===(s=null===(r=e.l_json)||void 0===r?void 0:r.xml)||void 0===s?void 0:s.text_contents)||void 0===o?void 0:o.text_content)||void 0===a?void 0:a.countDown)||void 0===l?void 0:l.dueDayTime,this.unit=null===(h=null===(p=null===(u=null===(c=null===(d=e.l_json)||void 0===d?void 0:d.xml)||void 0===c?void 0:c.text_contents)||void 0===u?void 0:u.text_content)||void 0===p?void 0:p.countDown)||void 0===h?void 0:h.unit,this.reporting=new Ji(this),yield this.setupWeatherInfo(),this.definedBanner(e)}))}setupWeatherInfo(){return Rs(this,void 0,void 0,(function*(){const e=["aqi","uvi","temp","tempMin","tempMax","humi"];for(const t of e)if(this.textData.length>1){for(const e of this.textData)if(e.content.includes(`[${t}]`)){this.weatherInfo||(this.weatherInfo=yield fs());const n=`${t}Data`,i="string"==typeof this.weatherInfo[n].value?this.weatherInfo[n].value:this.weatherInfo.todayTempData.tempMin||this.weatherInfo.todayTempData.tempMax;e.content=e.content.replace(`[${t}]`,i)}}else if(this.textData.content[0].includes(`[${t}]`)){this.weatherInfo||(this.weatherInfo=yield fs());const e=`${t}Data`,n="string"==typeof this.weatherInfo[e].value?this.weatherInfo[e].value:this.weatherInfo.todayTempData.tempMin||this.weatherInfo.todayTempData.tempMax;this.textData.content[0]=this.textData.content[0].replace(`[${t}]`,n)}}))}definedBanner(e){switch(this.playerType){case n.FLASH_DRIVE_300:case n.FLASH_DRIVE_320:if(this.isJson?this.bannerData=e.l_json.xml.companions:this.bannerData=e.l_json.xml.banner_contents,void 0===this.bannerData.companion.length){const e=this.bannerData.companion;this.bannerData.companion=[],this.bannerData.companion.push(e)}this.bannerDataInXml=function(e,{isip_index:t,pid:n,uid:i}){let r;if(!r){let s,o,a,l,d,c;if(r=[],s=e,s)for(let e=0;e<s.companion.length;e++){if(o=s.companion[e].cid,a=s.companion[e].imgURL,l=[],null==s.companion[e].linkURLs.linkURL.length)l.push(s.companion[e].linkURLs.linkURL["#content"]);else for(let t=0;t<s.companion[e].linkURLs.linkURL.length;t++)l.push(s.companion[e].linkURLs.linkURL[t]["#content"]);r.push({cid:o,sourceUrl:As(a,t,i,n),linkUrls:l,isHtml:d,hasLink:c,width:void 0,height:void 0})}}return r}(this.bannerData,{isip_index:e.isip_index,pid:e.pid,uid:e.uid})}}setKeyWordsSystem(e){let t="";t=this.isJson?this.textContents[0].l_json.xml.linkXml.body||"":e.l_json.xml.keywords||"",this.keywords={[er.ADD_BANNER_CLICK_AREA]:!1};const n=new tr;this.keywords=n.setKeyword(this.keywords,t,this)}get isAddBannerClickArea(){return this.keywords[er.ADD_BANNER_CLICK_AREA]}get funcParamMapForKeyWord(){return this._funcParamMapForKeyWord}}function Ds(e,n,i){let r,s=10;const o=window.location.host;o.indexOf(Yn)>-1&&(s=600),n.playMode===t.FD&&(s=0),function(e,t){const n=window.setInterval((()=>{try{e(n)}catch(e){clearInterval(n)}}),t)}(function(t){switch(!0){case o.indexOf(Jt)>-1:r=document.getElementById("__next")||document.getElementsByClassName("content")[0]||document.getElementById("headerMenuRoot");break;case o.indexOf(hn)>-1:r=document.getElementsByClassName("jeg_navbar_mobile_wrapper")[0];break;case o.indexOf(jt)>-1:r=document.getElementsByClassName("jeg_viewport")[0];break;default:r=i.document.firstElementChild}r||(r=i.document.firstElementChild);const n=-1*r.getBoundingClientRect().top;let a;a=Math.abs(n)>=s,e(a,t)}.bind(this),500)}function bs(e){const t=document.createElement(e.type);if(t.id=e.id,function(e,t){for(const n in t)"width"===n||"height"===n||"margin"===n||"text-align"===n||"max-width"===n||"background"===n||"border"===n?e.style.setProperty(n,t[n],"important"):e.style.setProperty(n,t[n])}(t,e.styles),e.attr){const n=e.attr;for(const e in n)t.setAttribute(e,n[e])}return t}function Ps(e,t,n){n=n||{root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]};new IntersectionObserver(t,n).observe(e)}function js(e){Ps(e,((e,t)=>{0===e[0].intersectionRatio&&(e[0].target.remove(),t.unobserve(e[0].target))}))}class ks{constructor(e,t){this.wordBreak="break-word",this.fontFamily="PingFangTC Sans-serif",this.Uis={bannerImage:HTMLElement,bannerWrapper:HTMLElement,bannerContent:HTMLElement,bannerClickArea:HTMLElement,wrapper:HTMLElement,layout:HTMLElement,textUl:HTMLElement,textLi:HTMLElement,textSpan:HTMLElement,textContent:HTMLElement,textWrapper:HTMLElement,navWrapper:HTMLElement,navText:HTMLElement,navIcon:HTMLElement,logoImage:HTMLElement,logoText:HTMLElement,closeButton:HTMLElement},this.dataCenter=e,this.customerCenter=t,this.buildContainers()}buildContainers(){switch(this.dataCenter.playerType){case n.TEXT_ONLY:this.layout=this.buildLayout(),this.wrapper=this.buildWrapper(),this.layout.appendChild(this.wrapper);break;case n.FLASH_DRIVE_320:this.layout=this.buildFlashLayout();break;case n.FLASH_DRIVE_300:this.layout=this.buildFlashLayout(),this.wrapper=this.buildFlashWrapper(),this.layout.appendChild(this.wrapper)}this.dataCenter.slotElement.appendChild(this.layout)}buildWrapper(){const e=bs({type:"div",id:`${ws(vi,this.dataCenter.uniqueID,this.dataCenter.blockGroupId)}`,styles:{padding:"16px",display:"block",background:"#F5F5F5",border:"1px, 0px, 1px, 0px solid","border-width":"1px 0px","border-color":"#C6C6C6","border-style":"solid","font-family":"PingFang TC, Noto Sans TC","font-style":"normal","line-height":"30px","font-weight":"400","font-size":"18px","text-align":"left"}});return this.Uis.wrapper=e,e}buildLayout(){const e=bs({type:"div",id:`${ws(fi,this.dataCenter.uniqueID,this.dataCenter.blockGroupId)}`,styles:{display:"none",width:"auto",height:"auto",padding:"8px 0px"}});return this.Uis.layout=e,e}buildFlashWrapper(){const e=bs({type:"div",id:`${ws(vi,this.dataCenter.uniqueID,this.dataCenter.blockGroupId)}`,styles:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:"0"}});return this.Uis.wrapper=e,e}buildFlashLayout(){const e=bs({type:"div",id:`${ws(fi,this.dataCenter.uniqueID,this.dataCenter.blockGroupId)}`,styles:{display:"none",width:"100vw",height:"100vh",position:"fixed",top:"0","z-index":"2147483647"}});return this.Uis.layout=e,e}buildFlashDrive320BannerArea(e){var t,n;const i=e.dataCenter.bannerDataInXml[0].sourceUrl,r=bs({type:"div",id:Li+e.isipIndex,styles:{position:"fixed",left:"0vw",top:"0vw",width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.64)",margin:0,display:"flex","z-index":"2147483647"}}),s=bs({type:"div",id:Pi,styles:{position:"absolute",left:"0vw",top:"0vw",width:"100vw",height:"168.75vw",margin:0,display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}}),o=bs({type:"div",id:Ai,styles:{position:"absolute",width:"75vw",height:"146.25vw",display:"flex","flex-direction":"column","z-index":"2147483647"}}),a=bs({type:"div",id:Ci,styles:{position:"absolute",width:"75vw",height:"146.25vw",display:"flex","flex-direction":"column"}}),l=bs({type:"div",id:Mi+e.isipIndex,styles:{width:"75vw",height:"112.5vw","background-image":`url(${i})`,"background-size":"cover","background-repeat":"no-repeat",display:"flex"}}),d=bs({type:"div",id:vi+e.isipIndex,styles:{width:"75vw",height:"24.22vw","background-color":"rgb(255,255,255)",display:"flex","flex-direction":"column","justify-content":"center"}}),c=bs({type:"div",id:Oi+e.isipIndex,styles:{padding:"2.5vw",display:"flex","text-align":"left",overflow:"hidden","word-break":this.wordBreak,"-webkit-line-clamp":"2","text-overflow":"ellipsis","font-size":"4.7vw","line-height":"150%"}});c.innerText=e.text;const u=bs({type:"div",id:xi+e.isipIndex,styles:{width:"75vw",height:"9.53vw","background-color":"#F1F1F1",display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}}),p=bs({type:"div",id:Di+e.isipIndex,styles:{display:"flex","text-align":"left","font-size":"4vw","transform-origin":"left","line-height":"4vw","font-family":this.fontFamily,"font-style":"normal","font-weight":"500",color:"#1688F9","margin-left":"2.5vw"}});(null===(t=this.dataCenter.funcParamMapForKeyWord)||void 0===t?void 0:t.setCTAText)?p.innerText=null===(n=this.dataCenter.funcParamMapForKeyWord)||void 0===n?void 0:n.setCTAText.text:p.innerText="";const h=bs({type:"img",id:bi+this.dataCenter.isipIndex,attr:{src:pr},styles:{width:"6.25vw",height:"6.25vw","margin-right":"2.5vw"}});return a.appendChild(l),d.appendChild(c),a.appendChild(d),u.appendChild(p),u.appendChild(h),a.appendChild(u),this.dataCenter.isAddBannerClickArea&&s.appendChild(o),s.appendChild(a),r.appendChild(s),r.appendChild(this.createLogo()),r.appendChild(this.createCloseBtn()),this.Uis.bannerWrapper=r,this.Uis.bannerContent=a,this.Uis.bannerClickArea=o,this.Uis.bannerImage=l.element,this.Uis.textContent=c,this.Uis.textWrapper=d,this.Uis.navText=p,this.Uis.navIcon=h,this.Uis.navWrapper=u,this.customerCenter.setMediaStyle(this.Uis),r}buildFlashDrive300BannerArea(e){var t,n;const i=e.dataCenter.bannerDataInXml[0].sourceUrl;let r;e.dataCenter.bannerDataInXml.length>1&&(r=e.dataCenter.bannerDataInXml[1].sourceUrl);const s=bs({type:"div",id:Li+e.isipIndex,styles:{position:"fixed",left:"0vw",top:"0vw",width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.64)",margin:0,display:"flex","z-index":"2147483647"}}),o=bs({type:"div",id:Pi+e.isipIndex,styles:{position:"absolute",left:"0vw",top:"0vw",width:"100vw",height:"168.75vw",margin:0,display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}}),a=bs({type:"div",id:Ci,styles:{position:"absolute",width:"75vw",height:"146.25vw",display:"flex","flex-direction":"column"}}),l=bs({type:"div",id:Mi+e.isipIndex,styles:{width:"75vw",height:"62.5vw","background-image":`url(${i})`,"background-size":"cover","background-repeat":"no-repeat",display:"flex"}}),d=bs({type:"div",id:vi+e.isipIndex,styles:{width:"75vw",height:"74.219vw","background-color":"rgb(255,255,255)",display:"flex","flex-direction":"column","justify-content":"space-evenly","align-items":"center"}}),c=bs({type:"div",id:ji+e.isipIndex,styles:{width:"37.5vw",height:"37.5vw","background-image":`url(${r})`,"background-size":"cover","background-repeat":"no-repeat",display:"flex"}}),u=bs({type:"div",id:ki+e.isipIndex,styles:{display:"flex",color:"#000","text-align":"center","font-family":this.fontFamily,"font-size":"9.375vw","font-style":"normal","font-weight":"600","line-height":"100%"}});2===e.text.length&&(u.innerText=e.text[1],u.style.setProperty("margin-top","12.5vw","important"));const p=bs({type:"div",id:Oi+e.isipIndex,styles:{width:"70vw",height:"14.219vw",display:"flex","text-align":"left",overflow:"hidden","word-break":this.wordBreak,"-webkit-line-clamp":"2","text-overflow":"ellipsis","font-family":this.fontFamily,"font-size":"4.69vw","line-height":"150%"}});2===e.text.length?(p.innerText=e.text[0],p.style.setProperty("margin-bottom","12.5vw","important")):p.innerText=e.text;const h=bs({type:"div",id:xi+e.isipIndex,styles:{width:"75vw",height:"9.53vw","background-color":"#F1F1F1",display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"}}),y=bs({type:"div",id:Di+e.isipIndex,styles:{display:"flex","text-align":"left","font-size":"4vw","transform-origin":"left","line-height":"4vw","font-family":this.fontFamily,"font-style":"normal","font-weight":"500",color:"#1688F9","margin-left":"2.5vw"}});(null===(t=this.dataCenter.funcParamMapForKeyWord)||void 0===t?void 0:t.setCTAText)?y.innerText=null===(n=this.dataCenter.funcParamMapForKeyWord)||void 0===n?void 0:n.setCTAText.text:y.innerText="";const m=bs({type:"img",id:bi+this.dataCenter.isipIndex,attr:{src:pr},styles:{width:"6.25vw",height:"6.25vw","margin-right":"2.5vw"}});return a.appendChild(l),r?d.appendChild(c):d.appendChild(u),d.appendChild(p),a.appendChild(d),h.appendChild(y),h.appendChild(m),a.appendChild(h),o.appendChild(a),s.appendChild(o),s.appendChild(this.createLogo()),s.appendChild(this.createCloseBtn()),this.Uis.bannerWrapper=s,this.Uis.bannerContent=a,this.Uis.bannerImage=l,this.Uis.textContent=p,this.Uis.textWrapper=d,this.Uis.navText=y,this.Uis.navIcon=m,this.Uis.navWrapper=h,this.Uis.logoImage=c,this.Uis.logoText=u,this.customerCenter.setMediaStyle(this.Uis),s}createLogo(){const t=e,n=`?utm_source=onead&utm_medium=${this.dataCenter.playMode}&utm_campaign=${this.dataCenter.pid}`,i=bs({type:"a",id:"logo-button",attr:{href:encodeURI(t+n),target:"_top"},styles:{position:"absolute",border:"none",width:"4.47vw",height:"3.5vw",right:"2.71vw",bottom:"3.37vw"}}),r=bs({type:"img",id:"logo-img"+this.dataCenter.isipIndex,attr:{src:ur},styles:{position:"absolute","text-align":"right",margin:"0 auto",width:"100%",height:"100%",right:"0",left:"0"}});return i.appendChild(r),i}createCloseBtn(){var e;const t=bs({type:"div",id:"close-button",styles:{position:"absolute",border:"none",width:"6.25vw",height:"6.25vw",right:"13.75vw",top:"12.5vw"}}),n=bs({type:"img",id:"close-img",attr:{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjAuNjQiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNi4xMTM3IDguMzY2NzhDMTUuNjIyOCA3Ljg3NTg2IDE0LjgyNjggNy44NzU4NiAxNC4zMzU5IDguMzY2NzhMMTIuMDA5MyAxMC42OTM0TDkuNjgyNjUgOC4zNjY3NkM5LjE5MTczIDcuODc1ODQgOC4zOTU3OSA3Ljg3NTg0IDcuOTA0ODcgOC4zNjY3NkM3LjQxMzk1IDguODU3NjggNy40MTM5NSA5LjY1MzYyIDcuOTA0ODcgMTAuMTQ0NUwxMC4yMzE1IDEyLjQ3MTJMNy45MDQ4NiAxNC43OTc4QzcuNDEzOTQgMTUuMjg4OCA3LjQxMzk0IDE2LjA4NDcgNy45MDQ4NiAxNi41NzU2QzguMzk1NzggMTcuMDY2NSA5LjE5MTcyIDE3LjA2NjUgOS42ODI2NCAxNi41NzU2TDEyLjAwOTMgMTQuMjQ5TDE0LjMzNTkgMTYuNTc1NkMxNC44MjY5IDE3LjA2NjUgMTUuNjIyOCAxNy4wNjY1IDE2LjExMzcgMTYuNTc1NkMxNi42MDQ2IDE2LjA4NDcgMTYuNjA0NiAxNS4yODg3IDE2LjExMzcgMTQuNzk3OEwxMy43ODcxIDEyLjQ3MTJMMTYuMTEzNyAxMC4xNDQ2QzE2LjYwNDYgOS42NTM2NCAxNi42MDQ2IDguODU3NyAxNi4xMTM3IDguMzY2NzhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"},styles:{width:"100%",height:"100%"}});return t.appendChild(n),(null===(e=this.dataCenter.funcParamMapForKeyWord)||void 0===e?void 0:e.closeUISet)&&this.modifyCloseBtnCssByCustomSetting(t.style),this.Uis.closeButton=t,t}modifyCloseBtnCssByCustomSetting(e){const t=this.dataCenter.funcParamMapForKeyWord.closeUISet;if(!t)return e;e.position="absolute";const n="%"===t.posUnit||"px"===t.posUnit?t.posUnit:"px",i="%"===t.sizeUnit||"px"===t.sizeUnit?t.sizeUnit:"px",r=t.align?t.align.toLowerCase():"";return"right"===r?(e.left="",e.right=t.around+n):"left"===r&&(e.left=t.around+n,e.right=""),t.top&&(e.top=t.top+n),t.width&&(e.width=t.width+i),t.height&&(e.height=t.height+i),e}buildTextArea(e){const t=this.calculateSlotWidth(e);if(!t)return null;const n=Math.floor(t)-1,i=this.createTextSpan(e),r=this.createTextLi(n,e),s=this.createTextUl(e);return r.appendChild(i),s.appendChild(r),this.addHoverEventListeners(s),this.setUis(s,r,i),this.customerCenter.setMediaStyle(this.Uis),s}calculateSlotWidth(e){let t=e.dataCenter.slotElement.getBoundingClientRect().width-57;if(t<0){let n=e.dataCenter.slotElement.parentElement;for(;t<0;)t=n.getBoundingClientRect().width-57,n=n.parentElement}return t}createTextSpan(e){const t=bs({type:"span",id:Ri+e.isipIndex,styles:{"text-align":"left",overflow:"hidden",display:"inline","word-break":this.wordBreak,"-webkit-line-clamp":"3","text-overflow":"ellipsis","-webkit-box-orient":"vertical"}});return e.target_time&&e.unit?this.updateTextSpanWithTime(e,t):t.innerText=e.text,t}createTextLi(e,t){return bs({type:"li",id:Si+t.isipIndex,styles:{padding:"0",margin:"0","list-style":"disc",width:`${e}px`}})}createTextUl(e){return bs({type:"div",id:wi+e.isipIndex,styles:{cursor:"pointer",color:"#000000",margin:0}})}addHoverEventListeners(e){const t=this.hoverEffect.bind(this);e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)}setUis(e,t,n){this.Uis.textUl=e,this.Uis.textLi=t,this.Uis.textSpan=n}updateTextSpanWithTime(e,t){const n=e.target_time,i=e.unit,r=(n-(new Date).getTime())/1e3;let s,o;let a,l,d;switch(i){case"day":a=r/60/60/24,o=Math.round(a),s="",a<1&&(l=r/60/60,o=Math.round(l),s="",l<1&&(d=r/60,o=Math.round(d),s=""));break;case"hour":l=r/60/60,o=Math.round(l),s="",l<1&&(d=r/60,o=Math.round(d),s="")}t.innerText=e.text.replace("[time]",` ${o} ${s}`)}hoverEffect(e){const t=this.customerCenter.setCustomHoverColor();"mouseover"===e.type?(e.currentTarget.style.color=t,e.currentTarget.style.textDecoration="underline"):(e.currentTarget.style.color="#000000",e.currentTarget.style.textDecoration="none")}}const Us="cv",Bs="disp",Fs="impression",Hs="bannerClick",Vs="skip",zs="expand";window.location.href;function Ys(e,t){let n,i=!1;const r=t.parent;try{n=r.location.href}catch(n){i=!0,e.highestWin=t,e.inSafeFrame=!0}return i||(e.highestWin=r,r!==top&&Ys(e,r)),e}class Ws{constructor(e){this.isClose=!1,this.viewMoreThan50Percent=!1,this.initVerifyTopSet=!1,this.expanded=!1,this.dispTimes={total:0,startTime:0},this.uiCenter=e.uiCenter,this.dataCenter=e.dataCenter,this.eventCenter=e.eventCenter,this.isipIndex=this.dataCenter.isipIndex,this.locationHost=window.location.host;let n={highestWin:window,inSafeFrame:!1};n=Ys(n,window),this.highestWin=this.customHighestWindow(n),this.dataCenter.playMode===t.TD?this.eventCenter.subscribe(Us,this.startupEvent.bind(this),{once:!0}):(this.highestWin.document.body.addEventListener(this.triggerMethod(),(e=>{e.stopPropagation()})),Ds.bind(this)(this.verifyTop.bind(this),this.dataCenter,this.highestWin))}customHighestWindow(e){let t;const n=e.highestWin.location.href,i=/creative\.dsp\.com\.tw\/api\/v1\/packs\/([0-9]+)\/demo/gm;return t=(/-occ\.onead\.tw\/api\/v1\/packs\/([0-9]+)\/demo/gm.test(n)||i.test(n))&&e.highestWin.document.getElementById("desktop")?e.highestWin[0]:e.highestWin,t}bannerAnimation(){js(this.uiCenter.layout),this.isClose||(this.uiCenter.layout.style.setProperty("height","100vh"),this.eventCenter.dispatch(zs),this.expanded=!0)}verifyTop(e){!this.isClose&&e&&!1===this.initVerifyTopSet&&(document.body.style.overflow="hidden",this.uiCenter.layout.style.setProperty("display","block"),this.uiCenter.layout.style.setProperty("height","100vh","important"),this.startupEvent(),this.bannerAnimation(),this.initVerifyTopSet=!0)}triggerMethod(){return"ontouchstart"in window||navigator.maxTouchPoints?"touchstart":"mousedown"}startupEvent(){this.setupImpEvent(),this.calcDisp()}setupImpEvent(){Ps(this.container,((e,t)=>{e[0].intersectionRatio>.45?(this.viewMoreThan50Percent=!0,this.eventCenter.dispatch(Fs)):this.viewMoreThan50Percent=!1}))}calcDisp(e){0===this.dispTimes.startTime?e&&(this.dispTimes.startTime=e):this.viewMoreThan50Percent?this.dispTimes.total+=e-this.dispTimes.startTime:this.dispTimes.startTime=0,this.dispTimes.total<1e3?window.requestAnimationFrame(this.calcDisp.bind(this)):this.eventCenter.dispatch(Bs)}closeAd(e){for(let t=e.document.body.style.length-1;t>=0;t--)e.document.body.style.removeProperty(e.document.body.style[t]);"function"==typeof e.changeADState?e.changeADState({newstate:"DELETED"}):void 0!==e.changeADState&&"function"==typeof e.changeADState[this.isipIndex]&&e.changeADState[this.isipIndex]({newstate:"DELETED"}),document.body.style.overflow="auto",this.eventCenter.dispatch(Vs),this.intervalTimer&&clearInterval(this.intervalTimer),this.container.style.setProperty("opacity","0"),this.container.style.setProperty("display","none"),js(this.container)}}class Gs extends Ws{createView(){this.buildDraft();const e=this.dataCenter.textData.linkURL["#content"]||this.dataCenter.textData.linkURL;this.eventCenter.setClickUrl(e),this.eventCenter.dispatch(Us,{eventName:"cv"})}buildDraft(){const e=this.dataCenter.textData,t=this.dataCenter.targetTime,n=this.dataCenter.unit,i=e.content,r=this.isipIndex,s=this.uiCenter.buildTextArea({targetTime:t,unit:n,text:i,isipIndex:r,dataCenter:this.dataCenter});s.addEventListener("click",(e=>{this.eventCenter.dispatch(Hs)})),this.container=s,this.uiCenter.wrapper.appendChild(s)}}class Qs{constructor(){this.messageHandler=e=>{let t,i,r,s,o,a,l,d,c,u;const p=document.createElement("script");let h,y,m;try{t=JSON.parse(e.data)}catch(e){}if(void 0!==t&&"MATERIAL"===t.sender&&t.isipIndex===this.isipIndex)switch(i=t.action,r=t.param,i){case"checkIfPlayerReady":this.sendMessageToMaterial({action:"ONEAD_PLAYER_READY"}),this.sendMessageToMaterial({action:"ONEAD_GUID",param:this._eventCenter.dataCenter.guid}),this._eventCenter.dataCenter.playerType===n.TRANSFORMER_SOCIAL&&this.sendMessageToMaterial({action:"ONEAD_SET_ENGCOUNTS",param:this._eventCenter.dataCenter.engRealtimeNum});break;case Hi.materialEvent.SEND_EVENT_ENG:this._eventCenter.dispatch(Hi.materialEvent.SEND_EVENT_ENG,r);break;case Hi.materialEvent.SYNC_TRACKING_EVENT:this._eventCenter.dispatch(Hi.materialEvent.NEED_SYNC_BEFORE_CLOSE),this._sendDelayedTrackingEvents();break;case Hi.materialEvent.MATERIAL_TRACKING_EVENTS_SENT:this._eventCenter.dispatch(Hi.materialEvent.MATERIAL_TRACKING_EVENTS_SENT);break;case Hi.materialEvent.ADD_TRACKING_ACCOUNT:this._eventCenter.dataCenter.trackingEventHandler&&this._eventCenter.dataCenter.trackingEventHandler.addTrackingCodeAccount(r);break;case Hi.materialEvent.ONEAD_EXECUTE_CODE:s=`(function() {${t.param}})();`;try{Function(s)()}catch(e){}break;case Hi.materialEvent.SEND_NAMELIST_TO_SENTRY:o=t.param.cName,a=t.param.tel,l=t.param.email,d=t.param.postalCode,c=t.param.address,this._eventCenter.sendErrorReport({errorCode:"50001",errorMsg:"50001 Cube Name List",errorDesc:{desc1:{name:`${o}`,tel:`${a}`,email:`${l}`,posCode:`${d}`,address:`${c}`},uid:`${this._eventCenter.dataCenter.uid}`,pid:`${this._eventCenter.dataCenter.pid}`,campid:`${this._eventCenter.dataCenter.campId}`}});break;case Hi.materialEvent.INSERT_SCRIPT_IN_HEAD:h=t.param.src,y=t.param.content,m=t.param.async;try{u=top.document.head}catch(e){this._eventCenter.sendErrorReport(qi.IN_SAFE_FRAME),u=document.head}const i=(e,t,n)=>new Promise(((i,r)=>{p.async=t,p.src=e,p.onload=i,n.appendChild(p)})),E=(e,t)=>{p.textContent=e,t.appendChild(p)};h?Array.isArray(h)?Promise.all(h.map((e=>i(e,m,u)))).then((()=>{y&&E(y,u)})):i(h,m,u):E(y,u);break;default:this._reactFunc(t)}},this._isMaterialReadyForTrackingEvent=!1,this._delayedTrackingEvents=[]}sendMessageToMaterial(e){e.sender="ONEAD_PLAYER",e.isipIndex=this.isipIndex;const t=JSON.stringify(e);this._messageSendObj&&(Array.isArray(this._messageSendObj)?this._messageSendObj.forEach((function(e){e.postMessage(t,"*")})):this._messageSendObj.postMessage(t,"*"))}_checkAndSendTrackingEvent(e){this._isMaterialReadyForTrackingEvent?e():this._delayedTrackingEvents.push(e)}_sendDelayedTrackingEvents(){let e;for(this._isMaterialReadyForTrackingEvent=!0;e=this._delayedTrackingEvents.shift();)e()}sendBannerExposurePercentage(e,t,n){const i=+(100*(1-e/(n+t))).toFixed(2),r=(s=i,o=.5,+(Math.floor(s/o)*o).toFixed(1));var s,o;r>=0&&r<=100&&r!==this.lastExposurePercentage&&(this.sendMessageToMaterial({action:"ONEAD_BANNER_EXPOSURE_PERCENTAGE",param:r}),this.lastExposurePercentage=r)}sendScrollerBannerExposure(e,t,i){if(this._eventCenter.dataCenter.playerType===n.PAGE_BANNER||this._eventCenter.dataCenter.playerType===n.PAGE||this._eventCenter.dataCenter.playerType===n.TAG||this._eventCenter.dataCenter.playerType===n.PAGE_LINKTREE||this._eventCenter.dataCenter.playerType===n.PAGE_BANNER_V2||this._eventCenter.dataCenter.playerType===n.PAGE_V2){const e=i;0!==e&&this.sendMessageToMaterial({action:"ONEAD_BANNER_EXPOSURE_PERCENTAGE",param:e})}else{let n=+((e-i)/t*100).toFixed(2);n>=100&&(n=100),n>=0&&n<=100&&n!==this.lastExposurePercentage&&(this.sendMessageToMaterial({action:"ONEAD_BANNER_EXPOSURE_PERCENTAGE",param:n}),this.lastExposurePercentage=n)}}sendInfoObject(e){this.sendMessageToMaterial({action:"ONEAD_LAYOUT_INFO_OBJECT",param:e})}sendLayoutExposurePercentage(e,t,n){let i=+(100*(1-(e-n)/t)).toFixed(2);i>=100&&(i=100),i>=0&&i<=100&&i!==this.lastExposurePercentage&&(this.sendMessageToMaterial({action:"ONEAD_BANNER_EXPOSURE_PERCENTAGE",param:i}),this.lastExposurePercentage=i)}sendElementExposurePercentage(e){const t=100*e;t>=0&&t<=100&&t!==this.lastExposurePercentage&&(this._eventCenter.dataCenter.adFormat===b?this.sendMessageToMaterial({action:"ONEAD_IN_VIEW_PERCENTAGE",param:t}):this.sendMessageToMaterial({action:"ONEAD_BANNER_EXPOSURE_PERCENTAGE",param:t}),this.lastExposurePercentage=t)}sendSafeFrameGeomData(e){this.sendMessageToMaterial({action:"ONEAD_SAFEFRAME_GEOM_DATA",param:e})}_sendTrackingEvent(e){this.sendMessageToMaterial({action:"ONEAD_TRACKING_EVENT",param:e})}onVideoEnded(){this.sendMessageToMaterial({action:"ONEAD_VIDEO_ENDED"})}sendMirfIsTouched(e){this.sendMessageToMaterial({action:"MIRF_IS_TOUCHED",param:e})}sendIsExpand(e){this.sendMessageToMaterial({action:"ONEAD_IS_EXPAND",param:e})}sendIsUserTouch(e){this.sendMessageToMaterial({action:"ONEAD_IS_USER_TOUCHED",param:e})}init(e,t,n){this.initData(t,n),this.initMessageWindow(e)}initData(e,t){this.isipIndex=e+"",t&&(this._eventCenter=t,t.subscribe(Hi.materialEvent.SEND_TRACKING_EVENT,(e=>{let t;t="string"==typeof e?e:e.eventName,this._checkAndSendTrackingEvent((()=>{this._sendTrackingEvent(t)}))}))),window.name="oneadPlayer",this.setupReaction((()=>{}))}initMessageWindow(e){e?(this._messageSendObj=e,this._messageReceiveObj=window):(this._messageSendObj=parent,this._messageReceiveObj=parent),this._messageReceiveObj.addEventListener("message",this.messageHandler),this.sendMessageToMaterial({action:"ONEAD_PLAYER_READY"})}setupReaction(e){this._reactFunc=e}}class Xs{constructor(){this.isContinuous=!1,this._materialHandler=new Qs}setup(e,t,i,r,s){let o;if(Array.isArray(i)){o=[];for(const e of i)t&&o.push(e.bannerImg._element.contentWindow);this._materialHandler.init(o,r,s)}else t?o=i.bannerImg._element.contentWindow:(o=s.dataCenter.isAMP?window:parent,s.dataCenter.playerType===n.H5_320X480&&(o=e.contentWindow)),this._materialHandler.init(o,r,s),this._materialHandler.setupReaction((t=>{let i,r=t.action,o=t.param;switch(r){case Hi.materialEvent.CALL_VIDEO_PLAY:e.play();break;case Hi.materialEvent.CALL_VIDEO_PAUSE:e.pause();break;case Hi.materialEvent.SEND_CLICK_LANDING_PAGE:if(i="string"==typeof o?o:o.url,s){const e=s.dataCenter.playerType||s.dataCenter.player_type;if(e!==n.H5_320X480_VIDEO_BANNER){if(e.indexOf("PAGE")>-1){const e=s.dataCenter.bannerDataInXml[0].linkUrls[o.url];if(void 0===e||"null"===e)return}this.isContinuous||(s.dispatch(Hi.events.BANNER_CLICK,o),this.isContinuous=!0,window.setTimeout((()=>{this.isContinuous=!1}),500))}else s.dispatch(Hi.events.BANNER_CLICK,i)}"null"!==i&&e&&e.mute(!0);break;case Hi.materialEvent.SEND_VIDEO_CLICK_AND_OPEN_URL:i=o.url,"null"!==o.url&&(void 0!==e&&e.mute(!0),fr.openUrl(i,{isUseAssign:s.dataCenter.isUseAssign,uid:s.dataCenter.uid,isVpaidParam:s.dataCenter.isVpaidParam}));break;case Hi.materialEvent.DISABLE_PLAYER_CONTROL:e.disablePlayerControl();break;case Hi.materialEvent.ADJUST_ICON_CLICK_AREA:s.dispatch(Hi.materialEvent.ADJUST_ICON_CLICK_AREA,o);break;case Hi.materialEvent.SET_VIDEO_CLICK_URL:e.videoClickUrl=o.url;break;case Hi.materialEvent.HIDE_UI_COMPONENT:this.hideComponent(o.componentName);break;case Hi.materialEvent.TOUCH_EVENT_SETUP:this.setupTouchEvent();break;case Hi.materialEvent.WAIT_FOR_EXPAND:s.dispatch(Hi.materialEvent.WAIT_FOR_EXPAND,o.eng);break;case Hi.materialEvent.SET_VIDEO_ZINDEX:s.dispatch(Hi.materialEvent.SET_VIDEO_ZINDEX,o.videoZindex),s.dataCenter.isStoryUserClick=!0;break;case Hi.materialEvent.DISPLAY_LAYOUT:s.dispatch(Hi.materialEvent.DISPLAY_LAYOUT,o);break;case Hi.materialEvent.SEND_EVENT:s.dispatch(Hi.materialEvent.SEND_EVENT,o);break;case Hi.materialEvent.GET_CUBE_CHANGE:s.dispatch(Hi.materialEvent.GET_CUBE_CHANGE,o.getCubeChange);break;case Hi.materialEvent.SEND_IFRAME_READY:s.dispatch(Hi.materialEvent.SEND_IFRAME_READY,o.sendIframeReady);break;case Hi.materialEvent.SETUP_TIME_EVENT:s.dispatch(Hi.materialEvent.SETUP_TIME_EVENT,o);break;case Hi.materialEvent.VIDEO_TIME_UPDATE:s.dispatch(Hi.materialEvent.VIDEO_TIME_UPDATE,o);break;case Hi.materialEvent.IS_FRAME_RUN_END:s.dispatch(Hi.materialEvent.IS_FRAME_RUN_END,o.isFrameRunEnd);break;case Hi.materialEvent.MIRF_PLAY_DONE:s.dispatch(Hi.materialEvent.MIRF_PLAY_DONE,o)}}))}sendBannerExposurePercentage(e,t,n){this._materialHandler.sendBannerExposurePercentage(e,t,n)}sendScrollerBannerExposure(e,t,n){this._materialHandler.sendScrollerBannerExposure(e,t,n)}sendInfoObject(e){this._materialHandler.sendInfoObject(e)}sendElementExposurePercentage(e){this._materialHandler.sendElementExposurePercentage(e)}sendSafeFrameGeomData(e){this._materialHandler.sendSafeFrameGeomData(e)}sendMirfIsTouched(e){this._materialHandler.sendMirfIsTouched(e)}onVideoEnded(){this._materialHandler.onVideoEnded()}sendIsExpand(e){this._materialHandler.sendIsExpand(e)}sendUserTouchToScale(e){this._materialHandler.sendIsUserTouch(e)}hideComponent(e){switch(e){case Ii:let e=this._materialHandler._eventCenter.diGet(Ii);e.isHiddenOnPurpose=!0,e.hide();break;case gi:let t=this._materialHandler._eventCenter.diGet(gi);t.isHiddenOnPurpose=!0,t.hide()}}setupTouchEvent(){let e=this._materialHandler._eventCenter.diGet(_i);e.show(),["touchstart","touchmove","touchend"].forEach((t=>{e.addEventListener(t,(e=>{this.dispatchTouchEvent({eventName:t,eventObject:e})})),document.addEventListener("touchmove",(e=>{let t=this._materialHandler._eventCenter.diGet(_i).element;e.target===t&&e.preventDefault()}),{passive:!1,capture:!0})}))}dispatchTouchEvent(e){let t={screenWidth:window.screen.width,eventName:e.eventName,pageX:void 0};"touchend"!==e.eventName&&(t.pageX=e.eventObject.targetTouches[0].pageX),this._materialHandler.sendMessageToMaterial({action:Hi.materialEvent.TOUCH_EVENT_DISPATCH,param:t})}}class Ks extends Ws{constructor(){super(...arguments),this.bannerData={bannerParam:{},bannerImg:{},banner:{},container:{},clickArea:{},customEvent:[],src:[],logoButton:{}},this.banner=[],this.bannerParam=[]}createView(){this.material=new Xs,this.bannerParam[0]=this.dataCenter.bannerDataInXml[0]||{sourceUrl:""},this.buildDraft();const e=this.dataCenter.bannerDataInXml[0].linkUrls[0];this.eventCenter.setClickUrl(e),this.eventCenter.dispatch(Us)}buildDraft(){const e=this.dataCenter.textData,t=null==e?void 0:e.content,n=this.isipIndex;this.layout=this.uiCenter.layout,this.container=this.uiCenter.buildFlashDrive320BannerArea({text:t,isipIndex:n,dataCenter:this.dataCenter}),this.highestWin.document.addEventListener("click",(e=>{const t=e.target;(t.id.indexOf("onead-banner-click-area")>-1||t.closest("#onead-banner-content"))&&this.eventCenter.dispatch(Hs)})),this.layout.appendChild(this.container),this.closeBtn=this.container.querySelector("#close-img"),this.closeBtn.addEventListener("click",(e=>{e.stopPropagation(),this.container.style.setProperty("opacity","0"),this.closeAd(this.highestWin)})),this.container=this.layout,this.highestWin.document.body.appendChild(this.layout)}}class qs extends Ws{constructor(){super(...arguments),this.bannerData={bannerParam:{},bannerImg:{},banner:{},container:{},clickArea:{},customEvent:[],src:[],logoButton:{}},this.banner=[],this.bannerParam=[]}createView(){let e;this.material=new Xs,this.bannerParam[0]=this.dataCenter.bannerDataInXml[0]||{sourceUrl:""},this.bannerParam[1]=this.dataCenter.bannerDataInXml[1]||{sourceUrl:""},this.buildDraft(),e=this.dataCenter.textData.length>1?this.dataCenter.textData[0].linkURL:this.dataCenter.textData.linkURL["#content"]||this.dataCenter.textData.linkURL,this.eventCenter.setClickUrl(e),this.eventCenter.dispatch(Us)}buildDraft(){let e;const t=this.dataCenter.textData;if(t.length){e=[];for(const n of t)e.push(n.content)}else e=t.content;const n=this.isipIndex,i=this.uiCenter.layout,r=this.uiCenter.wrapper,s=this.uiCenter.buildFlashDrive300BannerArea({text:e,isipIndex:n,dataCenter:this.dataCenter});r.appendChild(s),this.highestWin.document.addEventListener("click",(e=>{const t=e.target;(t.id.indexOf("onead-banner-click-area")>-1||t.closest("#onead-banner-content"))&&this.eventCenter.dispatch(Hs)}));s.querySelector("#close-img").addEventListener("click",(e=>{e.stopPropagation(),s.style.setProperty("opacity","0"),this.closeAd(this.highestWin)})),this.container=i,this.highestWin.document.body.appendChild(i)}}function Zs(e,t,n){const i=new RegExp(`(\\?|\\&)${t}=([^&?]+|)`,"g");return e=e.replace(i,`$1${t}=${encodeURIComponent(n)}`)}function Js(e){let t=0,n=0,i=0;const r=top.document.body,s=top.document.documentElement,o=document.getElementById(e.slotId)||e.slotElement;return n=Math.max(r.scrollHeight,r.offsetHeight,r.clientHeight,s.scrollHeight,s.offsetHeight,s.clientHeight),t=function(e){let t=e.offsetTop,n=0;for(;e&&e!==top.document.body&&n<=10;)n++,t=(e=e.offsetParent)?t+e.offsetTop:t;void 0!==t&&null!=t||(t=0);return t}(o),i=t>0&&n>0?Math.round(t/n*100):0,{slotHeight:t,pageHeight:n,positionPercentage:i}}class $s{constructor({adInfo:e,dataCenter:t}){var i,r;this.dispatchList={},this.isipIndex=0,this._sendCPE=!1,this._isUengage=!1,this.dataCenter=t,this.tracking=e.tracking,this.isipIndex=e.isip_index,e.l_json&&this.buildIframeForTracking(),(null===(r=null===(i=null==e?void 0:e.l_json)||void 0===i?void 0:i.xml)||void 0===r?void 0:r.linkXml)&&this.setupThirdPartyTracking(e),this.diCenter=new Bi,this.subscribe(Us,(e=>{this.subscribe(Hs,(e=>{this.dataCenter.isJson?(this.clickUrl=this.clickUrl.replace("ONEAD_UID_X",this.dataCenter.uid.toString()),this.clickUrl=this.clickUrl.replace("ONEAD_PLAID_X",this.dataCenter.textContents[this.isipIndex].pm_id)):(this.clickUrl=this.clickUrl.replace("ONEAD_UID_X","preview"),this.clickUrl=this.clickUrl.replace("ONEAD_PLAID_X","preview"));const i=navigator.userAgent.toLowerCase();1432849!==t.pid&&1000470!==t.uid||-1===i.indexOf("iphone")||(this.clickUrl.includes("?")?this.clickUrl=`${this.clickUrl}&fdBannerClick=true`:this.clickUrl=`${this.clickUrl}?fdBannerClick=true`),setTimeout((()=>{!function(e,t){const i=window.location.href;let r="_parent";const s=navigator.userAgent.toLowerCase();let o;switch(1432849!==t.pid&&1000470!==t.uid||(r=-1!==s.indexOf("iphone")?"_top":"_blank"),t.playerType){case n.FLASH_DRIVE_300:case n.FLASH_DRIVE_320:o=!0;break;default:o=!1}try{switch(!0){case i.indexOf(Yn)>-1:case i.indexOf(di)>-1:o||(r="_blank")}top.window.open(e,r)}catch(t){try{window.open(e,r)}catch(t){window.open(e,"_blank")}}}(this.clickUrl,this.dataCenter)}),250)})),this.subscribeMaterialEvent()}),{once:!0})}subscribeMaterialEvent(){this.subscribe(Hi.events.ENGAGEMENT,(e=>{this._isUengage&&(this.sendTrackingEvent(Hi.events.UENGAGE,e),this._isUengage=!1),this.sendCPE(),this.sendTrackingEvent(Hi.events.ENGAGEMENT,e),this.dispatch(Hi.materialEvent.SEND_TRACKING_EVENT,{eventName:Hi.events.ENGAGEMENT})})),this.subscribe(Hi.materialEvent.SEND_EVENT_ENG,(e=>{this._isUengage&&(this.sendTrackingEvent(Hi.events.UENGAGE,e),this._isUengage=!1),this.sendCPE(),this.sendTrackingEvent(Hi.events.ENGAGEMENT,e)})),this.subscribe(Hi.materialEvent.SEND_EVENT,(e=>{}))}dispatch(e,t){if(this.dataCenter.isJson&&(Vi.includes(e)&&e!==Hi.materialEvent.SEND_TRACKING_EVENT&&this.sendCPE(),this.sendTrackingEvent(e)),this.dispatchList[e]&&this.dispatchList[e].length>0)for(const n of this.dispatchList[e]){const i=n.option;n.callback(t),(null==i?void 0:i.once)&&(this.dispatchList[e]=this.dispatchList[e].filter((e=>n.callback!==e.callback)))}this.sendMaterialEvent(e)}subscribe(e,t,n){this.dispatchList[e]=this.dispatchList[e]||[],this.dispatchList[e].push({callback:t,option:n})}sendTrackingEvent(e,t){if(this.alreadySendEventList=this.alreadySendEventList||{},!this.alreadySendEventList[e]){if(this.tracking&&e!==Hi.materialEvent.SEND_TRACKING_EVENT){let t=this.tracking;t=this.addADAndPageData(e,t),this.dataCenter.exclude&&(t+="&exclude=1"),function(e,t){void 0!==e&&""!==e&&e.indexOf("//")>-1?fetch(e).then((e=>e)).catch((e=>{})):t&&"function"==typeof t&&t("reporting url error: "+e)}(t)}e!==Hs&&e!==Hi.materialEvent.SEND_TRACKING_EVENT&&e!==Hi.materialEvent.SEND_EVENT_ENG&&(this.alreadySendEventList[e]=!0)}}setupThirdPartyTracking(e){this.setupTrackingCode(e.l_json.xml.linkXml.tracking_code.code),this.setupExtension(e.l_json.xml.linkXml.Extensions.Extension)}setupTrackingCode(e){if(e)if(Array.isArray(e))for(const t of e)this.setupTrackingCodeToDispatchList(t);else this.setupTrackingCodeToDispatchList(e)}setupExtension(e){for(const t of e){const e=t.CustomEvents["-count"];if(e&&"0"!==e)if("1"===e)this.setupTrackingCodeToDispatchList(t.CustomEvents.CustomEvent);else{const e=t.CustomEvents.CustomEvent;for(const t of e)this.setupTrackingCodeToDispatchList(t)}}}setupTrackingCodeToDispatchList(e){let t=e["-event_type"]||e["-event"];"click"===t&&(t=Hs),this.dispatchList[t]=this.dispatchList[t]||[],this.dispatchList[t].push({callback:t=>{const n=e["-format"],i=e["#content"];!function(e,t,n,{isipIndex:i,uniqueID:r},s){let o,a,l;switch(e){case"js":n.indexOf(".js")>-1&&(l=t.createElement("script"),l.src=n,t.head.appendChild(l));break;case"pixel":n.indexOf("//")>-1&&((new Image).src=n.replace("[timestamp]",String(+new Date)));break;case"html":a=n.split(","),a[0].indexOf("onead_ias")>-1?fr.buildIasWrapper(a,s,a[0]):(o=`<script>var isipIndex = ${i};var uniqueID = '${r}'<\/script>`,t.writeln(o+n),t.close())}}(n,this.iframeForTrackingCode.contentDocument,i,{isipIndex:this.isipIndex,uniqueID:this.dataCenter.uniqueID},this)},option:{once:!0}})}addADAndPageData(e,t){null!==this.pageHeightInformation&&void 0!==this.pageHeightInformation||(this.pageHeightInformation=Js(this.dataCenter));return t=function(e){return e.replace(/(\[\w+])/g,"")}(Zs(Zs(Zs(function(e,t){return e.replace("[EVENT]",t)}(t,e),"vs","0"),"ppx","0"),"spp",((e,t)=>{let n;switch(typeof e){case"string":n=Number(e),isNaN(n)&&(n=0);break;case"number":n=e}return t?Math.round(n):Math.floor(n)})(this.pageHeightInformation.positionPercentage).toString()))}buildIframeForTracking(){this.iframeForTrackingCode=document.createElement("iframe"),this.iframeForTrackingCode.style.display="none",document.body.appendChild(this.iframeForTrackingCode);const e=this.iframeForTrackingCode.contentDocument;this.iframeForTrackingCode.onload=()=>{e.writeln("<html><head></head><body></body></html>")}}setClickUrl(e){this.clickUrl=e}sendMaterialEvent(e){(Object.values(Hi.events).includes(e)||Object.values(Hi.playerEvents).includes(e)||Object.values(Hi.viewEvents).includes(e)||Object.values(Hi.quarterEvents).includes(e))&&this.dispatch(Hi.materialEvent.SEND_TRACKING_EVENT,{eventName:e})}sendCPE(){this._sendCPE||(this.sendTrackingEvent(Hi.events.CPE),this._sendCPE=!0)}diGet(e){return this.diCenter.get(e)}sendErrorReport(e,t){this.dataCenter.reporting.sendErrorReporting(e,t)}}function eo(e){const t=document.createElement(e.type);if(t.id=e.id,function(e,t){for(const n in t)"width"===n||"height"===n||"margin"===n||"text-align"===n||"max-width"===n||"background"===n||"border"===n||"min-width"===n?e.style.setProperty(n,t[n],"important"):e.style.setProperty(n,t[n])}(t,e.styles),e.attr){const n=e.attr;for(const e in n)t.setAttribute(e,n[e])}return t}class to{constructor(e){this.firstTime=!0,this.isFlashDrive=!1,this.dataCenter=e,this.host=window.location.href}setMediaStyle(e){var t,i,r,s,o,a,l,d,c,u,p;const h="rgb(245, 245, 245)";switch(this.isFlashDrive=function(e){switch(e){case n.FLASH_DRIVE_300:case n.FLASH_DRIVE_320:return!0;default:return!1}}(this.dataCenter.playerType),!0){case this.host.indexOf(Ge)>-1:case this.host.indexOf(Qe)>-1:case this.host.indexOf(Xe)>-1:if(!this.isFlashDrive)try{top.window.screen.availWidth>1e3&&(e.wrapper.style.fontSize="18px")}catch(t){window.innerHeight>600?(e.wrapper.style.fontSize="28px",e.wrapper.style.lineHeight="40px",e.wrapper.style.padding="24px 6px"):(e.wrapper.style.fontSize="12px",e.wrapper.style.lineHeight="20px",e.wrapper.style.padding="12px")}break;case this.host.indexOf(sn)>-1:this.isFlashDrive&&(null===(i=null===(t=e.navIcon)||void 0===t?void 0:t.style)||void 0===i||i.setProperty("box-sizing","unset","important"),null===(s=null===(r=e.navIcon)||void 0===r?void 0:r.style)||void 0===s||s.setProperty("left","unset","important"));break;case this.host.indexOf(bn)>-1:this.isFlashDrive||(e.layout.style.padding="0 0 5px 0",e.wrapper.style.background="transparent",e.wrapper.style.border="none",e.wrapper.style.padding="0",e.textLi.style.background=h,e.textLi.classList.add("promote-word"),e.textLi.style.maxWidth="650px",e.textLi.style.fontSize="22px",e.textLi.style.margin="0",e.textSpan.style.textOverflow="unset",e.textSpan.style.webkitBoxOrient="unset",e.textSpan.style.padding="0.25rem 0 0 0",e.textSpan.style.background=h,e.textUl.style.position="relative",e.textUl.style.background=h,e.textUl.style.margin="0 0 5px 0",this.firstTime&&(e.textUl.appendChild(this.createLogo()),this.firstTime=!1));break;case this.host.indexOf(Yn)>-1:this.isFlashDrive||(e.layout.parentElement.parentElement.style.clear="both");break;case this.host.indexOf(Et)>-1:if(!this.isFlashDrive){const e=this.dataCenter.slotElement.parentElement.parentElement;e&&(e.style.width="auto",e.style.height="auto")}break;case this.host.indexOf(ct)>-1:case this.host.indexOf(ut)>-1:if(!this.isFlashDrive){const t=e.layout.closest(".banner");t&&t.style.setProperty("display","block","important");const n=document.createElement("style");top.document.head.appendChild(n);const i=n.sheet;null==i||i.insertRule("#div-onead-draft * { margin-top: unset !important }"),null==i||i.insertRule("#div-onead-draft * { padding-top: unset !important }")}break;case this.host.indexOf(Qn)>-1:this.isFlashDrive||(e.textSpan.style.top="0px",e.textSpan.style.padding="0px",e.textSpan.style.color="#000000",e.textSpan.style.fontSize="18px",e.textSpan.style.lineHeight="30px",e.textSpan.style.fontWeight="400",e.textSpan.style.textAlign="left",e.textSpan.style.background="none",e.textSpan.style.position="static",e.textSpan.style.whiteSpace="normal");break;case this.host.indexOf(Un)>-1:if(!this.isFlashDrive){e.textLi.style.color="#094",e.textLi.style.display="grid",e.textLi.style.gridTemplateColumns="0 1fr",e.textLi.style.alignItems="baseline",e.textLi.style.gap="2.5em",e.textLi.style.fontWeight="400",e.textLi.style.lineHeight="1.25",e.textLi.style.width="auto",e.textSpan.style.textDecoration="underline",e.textSpan.style.fontSize="20px",e.textSpan.style.lineHeight="1.6",e.textUl.style.listStyle="none",e.wrapper.style.background="none",e.wrapper.style.border="none",e.wrapper.style.padding=0;const t=document.createElement("style");t.innerHTML=`#${e.textLi.id}:before { content:''; margin-right: 10px; border: 1px solid #9e9e9e; padding: 0px 6px; color: #9e9e9e; font-size:12px; width:38px; max-height:20px; line-height:1.25; text-align: center; }`,top.document.head.appendChild(t),e.textUl.addEventListener("mouseover",(function(){this.style.textDecoration="none"}))}break;case this.host.indexOf(kn)>-1:if(!this.isFlashDrive){e.textLi.style.color="#e95520",e.textLi.style.display="flex",e.textLi.style.alignItems="baseline",e.textLi.style.width="auto",e.textLi.style.listStyle="none",e.textSpan.style.textDecoration="underline solid #e95520 1px",e.textSpan.style.textUnderlineOffset="5px",e.textSpan.style.fontSize="20px",e.textSpan.style.lineHeight="1.5",e.wrapper.style.background="none",e.wrapper.style.border="none",e.wrapper.style.padding=0;const t='\n                    content: "";\n                    font-size: 12px;\n                    font-family: "Josefin Sans", sans-serif;\n                    font-style: normal;\n                    line-height: 12px;\n                    background-color: rgb(245 244 238);\n                    color: rgb(67, 65, 65);\n                    white-space-collapse: collapse;\n                    text-wrap: nowrap;\n                    border-radius: 8px;\n                    padding: 5px 5px 2.5px 5px;\n                    margin: 8px 10px 0px 0px;\n                    width: 34px;\n                    text-align: center;',n=document.createElement("style");n.innerHTML=`#${e.textLi.id}:before { ${t} }`,top.document.head.appendChild(n),e.textUl.addEventListener("mouseover",(function(){this.style.textDecoration="none"}))}break;case this.host.indexOf(Ln)>-1:if(!this.isFlashDrive){const t=`#${e.textLi.id}::before {display:none;}`,n=top.document.head,i=document.createElement("style");i.appendChild(document.createTextNode(t)),n.appendChild(i);const r=document.createElement("style");if(r.innerHTML=`#${e.textLi.id}::marker { content:' '; color:#49cdb4;}`,top.document.head.appendChild(r),this.firstTime){const t=this.createLogo();t.style.bottom="4px",t.style.top="auto",t.style.transform="scale(0.6)",e.layout.appendChild(t),this.firstTime=!1}const s=function(){const e=eo({type:"div",id:"onead-CTA",styles:{width:"8%",right:"3.5%",height:"40px",overflow:"hidden","font-size":"20px",position:"absolute","min-width":"100px","line-height":"40px","border-radius":"40px","z-index":"2147483647"}}),t=eo({type:"div",id:"onead-CTA-btn",styles:{width:"100%",height:"100%",color:"#FFFFFF",position:"absolute",background:"#1789FA","text-align":"center","z-index":"1","pointer-events":"none"}});t.innerText="",e.appendChild(t);const n=eo({type:"div",id:"onead-CTA-Ani",styles:{width:"100%","z-index":"2",height:"100%",color:"#1789FA ",position:"absolute",background:"#FFFFFF",transition:"all 0.6s cubic-bezier(0.81,-0.01, 0.36, 0.98)","text-align":"center","pointer-events":"none","clip-path":"inset(0% 100% 0 0)"}});let i=!1;return setInterval((()=>{i?(n.style.clipPath="inset(0% 100% 0 0)",i=!1):(n.style.clipPath="inset(0% 0% 0 0)",i=!0)}),1e3),n.innerText="",e.appendChild(n),e}();e.wrapper.appendChild(s),e.textLi.style.fontSize="24px",e.textLi.style.fontWeight="450",e.textLi.style.margin="0px 0px 0px 26px",e.textLi.style.borderBottom="none",e.layout.style.padding=0,e.wrapper.style.padding=0,e.wrapper.style.height="100%",e.wrapper.style.display="flex",e.wrapper.style.flexDirection="column",e.wrapper.style.justifyContent="center",e.wrapper.style.background="#e0f4ff",e.textSpan.style.position="relative",e.textSpan.style.left="-10px",e.textLi.addEventListener("mouseover",(()=>{e.textLi.style.background="#e1f5ff"})),e.textLi.addEventListener("mouseout",(()=>{e.textLi.style.background="#e0f4ff"}));const h=null===(o=e.layout.parentElement.parentElement.parentElement)||void 0===o?void 0:o.nextElementSibling;h&&(h.style.background="#e0f4ff");const y=null===(d=null===(l=null===(a=e.layout.parentElement.parentElement)||void 0===a?void 0:a.parentElement)||void 0===l?void 0:l.parentElement)||void 0===d?void 0:d.parentElement.querySelector("p");y&&(y.style.display="none");const m=null===(p=null===(u=null===(c=e.layout.parentElement.parentElement)||void 0===c?void 0:c.parentElement)||void 0===u?void 0:u.parentElement)||void 0===p?void 0:p.parentElement;m&&(m.style.padding="0")}break;case 1000444===this.dataCenter.uid:case 1000445===this.dataCenter.uid:case 1000446===this.dataCenter.uid:case 1000447===this.dataCenter.uid:case 1000448===this.dataCenter.uid:this.isFlashDrive||(e.textUl.style.padding="0 0 0 7px");break;case 1432849===this.dataCenter.pid:case 1000470===this.dataCenter.uid:this.isFlashDrive&&(e.bannerWrapper.style.setProperty("background-color","rgba(0,0,0,0.48)","important"),e.closeButton.style.setProperty("display","none","important"))}}createLogo(){const t=e,n=`?utm_source=onead&utm_medium=${this.dataCenter.playMode}&utm_campaign=${this.dataCenter.pid}`,i=bs({type:"a",id:"logo-button",attr:{href:encodeURI(t+n),target:"_top"},styles:{position:"absolute",border:"none",width:"24px",height:"20px",right:"1px",top:"1px","z-index":"2147483647"}}),r=bs({type:"img",id:"logo-img"+this.dataCenter.isipIndex,attr:{src:ur},styles:{position:"absolute","text-align":"right",margin:"0 auto",width:"100%",height:"100%",right:"0",left:"0"}});return i.appendChild(r),i}setCustomHoverColor(){let e;switch(!0){case this.host.indexOf(bn)>-1:e="#bc0614";break;case this.host.indexOf(Qt)>-1:e="#FF5C1A";break;default:e="#56a8ff"}return e}}var no=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};window.Guoshi_Text=window.Guoshi_Text||{},window.Guoshi_Text.Main=class{init_player(e){return no(this,void 0,void 0,(function*(){const t=new xs(e),n=new to(t);this.uiCenter=new ks(t,n),this.start(t,this.uiCenter)}))}start(e,t){return no(this,void 0,void 0,(function*(){try{const i=e.textContents;for(let r of i){r.l_json||(r=yield Os(r)),yield e.assignResponseParams(r),e.setKeyWordsSystem(r);const i=e.playerType,s=new $s({adInfo:r,dataCenter:e});let o;switch(this.eventCenter=s,i){case n.TEXT_ONLY:o=new Gs({eventCenter:s,dataCenter:e,uiCenter:t});break;case n.FLASH_DRIVE_320:o=new Ks({eventCenter:s,dataCenter:e,uiCenter:t});break;case n.FLASH_DRIVE_300:o=new qs({eventCenter:s,dataCenter:e,uiCenter:t})}o.createView(r),e.layout=o}e.playerType===n.TEXT_ONLY&&(t.layout.style.display="block")}catch(e){const t=qi.CREATE_VIEW_FAIL;t.errorDesc.desc2=e.stack.replaceAll("\n",""),this.eventCenter.sendErrorReport(t)}}))}}})();