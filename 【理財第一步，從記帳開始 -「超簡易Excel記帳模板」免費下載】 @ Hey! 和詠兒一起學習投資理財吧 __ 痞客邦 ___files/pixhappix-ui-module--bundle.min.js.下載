!function(){"use strict";var t=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},e=function(e){return Object(t(e))},n={}.hasOwnProperty,i=function(t,e){return n.call(t,e)},o={}.toString,a=function(t){return o.call(t).slice(8,-1)},r=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==a(t)?t.split(""):Object(t)},s=function(e){return r(t(e))},c=Math.ceil,p=Math.floor,l=function(t){return isNaN(t=+t)?0:(t>0?p:c)(t)},h=Math.min,u=function(t){return t>0?h(l(t),9007199254740991):0},f=Math.max,x=Math.min,_="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,e){return t(e={exports:{}},e.exports),e.exports}var m,g=d((function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)})),b=(g.version,d((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}))),v=d((function(t){var e=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:g.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),k=0,y=Math.random(),w=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++k+y).toString(36))},E=v("keys"),C=function(t){return E[t]||(E[t]=w(t))},P=(m=!1,function(t,e,n){var i,o=s(t),a=u(o.length),r=function(t,e){return(t=l(t))<0?f(t+e,0):x(t,e)}(n,a);if(m&&e!=e){for(;a>r;)if((i=o[r++])!=i)return!0}else for(;a>r;r++)if((m||r in o)&&o[r]===e)return m||r||0;return!m&&-1}),T=C("IE_PROTO"),S=function(t,e){var n,o=s(t),a=0,r=[];for(n in o)n!=T&&i(o,n)&&r.push(n);for(;e.length>a;)i(o,n=e[a++])&&(~P(r,n)||r.push(n));return r},M="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),B=Object.keys||function(t){return S(t,M)},A=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},N=function(t,e,n){if(A(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},O=function(t){return"object"==typeof t?null!==t:"function"==typeof t},j=function(t){if(!O(t))throw TypeError(t+" is not an object!");return t},I=function(t){try{return!!t()}catch(t){return!0}},L=!I((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),H=b.document,z=O(H)&&O(H.createElement),F=function(t){return z?H.createElement(t):{}},R=!L&&!I((function(){return 7!=Object.defineProperty(F("div"),"a",{get:function(){return 7}}).a})),D=function(t,e){if(!O(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!O(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!O(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!O(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},W=Object.defineProperty,U={f:L?Object.defineProperty:function(t,e,n){if(j(t),e=D(e,!0),j(n),R)try{return W(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},G=L?function(t,e,n){return U.f(t,e,Y(1,n))}:function(t,e,n){return t[e]=n,t},V=function(t,e,n){var o,a,r,s=t&V.F,c=t&V.G,p=t&V.S,l=t&V.P,h=t&V.B,u=t&V.W,f=c?g:g[e]||(g[e]={}),x=f.prototype,_=c?b:p?b[e]:(b[e]||{}).prototype;for(o in c&&(n=e),n)(a=!s&&_&&void 0!==_[o])&&i(f,o)||(r=a?_[o]:n[o],f[o]=c&&"function"!=typeof _[o]?n[o]:h&&a?N(r,b):u&&_[o]==r?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(r):l&&"function"==typeof r?N(Function.call,r):r,l&&((f.virtual||(f.virtual={}))[o]=r,t&V.R&&x&&!x[o]&&G(x,o,r)))};V.F=1,V.G=2,V.S=4,V.P=8,V.B=16,V.W=32,V.U=64,V.R=128;var q=V,$=function(t,e){var n=(g.Object||{})[t]||Object[t],i={};i[t]=e(n),q(q.S+q.F*I((function(){n(1)})),"Object",i)};$("keys",(function(){return function(t){return B(e(t))}}));var X=g.Object.keys;var J=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};q(q.S+q.F*!L,"Object",{defineProperty:U.f});var K=g.Object,Z=function(t,e,n){return K.defineProperty(t,e,n)};function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Z(t,i.key,i)}}var tt=function(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t},et=G,nt={},it=L?Object.defineProperties:function(t,e){j(t);for(var n,i=B(e),o=i.length,a=0;o>a;)U.f(t,n=i[a++],e[n]);return t},ot=b.document,at=ot&&ot.documentElement,rt=C("IE_PROTO"),st=function(){},ct=function(){var t,e=F("iframe"),n=M.length;for(e.style.display="none",at.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ct=t.F;n--;)delete ct.prototype[M[n]];return ct()},pt=Object.create||function(t,e){var n;return null!==t?(st.prototype=j(t),n=new st,st.prototype=null,n[rt]=t):n=ct(),void 0===e?n:it(n,e)},lt=d((function(t){var e=v("wks"),n=b.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:w)("Symbol."+t))}).store=e})),ht=U.f,ut=lt("toStringTag"),ft=function(t,e,n){t&&!i(t=n?t:t.prototype,ut)&&ht(t,ut,{configurable:!0,value:e})},xt={};G(xt,lt("iterator"),(function(){return this}));var _t=C("IE_PROTO"),dt=Object.prototype,mt=Object.getPrototypeOf||function(t){return t=e(t),i(t,_t)?t[_t]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?dt:null},gt=lt("iterator"),bt=!([].keys&&"next"in[].keys()),vt=function(){return this},kt=function(t,e,n,i,o,a,r){!function(t,e,n){t.prototype=pt(xt,{next:Y(1,n)}),ft(t,e+" Iterator")}(n,e,i);var s,c,p,l=function(t){if(!bt&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",u="values"==o,f=!1,x=t.prototype,_=x[gt]||x["@@iterator"]||o&&x[o],d=_||l(o),m=o?u?l("entries"):d:void 0,g="Array"==e&&x.entries||_;if(g&&(p=mt(g.call(new t)))!==Object.prototype&&p.next&&ft(p,h,!0),u&&_&&"values"!==_.name&&(f=!0,d=function(){return _.call(this)}),!r||!bt&&!f&&x[gt]||G(x,gt,d),nt[e]=d,nt[h]=vt,o)if(s={values:u?d:l("values"),keys:a?d:l("keys"),entries:m},r)for(c in s)c in x||et(x,c,s[c]);else q(q.P+q.F*(bt||f),e,s);return s},yt=function(e){return function(n,i){var o,a,r=String(t(n)),s=l(i),c=r.length;return s<0||s>=c?e?"":void 0:(o=r.charCodeAt(s))<55296||o>56319||s+1===c||(a=r.charCodeAt(s+1))<56320||a>57343?e?r.charAt(s):o:e?r.slice(s,s+2):a-56320+(o-55296<<10)+65536}}(!0);kt(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=yt(e,n),this._i+=t.length,{value:t,done:!1})}));var wt=function(t,e){return{value:e,done:!!t}};kt(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,wt(1)):wt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values");nt.Arguments=nt.Array;for(var Et=lt("toStringTag"),Ct="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Pt=0;Pt<Ct.length;Pt++){var Tt=Ct[Pt],St=b[Tt],Mt=St&&St.prototype;Mt&&!Mt[Et]&&G(Mt,Et,Tt),nt[Tt]=nt.Array}var Bt={f:lt},At=Bt.f("iterator"),Nt=d((function(t){var e=w("meta"),n=U.f,o=0,a=Object.isExtensible||function(){return!0},r=!I((function(){return a(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++o,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!O(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!a(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!i(t,e)){if(!a(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return r&&c.NEED&&a(t)&&!i(t,e)&&s(t),t}}})),Ot=(Nt.KEY,Nt.NEED,Nt.fastKey,Nt.getWeak,Nt.onFreeze,U.f),jt=function(t){var e=g.Symbol||(g.Symbol={});"_"==t.charAt(0)||t in e||Ot(e,t,{value:Bt.f(t)})},It={f:Object.getOwnPropertySymbols},Lt={f:{}.propertyIsEnumerable},Ht=Array.isArray||function(t){return"Array"==a(t)},zt=M.concat("length","prototype"),Ft={f:Object.getOwnPropertyNames||function(t){return S(t,zt)}},Rt=Ft.f,Dt={}.toString,Wt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ut={f:function(t){return Wt&&"[object Window]"==Dt.call(t)?function(t){try{return Rt(t)}catch(t){return Wt.slice()}}(t):Rt(s(t))}},Yt=Object.getOwnPropertyDescriptor,Gt={f:L?Yt:function(t,e){if(t=s(t),e=D(e,!0),R)try{return Yt(t,e)}catch(t){}if(i(t,e))return Y(!Lt.f.call(t,e),t[e])}},Vt=Nt.KEY,qt=Gt.f,$t=U.f,Xt=Ut.f,Jt=b.Symbol,Kt=b.JSON,Zt=Kt&&Kt.stringify,Qt=lt("_hidden"),te=lt("toPrimitive"),ee={}.propertyIsEnumerable,ne=v("symbol-registry"),ie=v("symbols"),oe=v("op-symbols"),ae=Object.prototype,re="function"==typeof Jt,se=b.QObject,ce=!se||!se.prototype||!se.prototype.findChild,pe=L&&I((function(){return 7!=pt($t({},"a",{get:function(){return $t(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=qt(ae,e);i&&delete ae[e],$t(t,e,n),i&&t!==ae&&$t(ae,e,i)}:$t,le=function(t){var e=ie[t]=pt(Jt.prototype);return e._k=t,e},he=re&&"symbol"==typeof Jt.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Jt},ue=function(t,e,n){return t===ae&&ue(oe,e,n),j(t),e=D(e,!0),j(n),i(ie,e)?(n.enumerable?(i(t,Qt)&&t[Qt][e]&&(t[Qt][e]=!1),n=pt(n,{enumerable:Y(0,!1)})):(i(t,Qt)||$t(t,Qt,Y(1,{})),t[Qt][e]=!0),pe(t,e,n)):$t(t,e,n)},fe=function(t,e){j(t);for(var n,i=function(t){var e=B(t),n=It.f;if(n)for(var i,o=n(t),a=Lt.f,r=0;o.length>r;)a.call(t,i=o[r++])&&e.push(i);return e}(e=s(e)),o=0,a=i.length;a>o;)ue(t,n=i[o++],e[n]);return t},xe=function(t){var e=ee.call(this,t=D(t,!0));return!(this===ae&&i(ie,t)&&!i(oe,t))&&(!(e||!i(this,t)||!i(ie,t)||i(this,Qt)&&this[Qt][t])||e)},_e=function(t,e){if(t=s(t),e=D(e,!0),t!==ae||!i(ie,e)||i(oe,e)){var n=qt(t,e);return!n||!i(ie,e)||i(t,Qt)&&t[Qt][e]||(n.enumerable=!0),n}},de=function(t){for(var e,n=Xt(s(t)),o=[],a=0;n.length>a;)i(ie,e=n[a++])||e==Qt||e==Vt||o.push(e);return o},me=function(t){for(var e,n=t===ae,o=Xt(n?oe:s(t)),a=[],r=0;o.length>r;)!i(ie,e=o[r++])||n&&!i(ae,e)||a.push(ie[e]);return a};re||(et((Jt=function(){if(this instanceof Jt)throw TypeError("Symbol is not a constructor!");var t=w(arguments.length>0?arguments[0]:void 0),e=function(n){this===ae&&e.call(oe,n),i(this,Qt)&&i(this[Qt],t)&&(this[Qt][t]=!1),pe(this,t,Y(1,n))};return L&&ce&&pe(ae,t,{configurable:!0,set:e}),le(t)}).prototype,"toString",(function(){return this._k})),Gt.f=_e,U.f=ue,Ft.f=Ut.f=de,Lt.f=xe,It.f=me,Bt.f=function(t){return le(lt(t))}),q(q.G+q.W+q.F*!re,{Symbol:Jt});for(var ge="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),be=0;ge.length>be;)lt(ge[be++]);for(var ve=B(lt.store),ke=0;ve.length>ke;)jt(ve[ke++]);q(q.S+q.F*!re,"Symbol",{for:function(t){return i(ne,t+="")?ne[t]:ne[t]=Jt(t)},keyFor:function(t){if(!he(t))throw TypeError(t+" is not a symbol!");for(var e in ne)if(ne[e]===t)return e},useSetter:function(){ce=!0},useSimple:function(){ce=!1}}),q(q.S+q.F*!re,"Object",{create:function(t,e){return void 0===e?pt(t):fe(pt(t),e)},defineProperty:ue,defineProperties:fe,getOwnPropertyDescriptor:_e,getOwnPropertyNames:de,getOwnPropertySymbols:me}),Kt&&q(q.S+q.F*(!re||I((function(){var t=Jt();return"[null]"!=Zt([t])||"{}"!=Zt({a:t})||"{}"!=Zt(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e=i[1],(O(e)||void 0!==t)&&!he(t))return Ht(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!he(e))return e}),i[1]=e,Zt.apply(Kt,i)}}),Jt.prototype[te]||G(Jt.prototype,te,Jt.prototype.valueOf),ft(Jt,"Symbol"),ft(Math,"Math",!0),ft(b.JSON,"JSON",!0),jt("asyncIterator"),jt("observable");var ye=g.Symbol,we=d((function(t){function e(t){return(e="function"==typeof ye&&"symbol"==typeof At?function(t){return typeof t}:function(t){return t&&"function"==typeof ye&&t.constructor===ye&&t!==ye.prototype?"symbol":typeof t})(t)}function n(i){return"function"==typeof ye&&"symbol"===e(At)?t.exports=n=function(t){return e(t)}:t.exports=n=function(t){return t&&"function"==typeof ye&&t.constructor===ye&&t!==ye.prototype?"symbol":e(t)},n(i)}t.exports=n}));var Ee=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Ce=function(t,e){return!e||"object"!==we(e)&&"function"!=typeof e?Ee(t):e};$("getPrototypeOf",(function(){return function(t){return mt(e(t))}}));var Pe=g.Object.getPrototypeOf,Te=function(t,e){if(j(t),!O(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Se={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=N(Function.call,Gt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return Te(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:Te};q(q.S,"Object",{setPrototypeOf:Se.set});var Me=g.Object.setPrototypeOf,Be=d((function(t){function e(n){return t.exports=e=Me?Pe:function(t){return t.__proto__||Pe(t)},e(n)}t.exports=e}));q(q.S,"Object",{create:pt});var Ae=g.Object,Ne=function(t,e){return Ae.create(t,e)},Oe=d((function(t){function e(n,i){return t.exports=e=Me||function(t,e){return t.__proto__=e,t},e(n,i)}t.exports=e}));var je=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Ne(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)};var Ie,Le,He=function(t,e,n){return e in t?Z(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},ze="pilot_happix_noti_showed_timestamp",Fe="https://s.pixfs.net/common/pixhappix-ui-module/images",Re="https://s.pixfs.net/common",De=400222080391957,We="CLOUDY",Ue="RAINY",Ye="SUNNY",Ge=(He(Ie={},We,"".concat(Fe,"/weather_cloud.svg")),He(Ie,Ue,"".concat(Fe,"/weather_rain.svg")),He(Ie,Ye,"".concat(Fe,"/weather_sun.svg")),Ie),Ve=(He(Le={},We,"陰天還是要防曬唷～"),He(Le,Ue,"出門記得帶把傘！"),He(Le,Ye,"今天是晴朗的好天氣"),Le),qe={$prefix:"pixnet-happix-pilot",$mobile_screen_max_width:"768px",$desktop_screen_min_width:"769px",$big_happix_w:"70px",$big_happix_h:"80px",$color_white:"#ffffff",$color_black:"#000000",$color_grey:"#e9e9e9",$color_light_grey:"#f6f6f6",$color_deep_grey:"#4a4a4a",$color_font_grey:"#5e5f6a",$color_red:"#ff6868",$color_dark_red:"#f65f5e",$color_light_orange:"#fe7c46",$color_orange:"#f04e2f",$color_blue:"#6eacf5",$color_light_blue:"#00aef0",$color_deep_blue:"#4257ac",$color_dark_blue:"#4a90e2",$color_box_shadow:"rgba(0, 0, 0, 0.25)",$messenger_card_border_radius:"20px",$card_content_padding:"15px",$launcher_bar_height:"45px",$img_path_prefix:Fe,img_common_path_prefix:Re},$e=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;J(this,t),this.containerElement=e,this.props=n}return tt(t,[{key:"getCssPrefix",value:function(){return qe.$prefix}}]),t}(),Xe={wrapper:function(t){return{isEmpty:function(){return void 0===t},getElement:function(){return t},getElementByPostfix:function(e){return Xe.wrapper(t.querySelector(".".concat(qe.$prefix,"__").concat(e)))},getElementBySelector:function(e){return Xe.wrapper(t.querySelector(e))},getParentNode:function(){return Xe.wrapper(t.parentNode)},getDataset:function(){return t.dataset},hasClass:function(e){return t.classList.contains(e)},addClass:function(e){return t.classList.add(e),this},removeClass:function(e){return t.classList.remove(e),this},toggleClass:function(e,n){return t.classList.toggle(e,n),this},appendChild:function(e){return t.appendChild(e),this},setHTML:function(e){return t.innerHTML=e,Je(t),this},setStyle:function(e,n){return t.style[e]=n,this},bindEvent:function(e,n){return t.addEventListener(e,n),this},unbindEvent:function(e,n){return t.removeEventListener(e,n),this},fireEvent:function(e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)},scrollToTop:function(){t.scrollTop=0}}},getElementByPostfix:function(t){return Xe.getElementBySelector(".".concat(qe.$prefix,"__").concat(t))},getElementBySelector:function(t){return Xe.wrapper(document.querySelector(t))},createElement:function(t){var e=document.createElement("div");e.innerHTML=t;var n=document.createDocumentFragment();return Array.prototype.slice.apply(e.childNodes).map((function(t){return n.appendChild(t)})),n}},Je=function t(e){if("SCRIPT"===e.tagName)return e.parentNode.replaceChild(Ke(e),e),e;for(var n=0,i=e.childNodes;n<i.length;)t(i[n++]);return e},Ke=function(t){var e=document.createElement("script");e.text=t.innerHTML;for(var n=t.attributes.length-1;n>=0;n--)e.setAttribute(t.attributes[n].name,t.attributes[n].value);return e},Ze=Gt.f;$("getOwnPropertyDescriptor",(function(){return function(t,e){return Ze(s(t),e)}}));var Qe=g.Object,tn=function(t,e){return Qe.getOwnPropertyDescriptor(t,e)},en=g.Object.getOwnPropertySymbols;var nn=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=X(n);"function"==typeof en&&(i=i.concat(en(n).filter((function(t){return tn(n,t).enumerable})))),i.forEach((function(e){He(t,e,n[e])}))}return t},on=["isIncludeGAScript","isIncludePAScript"],an={currentOptions:{variant:"",projectName:"",domainAppend:"",loginURL:"",logoutURL:"",registerURL:"",memberUniqid:"",giftNotificationContent:{},ga:{isIncludePAScript:!0,trackingId:""},pa:{isIncludePAScript:!0,venue:""},style:{width:{pilotWidth:960},zIndex:{pilotZIndex:2},bubbleFixedPosition:{left:null,right:null,top:null,bottom:null}}},isInvalidConfig:function(t,e){return!t.hasOwnProperty(e)&&-1===on.indexOf(e)},setOptions:function(t){if(!t)throw new Error("ERROR: PixHappixPilot options are required.");if(!t instanceof Object)throw new Error("ERROR: PixHappixPilot options should be json object.");!function t(e,n,i){return X(n).forEach((function(o){var a=e?e+".":"";an.isInvalidConfig(i,o),i[o]instanceof Object&&t("".concat(a).concat(o),n[o],i[o])}))}("",an.currentOptions,t),an.currentOptions=nn({},an.currentOptions,t)},getOptions:function(){return{getVariant:function(){return an.currentOptions.variant},getProjectName:function(){return an.currentOptions.projectName},getDomainAppend:function(){return an.currentOptions.domainAppend},getLoginURL:function(){return an.currentOptions.loginURL},getLogoutURL:function(){return an.currentOptions.logoutURL},getRegisterURL:function(){return an.currentOptions.registerURL},getMemberUniqid:function(){return an.currentOptions.memberUniqid},getGiftNotificationContent:function(){return an.currentOptions.giftNotificationContent},getTrackingId:function(){return an.currentOptions.ga.trackingId},isIncludeGAScript:function(){return an.currentOptions.ga.isIncludeGAScript},getVenue:function(){return an.currentOptions.pa.venue},isIncludePAScript:function(){return an.currentOptions.pa.isIncludePAScript},getPilotWidth:function(){return an.currentOptions.style.width.pilotWidth},getPilotZIndex:function(){return an.currentOptions.style.zIndex.pilotZIndex},getBubbleFixedPosition:function(){return an.currentOptions.style.bubbleFixedPosition||{}}}}},rn=function(){if("undefined"==typeof gtag){var t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js",t.async=!0,document.head.appendChild(t)}},sn=function(t){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t)},cn=function(t,e){gtag("config",t,{user_id:e})},pn=function(t,e){var n,i,o,a;"undefined"==typeof _piq&&(i="script",o=(n=document).getElementsByTagName(i)[0],(a=n.createElement(i)).async=1,a.src="https://s.pixanalytics.com/js/pi.min.js",o.parentNode.insertBefore(a,o))},ln=function(t){gtag("config",an.getOptions().getTrackingId(),{user_id:t})},hn=function(t){"undefined"!=typeof gtag&&gtag("event",t.action,{event_category:t.category,event_label:t.label,value:t.id,send_to:an.getOptions().getTrackingId()}),"undefined"!=typeof _piq&&_piq.push(["trackEvent",t.category,t.action,t.label,t.id])},un=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=an.getOptions().getGiftNotificationContent(),o=i.project_id,a=i.project_name,r="".concat(o,"_CTA_").concat(a);"undefined"!=typeof gtag&&gtag("event",t,{event_category:r,event_label:e,send_to:n}),"undefined"!=typeof _piq&&_piq.push(["trackEvent",r,t,e])},fn=function(t){(new Image).src=t},xn=function(t,e,n){var i="?with=".concat(e,"&height=").concat(n,"&url=").concat(encodeURIComponent(t));return"".concat("https://imageproxy.pimg.tw/zoomcrop").concat(i)};function _n(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}_n('@media screen and (max-width:768px){.pixnet-happix-pilot__sticky-box{position:fixed;right:0;bottom:45px;left:0;z-index:99998;width:100vw;height:100px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px 10px 0 0;will-change:transform;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 44px);height:24px;padding-top:5px;padding-left:10px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:55px!important;height:55px!important;margin:6px 10px 10px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:230px;font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px;top:33px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px;left:75px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:8px 27px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:10px;bottom:10px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit;top:33px}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}@media screen and (min-width:769px){.pixnet-happix-pilot__sticky-box{position:fixed;right:calc(50% - 452px);bottom:65px;z-index:1000;width:360px;max-width:100vw;height:120px;font-family:PingFang TC;color:#000;background:#fff;border-radius:10px;will-change:transform;-webkit-transform:translateY(200px);transform:translateY(200px);-webkit-transition:-webkit-transform .5s;transition:-webkit-transform .5s;transition:transform .5s;transition:transform .5s,-webkit-transform .5s;cursor:pointer}.pixnet-happix-pilot__sticky-box:after{content:"";position:absolute;right:40px;bottom:-20px;width:20px;height:20px;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/cta_triangle_white.svg)}.pixnet-happix-pilot__sticky-box a{text-decoration:none}.pixnet-happix-pilot__sticky-box.show{-webkit-box-shadow:0 0 20px rgba(0,0,0,.25);box-shadow:0 0 20px rgba(0,0,0,.25);-webkit-transform:translateY(0);transform:translateY(0)}.pixnet-happix-pilot__sticky-box__link--title{-ms-flex-line-pack:center;align-content:center;overflow:hidden;width:calc(100% - 50px);height:24px;padding-top:12px;padding-left:15px;font-weight:500;font-size:17px;line-height:24px;letter-spacing:1px}.pixnet-happix-pilot__sticky-box__link--title,.pixnet-happix-pilot__sticky-box__link__img{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__sticky-box__link__img{justify-items:center;margin-right:3px;border-radius:50%;background-color:#f6f6f6}.pixnet-happix-pilot__sticky-box__title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__img{width:66px!important;height:66px!important;margin:5px 15px 15px!important;border-radius:10px}.pixnet-happix-pilot__sticky-box__info--description{position:absolute;top:33px;width:230px;font-size:13px!important;letter-spacing:1px;color:#5e5f6a!important;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pixnet-happix-pilot__sticky-box__link--description{margin-top:2px}.pixnet-happix-pilot__sticky-box__price{position:absolute;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;bottom:8px}.pixnet-happix-pilot__sticky-box__price div{pointer-events:none}.pixnet-happix-pilot__sticky-box__price>div:nth-child(2){margin-right:12px;line-height:10px}.pixnet-happix-pilot__sticky-box__price>div>strike{font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__price>div>span:first-child{font-size:16px!important;margin-right:5px;color:#f65f5e!important;font-weight:600}.pixnet-happix-pilot__sticky-box__price>div>span:nth-child(2){font-size:10px!important;color:#5e5f6a!important}.pixnet-happix-pilot__sticky-box__button{position:absolute;right:10px;bottom:10px;padding:10px 25px;font-weight:500;font-size:15px;letter-spacing:1px;color:#fff;background-color:#00aef0;border-radius:6px}.pixnet-happix-pilot__sticky-box__close{position:absolute;top:0;right:0;width:42px;height:42px;padding-top:4px;color:transparent;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 100% 0}.pixnet-happix-pilot__sticky-box__info{padding-left:30px;font-size:17px;line-height:2;color:#f04e2f;background:transparent 5px no-repeat}.pixnet-happix-pilot__sticky-box__link--button{position:absolute;right:30px;bottom:15px;width:120px;height:36px;font-size:13px;color:#fff;background-color:#f04e2f;border-radius:6px;cursor:pointer}.pixnet-happix-pilot__sticky-box__btn{display:inline-block;width:120px;height:36px;font-weight:500;font-size:15px;line-height:36px;letter-spacing:1px;text-align:center}.pixnet-happix-pilot__sticky-box__info--date,.pixnet-happix-pilot__sticky-box__info--people,.pixnet-happix-pilot__sticky-box__link--description,.pixnet-happix-pilot__sticky-box__link--price,.pixnet-happix-pilot__sticky-box__link--title{color:inherit}.pixnet-happix-pilot__sticky-box__btn--red{background-color:#f04e2f}.pixnet-happix-pilot__sticky-box__btn--blue{background-color:#00aef0}}');var dn=function(t){function e(t,n){var i;return J(this,e),(i=Ce(this,Be(e).call(this,t))).isSendCTAViewEvent=!1,i.giftNotification=n||{},i.giftNotificationContent=i.giftNotification.widget_content||{},i.giftNotificationContentType=i.giftNotification.content_type||"",i.ga=i.giftNotificationContent.ga||"",i.id=i.giftNotification.project_id,i.handleNavigate=i.handleNavigate.bind(Ee(Ee(i))),i.bindCTAClickEvent=i.bindCTAClickEvent.bind(Ee(Ee(i))),i.openNewWindow=i.openNewWindow.bind(Ee(Ee(i))),i}return je(e,$e),tt(e,[{key:"makeid",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}},{key:"getClickLink",value:function(t){var e=t.link,n=e.includes("?")?"&":"?",i=this.makeid(40);return"".concat(e).concat(n,"click_id=").concat(i)}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.img_link||"",n=this.giftNotificationContent.title||"",i=this.giftNotificationContent.description||"",o=this.giftNotificationContent.button_name||"",a=this.giftNotificationContent.position_html,r=this.getClickLink(this.giftNotificationContent),s="",c="",p="";return e&&(s='<a class="'.concat(t,'__sticky-box__link--img" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <img src="').concat(xn(e,80,80),'" class="').concat(t,'__sticky-box__img" alt="sticky box" style="float:left;margin:10px;width:80px;height:80px;">\n                    </a>')),i&&(c='<a class="'.concat(t,'__sticky-box__link--description" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                        <span class="').concat(t,'__sticky-box__info--description" style="font-size:12px;color:#999;">').concat(i,"</span>\n                    </a>")),o&&(p='<a href="'.concat(r,'" class="').concat(t,'__sticky-box__button" target="_blank" rel="nofollow noopener">\n                ').concat(o,"\n            </a>")),"script"===this.giftNotificationContentType&&a?'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(r,'" data-button-name="').concat(o,'">\n                ').concat(a,'\n                <div class="').concat(t,'__sticky-box__close"></div>\n            </div>'):'<div class="'.concat(t,"__sticky-box ").concat(t,'__sticky-box" data-title="').concat(n,'" data-img-link="').concat(e,'" data-description="').concat(i,'" data-link="').concat(r,'" data-button-name="').concat(o,'">\n            <a class="').concat(t,'__sticky-box__link--title" href="').concat(r,'" target="_blank" rel="nofollow noopener">\n                <div class="').concat(t,'__sticky-box__link__img"><img src="').concat(Fe,'/btn_gift_cta_y.svg" alt="cta gift" width="18" height="18"/></div>\n                <div class="').concat(t,'__sticky-box__title" style="height:auto;">').concat(n,"</div>\n            </a>\n            ").concat(s,"\n            ").concat(c,"\n            ").concat(this.getContentTemplate(),'\n            <div class="').concat(t,'__sticky-box__close"></div>\n            ').concat(p,"\n        </div>")}},{key:"getContentTemplate",value:function(){var t=this.getCssPrefix(),e=this.giftNotificationContent.html||"",n=this.giftNotificationContent.original_price||"",i=this.giftNotificationContent.price||"",o="";return i&&"0"!==i?(""!==n&&"0"!==n&&(o="<div></div><div><strike>".concat(n,"</strike></div>")),'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(o,"\n                    <div>\n                        <span>").concat(i,"</span><span>起</span>\n                    </div>\n                </a>\n            ")):e?'\n                <a class="'.concat(t,'__sticky-box__price" href="').concat(this.giftNotificationContent.link,'" target="_blank" rel="nofollow noopener">\n                    ').concat(e,"\n                </a>\n            "):""}},{key:"getElements",value:function(){this.giftNotificationElement=Xe.getElementByPostfix("sticky-box"),this.closeButtonElement=this.giftNotificationElement.getElementByPostfix("sticky-box__close")}},{key:"bindEvents",value:function(){this.giftNotificationElement.bindEvent("click",this.bindCTAClickEvent)}},{key:"bindCTAClickEvent",value:function(t){var e=t.target,n=this.giftNotification.click_link.match(/\?/)?"&":"?";if("pixnet-happix-pilot__sticky-box__close"===e.className)return this.containerElement.fireEvent("close"),this.giftNotificationElement.removeClass("show"),un("CTA_Close",location.href,this.ga),void fn("".concat(this.giftNotification.click_link).concat(n,"position=close"));var i={title:["CTA_Click_Title","title"],price:["CTA_Click_Price","other"],btn:["CTA_Click_Button","button"],img:["CTA_Click_Image","image"],description:["CTA_Click_Description","description"],button:["CTA_Click_Button","button"]},o="CTA_Click_other",a="other";for(var r in i)if(0<=e.className.indexOf(r)){o=i[r][0],a=i[r][1];break}this.giftNotificationContent.link?(un(o,"".concat(location.href,"::").concat(this.giftNotificationContent.link),this.ga),fn("".concat(this.giftNotification.click_link).concat(n,"position=").concat(a)),"CTA_Click_other"===o&&(this.openNewWindow(this.giftNotificationContent.link),t.preventDefault())):t.preventDefault()}},{key:"handleNavigate",value:function(){var t=this.giftNotificationContent.link;t&&window.open(t+"?utm_medium=-new","_blank")}},{key:"openNewWindow",value:function(t){var e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener",e.click()}},{key:"hide",value:function(){return this.giftNotificationElement.removeClass("show"),this}},{key:"show",value:function(){return this.giftNotificationElement.addClass("show"),this.isSendCTAViewEvent||(un("CTA_View","",this.ga),hn({category:"pilot-CTA",action:"giftView"}),fn("".concat(this.giftNotification.pv_link)),this.isSendCTAViewEvent=!0),this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.giftNotification.pv_load_link&&fn("".concat(this.giftNotification.pv_load_link)),this}}]),e}();_n("@media screen and (max-width:768px){.pixnet-happix-pilot__happix-notification{position:fixed;right:10px;bottom:47px;left:10px;width:calc(100% - 20px);margin:auto}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;height:20px;margin-right:15px;margin-left:15px;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-notification{position:fixed;right:0;bottom:48px;left:0;width:100%;margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-notification.hidden{opacity:0;-webkit-transform:translateY(52px);transform:translateY(52px)}.pixnet-happix-pilot__happix-notification__wrapper{position:absolute;right:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:300px;height:50px;background:rgba(0,0,0,.8);border-radius:20px;cursor:pointer}.pixnet-happix-pilot__happix-notification__icon-container{position:relative;width:58px;-ms-flex-item-align:end;align-self:flex-end}.pixnet-happix-pilot__happix-notification__icon-container>*{position:absolute;bottom:-12px;left:-9px;width:70px}.pixnet-happix-pilot__happix-notification__message{-webkit-box-flex:1;-ms-flex:1;flex:1;max-height:36px;color:#fff;font-family:PingFang TC;font-size:13px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.9px;text-overflow:clip}.pixnet-happix-pilot__happix-notification__separator{height:25px;margin-left:11px;border-left:1px solid hsla(0,0%,100%,.2)}.pixnet-happix-pilot__happix-notification__close-button{width:20px;margin-right:15px;margin-left:15px;cursor:pointer}}");var mn=function(t){function e(t){return J(this,e),Ce(this,Be(e).call(this,t))}return je(e,$e),tt(e,[{key:"getTemplates",value:function(){var t=this.getCssPrefix();return'\n            <div\n                class="'.concat(t,'__happix-notification hidden"\n                style="max-width: ').concat(an.getOptions().getPilotWidth(),'px"\n            >\n                <div class="').concat(t,'__happix-notification__wrapper">\n                    <div class="').concat(t,'__happix-notification__icon-container">\n                        <img\n                            src="').concat(Fe,'/btn-happix-ufo.png"\n                            srcset="').concat(Fe,"/btn-happix-ufo@2x.png 2x,\n                                ").concat(Fe,'/btn-happix-ufo@3x.png 3x"\n                            alt="happix ufo"\n                        />\n                    </div>\n                    <div class="').concat(t,'__happix-notification__message"></div>\n                    <div class="').concat(t,'__happix-notification__separator"></div>\n                    <img\n                        class="').concat(t,'__happix-notification__close-button"\n                        src="').concat(Fe,'/btn_close_alpha_v2.svg"\n                        alt="close alpha"\n                    />\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.happixNotificationElement=Xe.getElementByPostfix("happix-notification"),this.closeButtonElement=this.happixNotificationElement.getElementByPostfix("happix-notification__close-button"),this.happixMessage=this.happixNotificationElement.getElementByPostfix("happix-notification__message")}},{key:"bindEvents",value:function(){var t=this;this.closeButtonElement.bindEvent("click",(function(e){t.containerElement.fireEvent("close"),e.stopPropagation()})),this.happixNotificationElement.bindEvent("click",(function(){t.containerElement.fireEvent("click")}))}},{key:"hide",value:function(){return this.happixNotificationElement.addClass("hidden"),this}},{key:"show",value:function(){return this.happixNotificationElement.setStyle("transition","all .4s").removeClass("hidden"),this}},{key:"setMessage",value:function(t){this.happixMessage.setHTML(t)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplates()),this.getElements(),this.bindEvents(),this}}]),e}(),gn=Object.assign,bn=!gn||I((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=gn({},t)[n]||Object.keys(gn({},e)).join("")!=i}))?function(t,n){for(var i=e(t),o=arguments.length,a=1,s=It.f,c=Lt.f;o>a;)for(var p,l=r(arguments[a++]),h=s?B(l).concat(s(l)):B(l),u=h.length,f=0;u>f;)c.call(l,p=h[f++])&&(i[p]=l[p]);return i}:gn;q(q.S+q.F,"Object",{assign:bn});var vn=g.Object.assign,kn=d((function(t,e){!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof _&&_.global===_&&_||this||{},i=n._,o=Array.prototype,a=Object.prototype,r="undefined"!=typeof Symbol?Symbol.prototype:null,s=o.push,c=o.slice,p=a.toString,l=a.hasOwnProperty,h=Array.isArray,u=Object.keys,f=Object.create,x=function(){},d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};e.nodeType?n._=d:(!t.nodeType&&t.exports&&(e=t.exports=d),e._=d),d.VERSION="1.9.1";var m,g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,a){return t.call(e,n,i,o,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,n){return d.iteratee!==m?d.iteratee(t,e):null==t?d.identity:d.isFunction(t)?g(t,e,n):d.isObject(t)&&!d.isArray(t)?d.matcher(t):d.property(t)};d.iteratee=m=function(t,e){return b(t,e,1/0)};var v=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var a=Array(e+1);for(o=0;o<e;o++)a[o]=arguments[o];return a[e]=i,t.apply(this,a)}},k=function(t){if(!d.isObject(t))return{};if(f)return f(t);x.prototype=t;var e=new x;return x.prototype=null,e},y=function(t){return function(e){return null==e?void 0:e[t]}},w=function(t,e){return null!=t&&l.call(t,e)},E=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},C=Math.pow(2,53)-1,P=y("length"),T=function(t){var e=P(t);return"number"==typeof e&&e>=0&&e<=C};d.each=d.forEach=function(t,e,n){var i,o;if(e=g(e,n),T(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else{var a=d.keys(t);for(i=0,o=a.length;i<o;i++)e(t[a[i]],a[i],t)}return t},d.map=d.collect=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=Array(o),r=0;r<o;r++){var s=i?i[r]:r;a[r]=e(t[s],s,t)}return a};var S=function(t){return function(e,n,i,o){var a=arguments.length>=3;return function(e,n,i,o){var a=!T(e)&&d.keys(e),r=(a||e).length,s=t>0?0:r-1;for(o||(i=e[a?a[s]:s],s+=t);s>=0&&s<r;s+=t){var c=a?a[s]:s;i=n(i,e[c],c,e)}return i}(e,g(n,o,4),i,a)}};d.reduce=d.foldl=d.inject=S(1),d.reduceRight=d.foldr=S(-1),d.find=d.detect=function(t,e,n){var i=(T(t)?d.findIndex:d.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},d.filter=d.select=function(t,e,n){var i=[];return e=b(e,n),d.each(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i},d.reject=function(t,e,n){return d.filter(t,d.negate(b(e)),n)},d.every=d.all=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(!e(t[r],r,t))return!1}return!0},d.some=d.any=function(t,e,n){e=b(e,n);for(var i=!T(t)&&d.keys(t),o=(i||t).length,a=0;a<o;a++){var r=i?i[a]:a;if(e(t[r],r,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,i){return T(t)||(t=d.values(t)),("number"!=typeof n||i)&&(n=0),d.indexOf(t,e,n)>=0},d.invoke=v((function(t,e,n){var i,o;return d.isFunction(e)?o=e:d.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),d.map(t,(function(t){var a=o;if(!a){if(i&&i.length&&(t=E(t,i)),null==t)return;a=t[e]}return null==a?a:a.apply(t,n)}))})),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,e,n){var i,o,a=-1/0,r=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,c=(t=T(t)?t:d.values(t)).length;s<c;s++)null!=(i=t[s])&&i>a&&(a=i);else e=b(e,n),d.each(t,(function(t,n,i){((o=e(t,n,i))>r||o===-1/0&&a===-1/0)&&(a=t,r=o)}));return a},d.min=function(t,e,n){var i,o,a=1/0,r=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,c=(t=T(t)?t:d.values(t)).length;s<c;s++)null!=(i=t[s])&&i<a&&(a=i);else e=b(e,n),d.each(t,(function(t,n,i){((o=e(t,n,i))<r||o===1/0&&a===1/0)&&(a=t,r=o)}));return a},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,n){if(null==e||n)return T(t)||(t=d.values(t)),t[d.random(t.length-1)];var i=T(t)?d.clone(t):d.values(t),o=P(i);e=Math.max(Math.min(e,o),0);for(var a=o-1,r=0;r<e;r++){var s=d.random(r,a),c=i[r];i[r]=i[s],i[s]=c}return i.slice(0,e)},d.sortBy=function(t,e,n){var i=0;return e=b(e,n),d.pluck(d.map(t,(function(t,n,o){return{value:t,index:i++,criteria:e(t,n,o)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")};var M=function(t,e){return function(n,i,o){var a=e?[[],[]]:{};return i=b(i,o),d.each(n,(function(e,o){var r=i(e,o,n);t(a,e,r)})),a}};d.groupBy=M((function(t,e,n){w(t,n)?t[n].push(e):t[n]=[e]})),d.indexBy=M((function(t,e,n){t[n]=e})),d.countBy=M((function(t,e,n){w(t,n)?t[n]++:t[n]=1}));var B=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(t){return t?d.isArray(t)?c.call(t):d.isString(t)?t.match(B):T(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:T(t)?t.length:d.keys(t).length},d.partition=M((function(t,e,n){t[n?0:1].push(e)}),!0),d.first=d.head=d.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,Boolean)};var A=function(t,e,n,i){for(var o=(i=i||[]).length,a=0,r=P(t);a<r;a++){var s=t[a];if(T(s)&&(d.isArray(s)||d.isArguments(s)))if(e)for(var c=0,p=s.length;c<p;)i[o++]=s[c++];else A(s,e,n,i),o=i.length;else n||(i[o++]=s)}return i};d.flatten=function(t,e){return A(t,e,!1)},d.without=v((function(t,e){return d.difference(t,e)})),d.uniq=d.unique=function(t,e,n,i){d.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=b(n,i));for(var o=[],a=[],r=0,s=P(t);r<s;r++){var c=t[r],p=n?n(c,r,t):c;e&&!n?(r&&a===p||o.push(c),a=p):n?d.contains(a,p)||(a.push(p),o.push(c)):d.contains(o,c)||o.push(c)}return o},d.union=v((function(t){return d.uniq(A(t,!0,!0))})),d.intersection=function(t){for(var e=[],n=arguments.length,i=0,o=P(t);i<o;i++){var a=t[i];if(!d.contains(e,a)){var r;for(r=1;r<n&&d.contains(arguments[r],a);r++);r===n&&e.push(a)}}return e},d.difference=v((function(t,e){return e=A(e,!0,!0),d.filter(t,(function(t){return!d.contains(e,t)}))})),d.unzip=function(t){for(var e=t&&d.max(t,P).length||0,n=Array(e),i=0;i<e;i++)n[i]=d.pluck(t,i);return n},d.zip=v(d.unzip),d.object=function(t,e){for(var n={},i=0,o=P(t);i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var N=function(t){return function(e,n,i){n=b(n,i);for(var o=P(e),a=t>0?0:o-1;a>=0&&a<o;a+=t)if(n(e[a],a,e))return a;return-1}};d.findIndex=N(1),d.findLastIndex=N(-1),d.sortedIndex=function(t,e,n,i){for(var o=(n=b(n,i,1))(e),a=0,r=P(t);a<r;){var s=Math.floor((a+r)/2);n(t[s])<o?a=s+1:r=s}return a};var O=function(t,e,n){return function(i,o,a){var r=0,s=P(i);if("number"==typeof a)t>0?r=a>=0?a:Math.max(a+s,r):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return i[a=n(i,o)]===o?a:-1;if(o!=o)return(a=e(c.call(i,r,s),d.isNaN))>=0?a+r:-1;for(a=t>0?r:s-1;a>=0&&a<s;a+=t)if(i[a]===o)return a;return-1}};d.indexOf=O(1,d.findIndex,d.sortedIndex),d.lastIndexOf=O(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),a=0;a<i;a++,t+=n)o[a]=t;return o},d.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,o=t.length;i<o;)n.push(c.call(t,i,i+=e));return n};var j=function(t,e,n,i,o){if(!(i instanceof e))return t.apply(n,o);var a=k(t.prototype),r=t.apply(a,o);return d.isObject(r)?r:a};d.bind=v((function(t,e,n){if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");var i=v((function(o){return j(t,i,e,this,n.concat(o))}));return i})),d.partial=v((function(t,e){var n=d.partial.placeholder,i=function(){for(var o=0,a=e.length,r=Array(a),s=0;s<a;s++)r[s]=e[s]===n?arguments[o++]:e[s];for(;o<arguments.length;)r.push(arguments[o++]);return j(t,i,this,this,r)};return i})),d.partial.placeholder=d,d.bindAll=v((function(t,e){var n=(e=A(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=d.bind(t[i],t)}})),d.memoize=function(t,e){var n=function(i){var o=n.cache,a=""+(e?e.apply(this,arguments):i);return w(o,a)||(o[a]=t.apply(this,arguments)),o[a]};return n.cache={},n},d.delay=v((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),d.defer=d.partial(d.delay,d,1),d.throttle=function(t,e,n){var i,o,a,r,s=0;n||(n={});var c=function(){s=!1===n.leading?0:d.now(),i=null,r=t.apply(o,a),i||(o=a=null)},p=function(){var p=d.now();s||!1!==n.leading||(s=p);var l=e-(p-s);return o=this,a=arguments,l<=0||l>e?(i&&(clearTimeout(i),i=null),s=p,r=t.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(c,l)),r};return p.cancel=function(){clearTimeout(i),s=0,i=o=a=null},p},d.debounce=function(t,e,n){var i,o,a=function(e,n){i=null,n&&(o=t.apply(e,n))},r=v((function(r){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(a,e),s&&(o=t.apply(this,r))}else i=d.delay(a,e,this,r);return o}));return r.cancel=function(){clearTimeout(i),i=null},r},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2),d.restArguments=v;var I=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],H=function(t,e){var n=L.length,i=t.constructor,o=d.isFunction(i)&&i.prototype||a,r="constructor";for(w(t,r)&&!d.contains(e,r)&&e.push(r);n--;)(r=L[n])in t&&t[r]!==o[r]&&!d.contains(e,r)&&e.push(r)};d.keys=function(t){if(!d.isObject(t))return[];if(u)return u(t);var e=[];for(var n in t)w(t,n)&&e.push(n);return I&&H(t,e),e},d.allKeys=function(t){if(!d.isObject(t))return[];var e=[];for(var n in t)e.push(n);return I&&H(t,e),e},d.values=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},d.mapObject=function(t,e,n){e=b(e,n);for(var i=d.keys(t),o=i.length,a={},r=0;r<o;r++){var s=i[r];a[s]=e(t[s],s,t)}return a},d.pairs=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},d.invert=function(t){for(var e={},n=d.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()};var z=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var o=1;o<i;o++)for(var a=arguments[o],r=t(a),s=r.length,c=0;c<s;c++){var p=r[c];e&&void 0!==n[p]||(n[p]=a[p])}return n}};d.extend=z(d.allKeys),d.extendOwn=d.assign=z(d.keys),d.findKey=function(t,e,n){e=b(e,n);for(var i,o=d.keys(t),a=0,r=o.length;a<r;a++)if(e(t[i=o[a]],i,t))return i};var F,R,D=function(t,e,n){return e in n};d.pick=v((function(t,e){var n={},i=e[0];if(null==t)return n;d.isFunction(i)?(e.length>1&&(i=g(i,e[1])),e=d.allKeys(t)):(i=D,e=A(e,!1,!1),t=Object(t));for(var o=0,a=e.length;o<a;o++){var r=e[o],s=t[r];i(s,r,t)&&(n[r]=s)}return n})),d.omit=v((function(t,e){var n,i=e[0];return d.isFunction(i)?(i=d.negate(i),e.length>1&&(n=e[1])):(e=d.map(A(e,!1,!1),String),i=function(t,n){return!d.contains(e,n)}),d.pick(t,i,n)})),d.defaults=z(d.allKeys,!0),d.create=function(t,e){var n=k(t);return e&&d.extendOwn(n,e),n},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),i=n.length;if(null==t)return!i;for(var o=Object(t),a=0;a<i;a++){var r=n[a];if(e[r]!==o[r]||!(r in o))return!1}return!0},F=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"===o||"object"===o||"object"==typeof e)&&R(t,e,n,i)},R=function(t,e,n,i){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=p.call(t);if(o!==p.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return r.valueOf.call(t)===r.valueOf.call(e)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,c=e.constructor;if(s!==c&&!(d.isFunction(s)&&s instanceof s&&d.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),a){if((l=t.length)!==e.length)return!1;for(;l--;)if(!F(t[l],e[l],n,i))return!1}else{var h,u=d.keys(t);if(l=u.length,d.keys(e).length!==l)return!1;for(;l--;)if(h=u[l],!w(e,h)||!F(t[h],e[h],n,i))return!1}return n.pop(),i.pop(),!0},d.isEqual=function(t,e){return F(t,e)},d.isEmpty=function(t){return null==t||(T(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=h||function(t){return"[object Array]"===p.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){d["is"+t]=function(e){return p.call(e)==="[object "+t+"]"}})),d.isArguments(arguments)||(d.isArguments=function(t){return w(t,"callee")});var W=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return!d.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&isNaN(t)},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===p.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){if(!d.isArray(e))return w(t,e);for(var n=e.length,i=0;i<n;i++){var o=e[i];if(null==t||!l.call(t,o))return!1;t=t[o]}return!!n},d.noConflict=function(){return n._=i,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return d.isArray(t)?function(e){return E(e,t)}:y(t)},d.propertyOf=function(t){return null==t?function(){}:function(e){return d.isArray(e)?E(t,e):t[e]}},d.matcher=d.matches=function(t){return t=d.extendOwn({},t),function(e){return d.isMatch(e,t)}},d.times=function(t,e,n){var i=Array(Math.max(0,t));e=g(e,n,1);for(var o=0;o<t;o++)i[o]=e(o);return i},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=d.invert(U),G=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};d.escape=G(U),d.unescape=G(Y),d.result=function(t,e,n){d.isArray(e)||(e=[e]);var i=e.length;if(!i)return d.isFunction(n)?n.call(t):n;for(var o=0;o<i;o++){var a=null==t?void 0:t[e[o]];void 0===a&&(a=n,o=i),t=d.isFunction(a)?a.call(t):a}return t};var V=0;d.uniqueId=function(t){var e=++V+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},X=/\\|'|\r|\n|\u2028|\u2029/g,J=function(t){return"\\"+$[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var i,o=RegExp([(e.escape||q).source,(e.interpolate||q).source,(e.evaluate||q).source].join("|")+"|$","g"),a=0,r="__p+='";t.replace(o,(function(e,n,i,o,s){return r+=t.slice(a,s).replace(X,J),a=s+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e})),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{i=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return i.call(this,t,d)},c=e.variable||"obj";return s.source="function("+c+"){\n"+r+"}",s},d.chain=function(t){var e=d(t);return e._chain=!0,e};var K=function(t,e){return t._chain?d(e).chain():e};d.mixin=function(t){return d.each(d.functions(t),(function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),K(this,n.apply(d,t))}})),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],K(this,n)}})),d.each(["concat","join","slice"],(function(t){var e=o[t];d.prototype[t]=function(){return K(this,e.apply(this._wrapped,arguments))}})),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)}}()}));kn._;_n('@media screen and (max-width:768px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}@media screen and (min-width:769px){.pixnet-happix-pilot__coupon-card__wrapper{width:100%;border-radius:20px;background-color:#f6f6f6;overflow:hidden}.pixnet-happix-pilot__coupon-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__coupon-card__cover{width:100%}.pixnet-happix-pilot__coupon-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:22px;transform:translateY(-2px);-webkit-transform:translateY(-2px);-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 5px;background-color:#ff7674;border-radius:6px;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;vertical-align:middle}.pixnet-happix-pilot__coupon-card__tag:before{display:inline-block;width:18px;height:18px;content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_coupon.svg)}.pixnet-happix-pilot__coupon-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__coupon-card__description{margin-top:12px;margin-bottom:15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a}.pixnet-happix-pilot__coupon-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__btn-link a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;text-decoration:none;line-height:40px}.pixnet-happix-pilot__coupon-card__btn-link a:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}.pixnet-happix-pilot__coupon-card__runs-out{min-height:40px;border-top:2px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__coupon-card__runs-out a{display:block;padding:10px 0;color:#a8a9b2;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;letter-spacing:1px;text-decoration:none;line-height:1.83;pointer-events:none;cursor:not-allowed}}');var yn=function(t){function e(t,n){return J(this,e),Ce(this,Be(e).call(this,t,n))}return je(e,$e),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix();return this.props.cover?'<img class="'.concat(t,'__coupon-card__cover" src="').concat(this.props.cover,'" alt="coupon card">'):""}},{key:"_getLinkText",value:function(){switch(this.props.state){case"ACCEPTED":return"已領取 <div>可到 email 查看優惠</div>";case"PENDING":return"免費領取";case"UNAVAILABLE":return"已領完";default:return""}}},{key:"_getLinkTextStyle",value:function(){var t=this.getCssPrefix(),e=this.props.state;return"".concat(t,"PENDING"===e?"__coupon-card__btn-link":"__coupon-card__runs-out")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,"__coupon-card__").concat(this.props.id,'">\n                <div class="').concat(t,'__coupon-card__wrapper">\n                    ').concat(this._getImageHtml(),'\n                    <div class="').concat(t,'__coupon-card__content-container">\n                        <div>\n                            <span class="').concat(t,'__coupon-card__tag">').concat(this.props.tag,'</span>\n                            <span class="').concat(t,'__coupon-card__title">').concat(this.props.title,'</span>\n                        </div>\n                        <div class="').concat(t,'__coupon-card__description">').concat(this.props.description,'</div>\n                        <div class="').concat(this._getLinkTextStyle(),'">\n                            <a  \n                                href="').concat(this.props.link,'" target="_blank">\n                                ').concat(this._getLinkText(),"\n                            </a>    \n                        </div>\n                    </div>\n                </div>\n            </div>\n        ")}},{key:"bindEvents",value:function(){var t=this;this.buttonLink.bindEvent("click",kn.debounce((function(){hn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})}),100))}},{key:"getElements",value:function(){var t=this.getCssPrefix();this.couponCardElement=Xe.getElementByPostfix("coupon-card__".concat(this.props.id)),this.buttonLink=Xe.wrapper(document.querySelector(".".concat(t,"__coupon-card__btn-link > a")))}},{key:"render",value:function(){return this.containerElement.appendChild(Xe.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();_n(".pixnet-happix-pilot__message-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__message-card__avatar{width:36px}.pixnet-happix-pilot__message-card__conversation{width:10px}.pixnet-happix-pilot__message-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px;background:#f6f6f6;border-radius:20px;border-top-left-radius:0;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__message-card__highlight{background-color:#fff4cd}");var wn=function(t){function e(t,n){return J(this,e),Ce(this,Be(e).call(this,t,n))}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e="".concat(t,"__message-card__highlight"),n=this.props.type;return'\n            <div class="'.concat(t,'__message-card">\n                <img\n                    class="').concat(t,'__message-card__avatar"\n                    src="').concat(Fe,"/").concat("special"===n?{visa:"visa.png"}[Hn.rules.ruleType]:"btn_happix_new_avatar.svg",'"\n                    alt="message card"\n                />\n                <img\n                    class="').concat(t,'__message-card__conversation"\n                    src="').concat(Fe,'/conversation_yellow.svg"\n                    alt="message card"\n                />\n                <div class="').concat(t,"__message-card__content ").concat(e,'">').concat(this.props.message,"</div>\n            </div>\n        ")}},{key:"getElements",value:function(){this.messageCardElement=Xe.getElementByPostfix("message-card")}},{key:"render",value:function(){return this.containerElement.appendChild(Xe.createElement(this.getTemplate())),this.getElements(),this}}]),e}(),En=function(){var t=Number(qe.$mobile_screen_max_width.replace("px",""));return window.innerWidth<=t};_n('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#66b3d9;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#66b3d9;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var Cn=function(t){function e(t,n,i,o){var a;return J(this,e),(a=Ce(this,Be(e).call(this,t,n))).messenger=o,a.position=i,a}return je(e,$e),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=En();return this.props.cover?'\n            <img\n                class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:xn(this.props.cover,254,127),'"\n                alt="task card"\n            >\n        '):""}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=2===this.props.msg_pos?"".concat(t,"__task-card__highlight"):"";return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.position,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),'\n                </div>\n                <div class="').concat(t,"__task-card__content-container ").concat(e,'">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>即享優惠</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",kn.debounce((function(){Hn.sendAnalytic({category:"pilot_w_special_missions",action:"click_mission_".concat(t.position,"_to_external_w_max_imp_").concat(t.messenger.maxImpressionTask)})}),100))}},{key:"bindActiveViewEvent",value:function(){var t,e=this,n=this.taskCardElement.getElement(),i={root:null,rootMargin:"0px",threshold:1},o=function(i){i.forEach((function(i){i.isIntersecting&&1===i.intersectionRatio&&(Hn.sendAnalytic({category:"pilot_w_special_missions",action:"imp_of_mission_".concat(e.position,"_to_external_URL")}),e.messenger.maxImpressionTask=e.position>e.messenger.maxImpressionTask?e.position:e.messenger.maxImpressionTask,t.unobserve(n))}))};if("undefined"==typeof IntersectionObserver){var a=document.createElement("script");a.addEventListener("load",(function(){(t=new IntersectionObserver(o,i)).observe(n)})),a.src="http://s.pixfs.net/polyfill/intersection-observer.js",document.getElementsByTagName("head")[0].appendChild(a)}else(t=new IntersectionObserver(o,i)).observe(n)}},{key:"getElements",value:function(){this.taskCardElement=this.containerElement.getElementByPostfix("task-card__".concat(this.position))}},{key:"render",value:function(){return this.containerElement.appendChild(Xe.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this.bindActiveViewEvent(),this}}]),e}();_n(".pixnet-happix-pilot__weather-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:#000}.pixnet-happix-pilot__weather-card>:not(:first-child){margin-left:8px}.pixnet-happix-pilot__weather-card img{width:40px}.pixnet-happix-pilot__weather-card span{font-family:PingFang TC;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1.2px;text-overflow:ellipsis}");var Pn=function(t){function e(t,n){return J(this,e),Ce(this,Be(e).call(this,t,n))}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__weather-card">\n                <img src="').concat(Ge[this.props.type],'" alt="weather card" />\n                <span>').concat(this.getTimeGreeting(),"，").concat(Ve[this.props.type],"</span>\n            </div>\n        ")}},{key:"getTimeGreeting",value:function(){var t=(new Date).getHours();return t>4&&t<11?"早安":t>10&&t<17?"午安":"晚安"}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this}}]),e}();_n('@media screen and (max-width:768px){.pixnet-happix-pilot__special-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:2;will-change:opacity}.pixnet-happix-pilot__special-messenger.hidden{opacity:0;pointer-events:none}.pixnet-happix-pilot__special-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;will-change:transform}.pixnet-happix-pilot__special-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__special-messenger__wrapper .pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:47px;right:15px;z-index:1;cursor:pointer}.pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:47px;right:83px;width:70px;z-index:2;cursor:pointer}.pixnet-happix-pilot__special-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-special-sakura 10s linear infinite;animation:happix-special-sakura 10s linear infinite}.pixnet-happix-pilot__special-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__special-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__special-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__special-container{margin-top:20px}.pixnet-happix-pilot__special-messenger__content__card-container>*,.pixnet-happix-pilot__special-messenger__content__coupon-container>*,.pixnet-happix-pilot__special-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__special-messenger__content__card-container>:first-child,.pixnet-happix-pilot__special-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__special-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__special-messenger__fixed{position:fixed}.pixnet-happix-pilot__special-messenger__close_button{position:absolute;top:0;left:0;display:inline-block;width:24px;height:24px;margin:0;padding:10px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 50% no-repeat;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__special-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__special-messenger:focus{outline:none}.pixnet-happix-pilot__special-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__special-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__special-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:3px;right:67px;width:70px;z-index:2;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__special-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-special-sakura 10s linear infinite;animation:happix-special-sakura 10s linear infinite}.pixnet-happix-pilot__special-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__special-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__special-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__special-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__special-messenger__content__card-container>*,.pixnet-happix-pilot__special-messenger__content__coupon-container>*,.pixnet-happix-pilot__special-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__special-messenger__content__card-container>:first-child,.pixnet-happix-pilot__special-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__special-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__special-messenger-mask{opacity:0;will-change:opacity}.pixnet-happix-pilot__special-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}.article-body--sakura-animation,.article-body--sakura-animation .article-content-inner{position:relative}.article-body--sakura-animation:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_1.png),url(https://s.pixfs.net/common/pixhappix-ui-module/images/visa_sakura_2.png);-webkit-animation:happix-article-sakura 10s linear;animation:happix-article-sakura 10s linear;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes happix-special-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px}}@keyframes happix-special-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px}}@-webkit-keyframes happix-article-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px;opacity:0}}@keyframes happix-article-sakura{0%{background-position:0 0,0 0}50%{background-position:500px 500px,100px 200px}to{background-position:900px 1000px,200px 400px;opacity:0}}');var Tn=function(t){function e(t,n){var i;return J(this,e),(i=Ce(this,Be(e).call(this,t,n))).saveWindowScroll(),i.maxImpressionTask=1,i.closeSpecialMessager=i.closeSpecialMessager.bind(Ee(Ee(i))),i.openHappixMessager=i.openHappixMessager.bind(Ee(Ee(i))),i}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__special-messenger-mask"></div>\n            <div\n                class="').concat(t,"__special-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(an.getOptions().getPilotWidth(),'px;"\n            >\n                <div class="').concat(t,'__special-messenger__wrapper hidden">\n                    <img\n                        class="').concat(t,'__special-messenger__avatar"\n                        src="').concat(Fe,"/").concat({visa:"visa_chat.png"}[Hn.rules.ruleType],'"\n                        alt="special messenger"\n                    />\n                    <img\n                        class="').concat(t,'__happix-messenger__avatar"\n                        src="').concat(Fe,'/btn_happix_ufo_open.png"\n                        srcset="').concat(Fe,"/btn_happix_ufo_open@2x.png 2x,\n                                ").concat(Fe,'/btn_happix_ufo_open@3x.png 3x"\n                        alt="happix ufo"\n                    />\n                    <div class="').concat(t,'__special-messenger__content">\n                        ').concat(En()?'<span class="'.concat(t,'__special-messenger__close_button"></span>'):"",'\n                        <div class="').concat(t,'__special-messenger__content__weather-container"></div>\n                        <div class="').concat(t,'__special-messenger__content__date-container">\n                            ').concat(n,'\n                        </div>\n                        <div class="').concat(t,'__special-messenger__content__special-container"></div>\n                        <div class="').concat(t,'__special-messenger__content__coupon-container"></div>\n                        <div class="').concat(t,'__special-messenger__content__task-container"></div>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=Xe.getElementBySelector("body"),this.specialMaskElement=Xe.getElementByPostfix("special-messenger-mask"),this.specialMessengerElement=Xe.getElementByPostfix("special-messenger"),this.specialWrapperElement=this.specialMessengerElement.getElementByPostfix("special-messenger__wrapper"),this.happixAvatarElement=this.specialMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.specialAvatarElement=this.specialMessengerElement.getElementByPostfix("special-messenger__avatar"),this.specialContentElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content"),this.weatherContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__weather-container"),this.specialContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__special-container"),this.couponContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__coupon-container"),this.taskContainerElement=this.specialMessengerElement.getElementByPostfix("special-messenger__content__task-container"),this.specialCloseButtonElement=this.specialMessengerElement.getElementByPostfix("special-messenger__close_button")}},{key:"bindEvents",value:function(){this.specialMaskElement.bindEvent("click",this.closeSpecialMessager),this.specialMessengerElement.bindEvent("click",this.closeSpecialMessager),this.happixAvatarElement.bindEvent("click",this.openHappixMessager),this.specialAvatarElement.bindEvent("click",this.closeSpecialMessager),En()&&this.specialCloseButtonElement.bindEvent("click",this.closeSpecialMessager),this.specialContentElement.bindEvent("click",(function(t){t.stopPropagation()}))}},{key:"closeSpecialMessager",value:function(t){t.stopPropagation(),this.hide(),Hn.sendAnalytic({category:"pilot_w_special_missions",action:"close_special_missions"}),document.querySelector("#main .article-body").classList.add("article-body--sakura-animation")}},{key:"openHappixMessager",value:function(t){t.stopPropagation(),this.hide(),Hn.showHappixMessenger(),Hn.sendAnalytic({category:"pilot_w_special_missions",action:"click_on_happix_tab"})}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=void 0===i?{}:i,a=t.task;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:o.display_name,msg_pos:1,type:"special"}),a&&(this.taskMessageCard=this.createTaskMessageCard({message:a.intro,type:"special"}),this.taskCards=a.items.map((function(t,n){var i=n+1;return e.createTaskCard(t,i)})))}},{key:"createWeatherCard",value:function(t){return new Pn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new zn(this.specialContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new wn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t,e){return new Cn(this.taskContainerElement,t,e,this).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.specialMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){var t=this.getCssPrefix();this.specialMessengerElement.addClass("hidden"),this.specialWrapperElement.addClass("hidden"),this.specialMaskElement.removeClass("show"),En()&&(this.bodyElement.removeClass("".concat(t,"__special-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.specialMessengerElement.setStyle("transition","all .4s").removeClass("hidden"),this.specialWrapperElement.removeClass("hidden"),this.specialMaskElement.setStyle("transition","opacity .4s").addClass("show"),this.specialContentElement.scrollToTop(),En()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__special-messenger__fixed")).setStyle("overflow","hidden")),this.specialMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Sn=document.querySelector('meta[name="static-version"]'),Mn=Sn?Sn.content:"",Bn="安心網購無國界，刷Visa購物樂趣無限大！",An="很高興見到你！今天飄櫻花雨有驚喜？刷Visa完美迫降你的生活消費！",Nn=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).imgNum,e=void 0===t?0:t;return{cover:"".concat(Fe,"/visa-task/EC").concat(e?"-".concat(e):"",".png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=2b8867949316d0454c9de7c9e6903d1a",msg_pos:1,tag:"優惠點我",title:"安心網購無國界，刷Visa購物樂趣無限大！點擊看更多>>"}},On={cover:"".concat(Fe,"/visa-task/food.png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=ae76693776d38e3c23789a0bbb8b0ce5",msg_pos:1,tag:"立馬訂餐",title:" 不是你太懶，是刷Visa太方便！foodpanda刷Visa首購享5折優惠，還有12次9折等你拿！點擊看更多>>"},jn={Baby:{notification:Bn,contentMessage:An,intro:"下單刷Visa，全球購物零時差！",items:[{cover:"".concat(Fe,"/visa-task/baby.png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=a7280f6763e90be42518d596e2e8ef5c",msg_pos:1,tag:"優惠點我",title:"國外童裝也太燒！刷Visa不用出門就能買到當季流行童裝！點擊看更多>>"},On]},Makeup:{notification:Bn,contentMessage:An,intro:"下單刷Visa，全球購物零時差！",items:[{cover:"".concat(Fe,"/visa-task/makeup.png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=78a5d84d3e6efcbf01ba5769a1b47665",msg_pos:1,tag:"優惠點我",title:"看完美妝開箱手癢癢？拿起Visa卡手刀下單買齊最火單品！點擊看更多>>"},On]},fashion:{notification:Bn,contentMessage:An,intro:"下單刷Visa，全球購物零時差！",items:[{cover:"".concat(Fe,"/visa-task/fashion.png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=1c4135fd84e2eebae68deede8ffd22e2",msg_pos:1,tag:"優惠點我",title:" It美包好想要！免出國刷Visa還可享最高7折優惠！點擊看更多>>"},On]},EC:{notification:Bn,contentMessage:An,intro:"下單刷Visa，全球購物零時差！",items:[Nn({imgNum:1}),On]},Food:{notification:Bn,contentMessage:An,intro:"宅在家懶出門？刷Visa美食直送到家！",items:[On,Nn()]},Gaming:{notification:Bn,contentMessage:An,intro:"宅在家電玩咖，Visa陪你奮戰到底！",items:[{cover:"".concat(Fe,"/visa-task/gaming.png?v=").concat(Mn),description:"",end_time:1572623940,link:"https://falcon.pixnet.net/ad/rc?i=91844c326639544a84477a1dec38fed9",msg_pos:1,tag:"開戰先點",title:"實況主神反應下線？原來MyCard刷Visa儲值有超補優惠！點擊看更多>>"},Nn({imgNum:4})]}},In=function(){function t(){J(this,t),this.gaId="UA-126760750-6",this.ruleType="visa",this.matchCates="",this.isActive=!1,this.initial()}return tt(t,[{key:"initial",value:function(){this.isActive=this.shouldActive(),this.tasks=jn[this.matchCates]}},{key:"shouldActive",value:function(){return!1}},{key:"getEventLabel",value:function(){return"visa-".concat(this.matchCates)}}]),t}(),Ln=function(){function t(){J(this,t),this.hasSetMessengerData=!1,this.rules=null,this.isActive=!1,this.initial()}return tt(t,[{key:"initial",value:function(){var t=new In;t.isActive&&(this.rules=t),this.isActive=!!this.rules,pix.mobileNoAd&&(this.isActive=!1),this.isActive&&(this.initGA(this.rules.gaId),this.sendImpression())}},{key:"sendImpression",value:function(){this.sendAnalytic({category:"pilot_w_dialog",action:"imp_of_pilot_visa"})}},{key:"setTaskData",value:function(t,e){this.weather=t,this.memberInfo=e}},{key:"setLaunchBarData",value:function(t){this.launchBar=t}},{key:"showHappixMessenger",value:function(){this.launchBar.showHappixMessenger()}},{key:"showSpecialMessenger",value:function(){var t=this;this.hasSetMessengerData||(this.specialMessengerElement=Xe.getElementByPostfix("launcher-bar__special-messenger"),this.specialMessenger=new Tn(this.specialMessengerElement,{dangling:!0}).render(),this.specialMessenger.setData({weather:this.weather,memberInfo:this.memberInfo,task:this.rules.tasks}),this.hasSetMessengerData=!0),requestAnimationFrame((function(){requestAnimationFrame((function(){t.specialMessenger.show()}))}))}},{key:"getContentMessage",value:function(){return this.rules.tasks.contentMessage}},{key:"initGA",value:function(t){ga("create",t,"auto","pixnetSpecialPilot")}},{key:"sendAnalytic",value:function(t){if(!this.isActive)return!1;var e=t.category,n=t.action,i=t.label,o=t.value;i=this.rules.getEventLabel(),"undefined"!=typeof ga&&ga("pixnetSpecialPilot.send","event",e,n,i,o),"undefined"!=typeof _piq&&_piq.push(["trackEvent",e,n,i,o])}}]),t}();window.pixShowSpecialElementsRules=new Ln;var Hn=window.pixShowSpecialElementsRules;_n('.pixnet-happix-pilot__happix-card{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}.pixnet-happix-pilot__happix-card__avatar{width:36px}.pixnet-happix-pilot__happix-card__conversation{width:10px}.pixnet-happix-pilot__happix-card__content{-webkit-box-flex:1;-ms-flex:1;flex:1;padding:15px 15px 0;color:#000;background:#f6f6f6;border-radius:20px;border-top-left-radius:0}.pixnet-happix-pilot__happix-card__content__message{padding-bottom:15px}.pixnet-happix-pilot__happix-card__content__link,.pixnet-happix-pilot__happix-card__content__message{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px}.pixnet-happix-pilot__happix-card__content__link{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0;border-top:1px solid #e9e9e9;color:#4a90e2;text-align:center;text-decoration:none;cursor:pointer}.pixnet-happix-pilot__happix-card__content__link:hover{color:#4a90e2}.pixnet-happix-pilot__happix-card__content__link.hidden{display:none}.pixnet-happix-pilot__happix-card__content__link:after{display:block;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg);content:"";height:16px;width:16px;margin-left:3px}');var zn=function(t){function e(t,n){return J(this,e),Ce(this,Be(e).call(this,t,n))}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props.name?"".concat(this.props.name,"～我是你的領航員Happix，很高興看到你！"):"我是領航員Happix，很高興看到你！600萬人正在挑戰任務拿好康，快跟上！",n=this.props.name?"hidden":"",i=this.props.type;return"special"===i&&(n="hidden",e=Hn.getContentMessage(),e=this.props.name?"".concat(this.props.name,"，").concat(e):e),'\n            <div class="'.concat(t,'__happix-card">\n                <img\n                    class="').concat(t,'__happix-card__avatar"\n                    src="').concat(Fe,"/").concat("special"===i?{visa:"visa.png"}[Hn.rules.ruleType]:"btn_happix_new_avatar.svg",'"\n                    alt="happix"\n                />\n                <img\n                    class="').concat(t,'__happix-card__conversation"\n                    src="').concat(Fe,'/conversation_gray.svg"\n                    alt="happix"\n                />\n                <div class="').concat(t,'__happix-card__content">\n                    <div class="').concat(t,'__happix-card__content__message">').concat(e,'</div>\n                    <a\n                        class="').concat(t,"__happix-card__content__link ").concat(n,'"\n                        href="').concat(an.getOptions().getLoginURL(),'"\n                    >\n                        立即登入\n                    </a>\n                </div>\n            </img>\n        ')}},{key:"getElements",value:function(){this.happixCardElement=Xe.getElementByPostfix("happix-card"),this.contentLinkElement=this.happixCardElement.getElementByPostfix("happix-card__content__link")}},{key:"bindEvents",value:function(){var t=this;this.contentLinkElement.bindEvent("click",(function(){hn({category:"pilot-happixPopup",action:"login"}),hn({category:"pilot-happixPopup",action:"positionClick",label:t.props.msg_pos})}))}},{key:"render",value:function(){return this}}]),e}(),Fn={now:function(){return Date.now()},withinSpecificHours:function(t,e,n){return!(!t||!e)&&Math.ceil(Math.abs(t-e))<36e5*n},toCountDownTime:function(t){var e=Number(t)-this.now()/1e3,n=e>0?"剩下":"過期",i=Math.floor(e/60),o=Math.floor(i/1440),a=Math.floor((i-1440*o)/60);return n+o+"日"+a+"小時"+(i-1440*o-60*a)+"分"}};_n('@media screen and (max-width:768px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;bottom:0;width:100%;padding:2px 15px;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;-webkit-transform:translateY(-2px);transform:translateY(-2px);background-color:#f7b600;border-radius:6px}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;text-align:justify;color:#000}.pixnet-happix-pilot__task-card__description{overflow:hidden;max-height:61px;height:auto;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}@media screen and (min-width:769px){.pixnet-happix-pilot__task-card__wrapper{display:block;overflow:hidden;text-decoration:none;background-color:#f6f6f6;border-radius:20px}.pixnet-happix-pilot__task-card__wrapper:hover{text-decoration:none}.pixnet-happix-pilot__task-card__content-container{padding:15px 15px 0}.pixnet-happix-pilot__task-card__highlight{background-color:#fff4cd}.pixnet-happix-pilot__task-card__cover{display:block;width:100%}.pixnet-happix-pilot__task-card__tag{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:22px;padding:0 5px;vertical-align:middle;font-family:PingFang TC;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:#f7b600;border-radius:6px;-webkit-transform:translateY(-2px);transform:translateY(-2px)}.pixnet-happix-pilot__task-card__tag:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_task.svg);display:inline-block;width:18px;height:18px}.pixnet-happix-pilot__task-card__cover-container{position:relative}.pixnet-happix-pilot__task-card__countdown{position:absolute;width:100%;padding:2px 15px;bottom:0;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#fff;background-color:rgba(0,0,0,.5)}.pixnet-happix-pilot__task-card__countdown:before{content:url(https://s.pixfs.net/common/pixhappix-ui-module/images/icon_time.svg);display:inline-block;width:14px;height:14px;margin-right:5px;vertical-align:middle;-o-object-fit:contain;object-fit:contain;-webkit-transform:translateY(-10%);transform:translateY(-10%)}.pixnet-happix-pilot__task-card__title{font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:1.71;letter-spacing:1px;color:#000;text-align:justify}.pixnet-happix-pilot__task-card__description{overflow:hidden;height:auto;max-height:61px;margin-top:12px;margin-bottom:15px;font-family:PingFang TC;font-size:13px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.69;letter-spacing:1px;color:#4a4a4a;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;-moz-text-overflow:ellipsis;word-wrap:break-word}.pixnet-happix-pilot__task-card__btn-link{height:40px;border-top:1px solid #e9e9e9;text-align:center}.pixnet-happix-pilot__task-card__btn-link span{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-family:PingFang TC;font-size:14px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:1px;color:#4a90e2;line-height:40px}.pixnet-happix-pilot__task-card__btn-link span:after{content:"";display:block;height:16px;width:16px;margin-left:3px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_arrow_blue.svg)}}');var Rn=function(t){function e(t,n){return J(this,e),Ce(this,Be(e).call(this,t,n))}return je(e,$e),tt(e,[{key:"_getImageHtml",value:function(){var t=this.getCssPrefix(),e=En();return this.props.cover?'\n            <img\n                class="'.concat(t,'__task-card__cover"\n                src="').concat(e?this.props.cover:xn(this.props.cover,254,127),'"\n                alt="task card"\n            >\n        '):""}},{key:"_getCountDownHtml",value:function(){if(!this.props.cover)return"";var t=this.getCssPrefix();return'<div class="'.concat(t,'__task-card__countdown">\n                    ').concat(Fn.toCountDownTime(this.props.end_time),"\n                </div>")}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=2===this.props.msg_pos?"".concat(t,"__task-card__highlight"):"";return'\n            <a class="'.concat(t,"__task-card__wrapper ").concat(t,"__task-card__").concat(this.props.id,'"\n                href="').concat(this.props.link,'" target="_blank">\n                <div class="').concat(t,'__task-card__cover-container">\n                    ').concat(this._getImageHtml(),"\n                    ").concat(this._getCountDownHtml(),'\n                </div>\n                <div class="').concat(t,"__task-card__content-container ").concat(e,'">\n                    <div>\n                        <span class="').concat(t,'__task-card__tag">').concat(this.props.tag,'</span>\n                        <span class="').concat(t,'__task-card__title">').concat(this.props.title,'</span>\n                    </div>\n                    <div class="').concat(t,'__task-card__description">').concat(this.props.description,'</div>\n                    <div class="').concat(t,'__task-card__btn-link">\n                        <span>參加任務</span>\n                    </div>\n                </div>\n            </a>\n        ')}},{key:"bindEvents",value:function(){var t=this;this.taskCardElement.bindEvent("click",kn.debounce((function(){hn({category:"pilot-happixPopup",action:"positionClick",label:String(t.props.msg_pos),id:t.props.id})}),100))}},{key:"getElements",value:function(){this.taskCardElement=Xe.getElementByPostfix("task-card__".concat(this.props.id))}},{key:"render",value:function(){return this.containerElement.appendChild(Xe.createElement(this.getTemplate())),this.getElements(),this.bindEvents(),this}}]),e}();_n('@media screen and (max-width:768px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:0;right:0;bottom:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:2;will-change:opacity}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;pointer-events:none}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;-webkit-transition:-webkit-transform .4s;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;will-change:transform}.pixnet-happix-pilot__happix-messenger__wrapper.hidden{-webkit-transform:translateY(100%);transform:translateY(100%)}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar{position:absolute;top:47px;right:83px;width:70px;z-index:1;cursor:pointer}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar.hidden{display:none}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:40px;right:15px;z-index:2;width:70px;height:70px;cursor:pointer}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:110px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 110px);padding:15px 0;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger__fixed{position:fixed}.pixnet-happix-pilot__happix-messenger__close_button{position:absolute;top:0;left:0;display:inline-block;width:24px;height:24px;margin:0;padding:10px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_close.svg) 50% no-repeat;cursor:pointer}}@media screen and (min-width:769px){.pixnet-happix-pilot__happix-messenger{position:fixed;top:180px;right:0;bottom:0;left:0;width:100%;height:calc(100% - 180px);margin:auto;-webkit-transition:all .4s;transition:all .4s}.pixnet-happix-pilot__happix-messenger:focus{outline:none}.pixnet-happix-pilot__happix-messenger.hidden{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%);pointer-events:none}.pixnet-happix-pilot__happix-messenger.dangling{bottom:46px;height:calc(100% - 226px)}.pixnet-happix-pilot__happix-messenger__wrapper{position:absolute;top:0;right:0;bottom:0;width:335px;height:100%}.pixnet-happix-pilot__happix-messenger__wrapper .pixnet-happix-pilot__special-messenger__avatar.hidden{display:none}.pixnet-happix-pilot__happix-messenger__avatar{position:absolute;top:4px;right:0;z-index:2;width:70px;cursor:pointer;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content{position:absolute;top:74px;right:0;bottom:0;left:0;width:100%;padding:15px 0;background:#fff;border-top-right-radius:6px;border-top-left-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.4);box-shadow:0 0 4px 0 rgba(0,0,0,.4);overflow-y:auto;-webkit-overflow-scrolling:touch;z-index:1;pointer-events:auto}.pixnet-happix-pilot__happix-messenger__content>*{margin-right:20px;margin-left:15px}.pixnet-happix-pilot__happix-messenger__content__date-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;margin-right:0;margin-left:0;color:#81828e;font-family:PingFang TC;font-size:11px;font-weight:500;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:.8px}.pixnet-happix-pilot__happix-messenger__content__date-container:before{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-right:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__date-container:after{content:"";-webkit-box-flex:1;-ms-flex:1;flex:1;margin-left:12px;border-top:1px solid #f2f2f2}.pixnet-happix-pilot__happix-messenger__content__happix-container{margin-top:20px}.pixnet-happix-pilot__happix-messenger__content__card-container>*,.pixnet-happix-pilot__happix-messenger__content__coupon-container>*,.pixnet-happix-pilot__happix-messenger__content__task-container>*{margin-top:15px;margin-left:46px}.pixnet-happix-pilot__happix-messenger__content__card-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__coupon-container>:first-child,.pixnet-happix-pilot__happix-messenger__content__task-container>:first-child{margin-top:35px;margin-left:0}.pixnet-happix-pilot__happix-messenger-mask{opacity:0;will-change:opacity}.pixnet-happix-pilot__happix-messenger-mask.show{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.6);opacity:1}}');var Dn,Wn,Un,Yn=function(){return{scrollDepth:{s25:!1,s50:!1,s75:!1,s100:!1},cardTotal:0,positionMax:0}},Gn=function(t){function e(t,n){var i;return J(this,e),(i=Ce(this,Be(e).call(this,t,n))).saveWindowScroll(),i.track=Yn(),i.closeHappixMessager=i.closeHappixMessager.bind(Ee(Ee(i))),i.openSpecialMessager=i.openSpecialMessager.bind(Ee(Ee(i))),i}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=this.props&&this.props.dangling,n=(new Date).toLocaleDateString("zh-TW",{month:"long",day:"numeric",weekday:"short"});return'\n            <div class="'.concat(t,'__happix-messenger-mask"></div>\n            <div\n                class="').concat(t,"__happix-messenger hidden ").concat(e?"dangling":"",'"\n                style="max-width: ').concat(an.getOptions().getPilotWidth(),'px;"\n            >\n                <div class="').concat(t,'__happix-messenger__wrapper hidden">\n                    ').concat(Hn.isActive?'<img\n                class="'.concat(t,'__special-messenger__avatar"\n                src="').concat(Fe,"/").concat({visa:"visa_chat.png"}[Hn.rules.ruleType],'"\n                alt="special messenger"\n            />'):"",'\n                    <img\n                        class="').concat(t,'__happix-messenger__avatar"\n                        src="').concat(Fe,'/btn_happix_new_open.svg"\n                        srcset="').concat(Fe,"/btn_happix_new_open@2x.png 2x,\n                                    ").concat(Fe,'/btn_happix_new_open@3x.png 3x"\n                        alt="happix messenger"\n                    />\n                    <div class="').concat(t,'__happix-messenger__content">\n                        ').concat(En()?'<span class="'.concat(t,'__happix-messenger__close_button"></span>'):"",'\n                        <div class="').concat(t,'__happix-messenger__content__weather-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__date-container">\n                            ').concat(n,'\n                        </div>\n                        <div class="').concat(t,'__happix-messenger__content__happix-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__coupon-container"></div>\n                        <div class="').concat(t,'__happix-messenger__content__task-container"></div>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"getElements",value:function(){this.bodyElement=Xe.getElementBySelector("body"),this.happixMaskElement=Xe.getElementByPostfix("happix-messenger-mask"),this.happixMessengerElement=Xe.getElementByPostfix("happix-messenger"),this.happixWrapperElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__wrapper"),this.happixAvatarElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__avatar"),this.specialAvatarElement=this.happixMessengerElement.getElementByPostfix("special-messenger__avatar"),this.happixContentElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content"),this.weatherContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__weather-container"),this.happixContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__happix-container"),this.couponContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__coupon-container"),this.taskContainerElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__content__task-container"),this.happixCloseButtonElement=this.happixMessengerElement.getElementByPostfix("happix-messenger__close_button")}},{key:"markS25",value:function(){this.track.scrollDepth.s25=!0}},{key:"markS50",value:function(){this.track.scrollDepth.s50=!0}},{key:"markS75",value:function(){this.track.scrollDepth.s75=!0}},{key:"markS100",value:function(){this.track.scrollDepth.s100=!0}},{key:"bindEvents",value:function(){var t=this;this.happixMaskElement.bindEvent("click",this.closeHappixMessager),this.happixMessengerElement.bindEvent("click",this.closeHappixMessager),this.happixAvatarElement.bindEvent("click",this.closeHappixMessager),Hn.isActive&&this.specialAvatarElement.bindEvent("click",this.openSpecialMessager),En()&&this.happixCloseButtonElement.bindEvent("click",this.closeHappixMessager),this.happixContentElement.bindEvent("click",(function(t){t.stopPropagation()})),this.happixContentElement.bindEvent("scroll",kn.debounce((function(e){t.isMessengerVisible()&&(t.trackScrollDepth(e.target),t.trackPositionExposure())}),200));var e=this.happixContentElement.getElement();this.happixContentElement.bindEvent("touchmove",kn.debounce((function(t){var n=e.scrollTop,i=e.scrollHeight,o=n+e.offsetHeight;n<=0&&o>=i?t.preventDefault():n<=0?e.scrollTop=1:o===i&&(e.scrollTop=n-1)}),100,!0))}},{key:"openSpecialMessager",value:function(t){t.stopPropagation(),this.hide(),Hn.showSpecialMessenger(),Hn.sendAnalytic({category:"pilot_w_happix_missions",action:"click_on_special_tab"})}},{key:"closeHappixMessager",value:function(t){t.stopPropagation(),this.containerElement.fireEvent("close"),hn({category:"pilot-happixPopup",action:"closePopup"}),Hn.sendAnalytic({category:"pilot_w_happix_missions",action:"close_happix_missions"})}},{key:"trackScrollDepth",value:function(t){var e=t.scrollTopMax,n=t.scrollTop,i=this.track.scrollDepth,o=i.s25,a=i.s50,r=i.s75,s=i.s100;!o&&n>.25*e&&(hn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-25"}),this.markS25()),!a&&n>.5*e&&(hn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-50"}),this.markS50()),!r&&n>.75*e&&(hn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-75"}),this.markS75()),s||n!==e||(hn({category:"pilot-happixPopup",action:"scrollDepth",label:"scroll-100"}),this.markS100())}},{key:"trackPositionExposure",value:function(){var t=this,e=this.happixCard,n=this.couponCards,i=this.taskCards,o=[];if(e){if(o.push({element:e.happixCardElement.getElement(),pos:e.msg_pos}),n){var a=n.map((function(t){return{element:t.couponCardElement.getElement(),pos:t.props.msg_pos}}));o=o.concat(a)}if(i){var r=i.map((function(t){var e=t.taskCardElement.getElement(),n=t.props;return{element:e,pos:n.msg_pos,id:n.id}}));o=o.concat(r)}var s=o.filter(this.isTopLessThanWindowBottom);s.length>this.track.positionMax&&s.forEach((function(e){e.pos>t.track.positionMax&&(hn({category:"pilot-happixPopup",action:"positionImpression",label:e.pos,id:e.id}),t.track.positionMax=e.pos)}))}}},{key:"isTopLessThanWindowBottom",value:function(t){return t.element.getBoundingClientRect().top<window.innerHeight}},{key:"resetTrackRecord",value:function(){this.track=Yn()}},{key:"setData",value:function(t){var e=this,n=t.weather,i=t.memberInfo,o=t.coupon,a=t.task,r=0;this.weatherCard=this.createWeatherCard({type:n}),this.happixCard=this.createHappixCard({name:i.display_name,msg_pos:1}),r++,o&&(this.couponMessageCard=this.createCouponMessageCard({message:o.intro}),this.couponCards=o.items.map((function(t){return e.createCouponCard(vn({},t,{msg_pos:++r}))}))),a&&(this.taskMessageCard=this.createTaskMessageCard({message:a.intro}),this.taskCards=a.items.map((function(t){return e.createTaskCard(vn({},t,{msg_pos:++r}))}))),this.track.cardTotal=r}},{key:"createWeatherCard",value:function(t){return new Pn(this.weatherContainerElement,t).render()}},{key:"createHappixCard",value:function(t){return new zn(this.happixContainerElement,t).render()}},{key:"createCouponMessageCard",value:function(t){return new wn(this.couponContainerElement,t).render()}},{key:"createCouponCard",value:function(t){return new yn(this.couponContainerElement,t).render()}},{key:"createTaskMessageCard",value:function(t){return new wn(this.taskContainerElement,t).render()}},{key:"createTaskCard",value:function(t){return new Rn(this.taskContainerElement,t).render()}},{key:"saveWindowScroll",value:function(){this.scroll={x:window.scrollX,y:window.scrollY}}},{key:"isMessengerVisible",value:function(){return!this.happixMessengerElement.hasClass("hidden")}},{key:"hide",value:function(){if(this.isMessengerVisible()){this.trackPositionExposure(),this.resetTrackRecord();var t=this.getCssPrefix();this.happixMessengerElement.addClass("hidden"),this.happixWrapperElement.addClass("hidden"),this.happixMaskElement.removeClass("show"),En()&&(this.bodyElement.removeClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow",null),window.scroll(this.scroll.x,this.scroll.y))}return this}},{key:"show",value:function(){if(!this.isMessengerVisible()){var t=this.getCssPrefix();this.happixMessengerElement.setStyle("transition","opacity .4s").removeClass("hidden"),this.happixWrapperElement.removeClass("hidden"),this.happixMaskElement.setStyle("transition","opacity .4s").addClass("show"),this.happixContentElement.scrollToTop(),En()&&(this.saveWindowScroll(),this.bodyElement.addClass("".concat(t,"__happix-messenger__fixed")).setStyle("overflow","hidden")),this.happixMessengerElement.getElement().focus()}return this}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this}}]),e}(),Vn=g.JSON||(g.JSON={stringify:JSON.stringify}),qn=function(t){return Vn.stringify.apply(Vn,arguments)},$n=lt("toStringTag"),Xn="Arguments"==a(function(){return arguments}()),Jn=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),$n))?n:Xn?a(e):"Object"==(i=a(e))&&"function"==typeof e.callee?"Arguments":i},Kn=function(t,e,n,i){try{return i?e(j(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&j(o.call(t)),e}},Zn=lt("iterator"),Qn=Array.prototype,ti=lt("iterator"),ei=g.getIteratorMethod=function(t){if(null!=t)return t[ti]||t["@@iterator"]||nt[Jn(t)]},ni=d((function(t){var e={},n={},i=t.exports=function(t,i,o,a,r){var s,c,p,l,h=r?function(){return t}:ei(t),f=N(o,a,i?2:1),x=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(nt.Array===t||Qn[Zn]===t)}(h)){for(s=u(t.length);s>x;x++)if((l=i?f(j(c=t[x])[0],c[1]):f(t[x]))===e||l===n)return l}else for(p=h.call(t);!(c=p.next()).done;)if((l=Kn(p,f,c.value,i))===e||l===n)return l};i.BREAK=e,i.RETURN=n})),ii=lt("species"),oi=function(t,e){var n,i=j(t).constructor;return void 0===i||null==(n=j(i)[ii])?e:A(n)},ai=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},ri=b.process,si=b.setImmediate,ci=b.clearImmediate,pi=b.MessageChannel,li=b.Dispatch,hi=0,ui={},fi=function(){var t=+this;if(ui.hasOwnProperty(t)){var e=ui[t];delete ui[t],e()}},xi=function(t){fi.call(t.data)};si&&ci||(si=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ui[++hi]=function(){ai("function"==typeof t?t:Function(t),e)},Dn(hi),hi},ci=function(t){delete ui[t]},"process"==a(ri)?Dn=function(t){ri.nextTick(N(fi,t,1))}:li&&li.now?Dn=function(t){li.now(N(fi,t,1))}:pi?(Un=(Wn=new pi).port2,Wn.port1.onmessage=xi,Dn=N(Un.postMessage,Un,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts?(Dn=function(t){b.postMessage(t+"","*")},b.addEventListener("message",xi,!1)):Dn="onreadystatechange"in F("script")?function(t){at.appendChild(F("script")).onreadystatechange=function(){at.removeChild(this),fi.call(t)}}:function(t){setTimeout(N(fi,t,1),0)});var _i={set:si,clear:ci},di=_i.set,mi=b.MutationObserver||b.WebKitMutationObserver,gi=b.process,bi=b.Promise,vi="process"==a(gi);function ki(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=A(e),this.reject=A(n)}var yi={f:function(t){return new ki(t)}},wi=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ei=b.navigator,Ci=Ei&&Ei.userAgent||"",Pi=function(t,e){if(j(t),O(e)&&e.constructor===t)return e;var n=yi.f(t);return(0,n.resolve)(e),n.promise},Ti=lt("species"),Si=lt("iterator"),Mi=!1;try{[7][Si]().return=function(){Mi=!0}}catch(m){}var Bi,Ai,Ni,Oi,ji=_i.set,Ii=function(){var t,e,n,i=function(){var i,o;for(vi&&(i=gi.domain)&&i.exit();t;){o=t.fn,t=t.next;try{o()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(vi)n=function(){gi.nextTick(i)};else if(!mi||b.navigator&&b.navigator.standalone)if(bi&&bi.resolve){var o=bi.resolve(void 0);n=function(){o.then(i)}}else n=function(){di.call(b,i)};else{var a=!0,r=document.createTextNode("");new mi(i).observe(r,{characterData:!0}),n=function(){r.data=a=!a}}return function(i){var o={fn:i,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}(),Li=b.TypeError,Hi=b.process,zi=Hi&&Hi.versions,Fi=zi&&zi.v8||"",Ri=b.Promise,Di="process"==Jn(Hi),Wi=function(){},Ui=Ai=yi.f,Yi=!!function(){try{var t=Ri.resolve(1),e=(t.constructor={})[lt("species")]=function(t){t(Wi,Wi)};return(Di||"function"==typeof PromiseRejectionEvent)&&t.then(Wi)instanceof e&&0!==Fi.indexOf("6.6")&&-1===Ci.indexOf("Chrome/66")}catch(t){}}(),Gi=function(t){var e;return!(!O(t)||"function"!=typeof(e=t.then))&&e},Vi=function(t,e){if(!t._n){t._n=!0;var n=t._c;Ii((function(){for(var i=t._v,o=1==t._s,a=0,r=function(e){var n,a,r,s=o?e.ok:e.fail,c=e.resolve,p=e.reject,l=e.domain;try{s?(o||(2==t._h&&Xi(t),t._h=1),!0===s?n=i:(l&&l.enter(),n=s(i),l&&(l.exit(),r=!0)),n===e.promise?p(Li("Promise-chain cycle")):(a=Gi(n))?a.call(n,c,p):c(n)):p(i)}catch(t){l&&!r&&l.exit(),p(t)}};n.length>a;)r(n[a++]);t._c=[],t._n=!1,e&&!t._h&&qi(t)}))}},qi=function(t){ji.call(b,(function(){var e,n,i,o=t._v,a=$i(t);if(a&&(e=wi((function(){Di?Hi.emit("unhandledRejection",o,t):(n=b.onunhandledrejection)?n({promise:t,reason:o}):(i=b.console)&&i.error&&i.error("Unhandled promise rejection",o)})),t._h=Di||$i(t)?2:1),t._a=void 0,a&&e.e)throw e.v}))},$i=function(t){return 1!==t._h&&0===(t._a||t._c).length},Xi=function(t){ji.call(b,(function(){var e;Di?Hi.emit("rejectionHandled",t):(e=b.onrejectionhandled)&&e({promise:t,reason:t._v})}))},Ji=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Vi(e,!0))},Ki=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw Li("Promise can't be resolved itself");(e=Gi(t))?Ii((function(){var i={_w:n,_d:!1};try{e.call(t,N(Ki,i,1),N(Ji,i,1))}catch(t){Ji.call(i,t)}})):(n._v=t,n._s=1,Vi(n,!1))}catch(t){Ji.call({_w:n,_d:!1},t)}}};Yi||(Ri=function(t){(function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!")})(this,Ri,"Promise","_h"),A(t),Bi.call(this);try{t(N(Ki,this,1),N(Ji,this,1))}catch(t){Ji.call(this,t)}},(Bi=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:G(t,i,e[i]);return t}(Ri.prototype,{then:function(t,e){var n=Ui(oi(this,Ri));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Di?Hi.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Vi(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ni=function(){var t=new Bi;this.promise=t,this.resolve=N(Ki,t,1),this.reject=N(Ji,t,1)},yi.f=Ui=function(t){return t===Ri||t===Oi?new Ni(t):Ai(t)}),q(q.G+q.W+q.F*!Yi,{Promise:Ri}),ft(Ri,"Promise"),function(t){var e="function"==typeof g[t]?g[t]:b[t];L&&e&&!e[Ti]&&U.f(e,Ti,{configurable:!0,get:function(){return this}})}("Promise"),Oi=g.Promise,q(q.S+q.F*!Yi,"Promise",{reject:function(t){var e=Ui(this);return(0,e.reject)(t),e.promise}}),q(q.S+!0*q.F,"Promise",{resolve:function(t){return Pi(this===Oi?Ri:this,t)}}),q(q.S+q.F*!(Yi&&function(t,e){if(!e&&!Mi)return!1;var n=!1;try{var i=[7],o=i[Si]();o.next=function(){return{done:n=!0}},i[Si]=function(){return o},t(i)}catch(t){}return n}((function(t){Ri.all(t).catch(Wi)}))),"Promise",{all:function(t){var e=this,n=Ui(e),i=n.resolve,o=n.reject,a=wi((function(){var n=[],a=0,r=1;ni(t,!1,(function(t){var s=a++,c=!1;n.push(void 0),r++,e.resolve(t).then((function(t){c||(c=!0,n[s]=t,--r||i(n))}),o)})),--r||i(n)}));return a.e&&o(a.v),n.promise},race:function(t){var e=this,n=Ui(e),i=n.reject,o=wi((function(){ni(t,!1,(function(t){e.resolve(t).then(n.resolve,i)}))}));return o.e&&i(o.v),n.promise}}),q(q.P+q.R,"Promise",{finally:function(t){var e=oi(this,g.Promise||b.Promise),n="function"==typeof t;return this.then(n?function(n){return Pi(e,t()).then((function(){return n}))}:t,n?function(n){return Pi(e,t()).then((function(){throw n}))}:t)}}),q(q.S,"Promise",{try:function(t){var e=yi.f(this),n=wi(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var Zi=g.Promise,Qi={sendHappixAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(window.pix&&window.pix.member_token){var i={headers:{authorization:window.pix.member_token}};n=nn({},n,i)}if(window.member_token){var o={headers:{authorization:window.member_token}};n=nn({},n,o)}return this[t](e,n)},sendBlogArticleAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(window.pix&&window.pix.member_token){var i={headers:{memberauth:window.pix.member_token}};n=nn({},n,i)}if(window.member_token){var o={headers:{memberauth:window.member_token}};n=nn({},n,o)}return this[t](e,n)},sendBlogArticleRecommendationAPI:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(window.pix&&window.pix.member_token){var i={headers:{Authorization:"Bearer ".concat(window.pix.member_token)}};n=nn({},n,i)}return this[t](e,n)},getUrlCollection:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"article";return this.sendBlogArticleAPI("get","".concat(location.origin,"/api/blog/collectionstatus?object_id=").concat(t,"&type=").concat(e))},postUrlCollection:function(t){return this.sendBlogArticleAPI("post","".concat(location.origin,"/api/blog/collections"),t)},deleteUrlCollection:function(t){return this.sendBlogArticleAPI("delete","".concat(location.origin,"/api/blog/collections"),t)},getUrlRecommendations:function(t){return this.sendBlogArticleAPI("get","".concat(location.origin,"/api/blog/articlepushcounts?article_id=").concat(t))},postUrlRecommendations:function(t){return this.sendBlogArticleRecommendationAPI("post","https://www.pixnet.net/mainpage/api/pushes",t)},deleteUrlRecommendations:function(t){return this.sendBlogArticleRecommendationAPI("delete","https://www.pixnet.net/mainpage/api/pushes",t)},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.ajax("GET",t,e)},post:function(t,e){return this.ajax("POST",t,e)},delete:function(t,e){return this.ajax("DELETE",t,e)},ajax:function(t,e,n){return new Zi((function(i,o){var a=new XMLHttpRequest;a.open(t,e,!0),a.onload=function(){4===a.readyState&&200===a.status&&""!==a.response?i(JSON.parse(a.response)):o(a)},a.onerror=function(){o(a)},n&&n.headers&&X(n.headers).forEach((function(t){a.setRequestHeader(t,n.headers[t])})),n="object"===we(n)?qn(n):n,a.send(n)}))}},to=function(t){return function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(function(t){return t>9999?Math.floor(t/1e3)+"k":t}(t))},eo=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).cssPrefix=n.getCssPrefix(),n}return je(e,$e),tt(e,[{key:"getTemplates",value:function(){return'\n            <div class="'.concat(this.cssPrefix,'__comment-icon icon comment-icon">\n                <img class="icon__img" src="https://s.pixfs.net/common/pixhappix-ui-module/images/btn_comment_2023.svg?1" alt="留言" />\n                <img class="icon__img" src="https://s.pixfs.net/common/pixhappix-ui-module/images/btn_comment_2023-hover.svg?1" alt="留言 hover" />\n            </div>\n            <span class="').concat(this.cssPrefix,'__comment-amount amount-word two"></span>\n        ')}},{key:"getCommentAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__comment-amount"))||{},e=document.body.dataset.articleRepliesCount||document.getElementsByTagName("body")[0].dataset.commentsCount||"";t.innerText=to(e)}},{key:"render",value:function(){document.querySelector("body").dataset.articleId,window.pix,"1"===document.getElementsByTagName("body")[0].dataset.commentClose||(this.containerElement.setHTML(this.getTemplates()),this.getCommentAmount())}}]),e}();_n(".pixnet-happix-pilot__recommend{position:relative}.pixnet-happix-pilot__recommend-icon--recommend{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__recommend-icon--recommend>.happix{width:3000px;height:44px;-webkit-transform:translate3d(988px,0,0);transform:translate3d(988px,0,0);-webkit-transition:-webkit-transform .8s steps(29);transition:-webkit-transform .8s steps(29);transition:transform .8s steps(29);transition:transform .8s steps(29),-webkit-transform .8s steps(29);-webkit-transition-duration:0s;transition-duration:0s}.pixnet-happix-pilot__recommend-icon--recommend>.hover{display:none}.pixnet-happix-pilot__recommend-icon--recommend:hover>.icon__img{-webkit-transform:translate3d(988px,0,0)!important;transform:translate3d(988px,0,0)!important}.pixnet-happix-pilot__recommend-icon--recommend:hover>.happix{opacity:0}.pixnet-happix-pilot__recommend-icon--recommend:hover>.hover{display:block;-webkit-transform:translate3d(-3px,0,0)!important;transform:translate3d(-3px,0,0)!important}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend>.happix{opacity:1;-webkit-transform:translate3d(2px,0,0);transform:translate3d(2px,0,0);-webkit-transition-duration:1s;transition-duration:1s}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend:hover>.hover{display:none}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend:hover>.happix{display:block;-webkit-transform:translate3d(2px,0,0)!important;transform:translate3d(2px,0,0)!important}@media screen and (max-width:768px){.pixnet-happix-pilot__recommend-icon--recommend>.icon__img{width:3000px!important;height:34px!important;-webkit-transform:translate3d(989px,0,0);transform:translate3d(989px,0,0)}.pixnet-happix-pilot__recommend-icon--recommend:hover>.icon__img{display:block}.pixnet-happix-pilot__recommend-icon--recommend:hover>.hover{display:none}.pixnet-happix-pilot__recommend-icon--recommend:hover>.happix{opacity:1}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend>.icon__img{-webkit-transform:translate3d(3px,0,0);transform:translate3d(3px,0,0)}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend:hover>.icon__img{-webkit-transform:translate3d(3px,0,0)!important;transform:translate3d(3px,0,0)!important}.pixnet-happix-pilot__recommend.active .pixnet-happix-pilot__recommend-icon--recommend:hover>.happix{opacity:1}}");var no=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.recommendCount=0,n.recommendStatus=!1,n}return je(e,$e),tt(e,[{key:"bindEvents",value:function(){var t=this;this.containerElement.bindEvent("click",(function(){return t.toggleRecommend(t.recommendStatus)}))}},{key:"getTemplates",value:function(){return'\n            <div class="'.concat(this.cssPrefix,'__recommend">\n                <div class="').concat(this.cssPrefix,"__recommend-icon icon ").concat(this.cssPrefix,'__recommend-icon--recommend">\n                    <img class="icon__img happix" src="').concat(Re,'/icons/btn_happix-active.svg" alt="推文" />\n                    <img class="icon__img hover" src="').concat(Re,'/icons/btn_happix-hover.svg" alt="推文" />\n                </div>\n            </div>\n            <span class="').concat(this.cssPrefix,'__recommend-amount amount-word">0</span>\n        ')}},{key:"getRecommendAmount",value:function(){var t=this,e=this.containerElement.getElementByPostfix("recommend-amount");window.pix&&void 0===pix.member_token?setTimeout((function(){t.getRecommendAmount()}),100):Qi.getUrlRecommendations(document.body.dataset.articleId).then((function(e){e.error||t.renderRecommendStatus(e.data)}),(function(){e.setHTML(String(0))}))}},{key:"postRecommendationsEvent",value:function(){window.pix&&null===window.pix.member_token?location.href=an.getOptions().getLoginURL():Qi.postUrlRecommendations({service:"blog-article",comment_id:"".concat(document.body.dataset.authorMemberUniqid,"-blog-article://members/").concat(document.body.dataset.authorMemberUniqid,"/articles/").concat(document.body.dataset.articleId,"-").concat(document.body.dataset.articleId),push_count:1}).then((function(t){t.data.error||200!==t.status||hn({category:"functionBar",action:"pushClick"})}))}},{key:"deleteRecommendationsEvent",value:function(){window.pix&&null===window.pix.member_token?location.href=an.getOptions().getLoginURL():Qi.deleteUrlRecommendations({service:"blog-article",comment_id:"".concat(document.body.dataset.authorMemberUniqid,"-blog-article://members/").concat(document.body.dataset.authorMemberUniqid,"/articles/").concat(document.body.dataset.articleId,"-").concat(document.body.dataset.articleId)}).then((function(t){t.data.error||200!==t.status||hn({category:"functionBar",action:"pushClick"})}))}},{key:"renderRecommendStatus",value:function(t){var e=this.containerElement.getElementByPostfix("recommend");this.containerElement.getElementByPostfix("recommend-amount").setHTML(to(t.total_recommend_count)),this.recommendCount=t.total_recommend_count,1===t.member_recommend_count?(e.addClass("active"),this.recommendStatus=!0):(e.removeClass("active"),this.recommendStatus=!1)}},{key:"toggleRecommend",value:function(t){var e=this.containerElement.getElementByPostfix("recommend"),n=this.containerElement.getElementByPostfix("recommend-amount");t?(this.recommendStatus=!1,e.removeClass("active"),this.recommendCount--,this.recommendCount<=0&&(this.recommendCount=0),n.setHTML(to(this.recommendCount)),this.deleteRecommendationsEvent()):(this.recommendStatus=!0,e.addClass("active"),this.recommendCount++,n.setHTML(to(this.recommendCount)),this.postRecommendationsEvent())}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvents(),this.getRecommendAmount()}}]),e}(),io={getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,n,i,o,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var r="";if(n)switch(n.constructor){case Number:r=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:r="; expires="+n;break;case Date:r="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+r+(o?"; domain="+o:"")+(i?"; path="+i:"")+(a?"; secure":""),!0},removeItem:function(t,e,n){return!!this.hasItem(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),!0)},hasItem:function(t){return!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]);return t}},oo=function(t,e){var n=".pixnet.net".concat(window.pix&&window.pix.domain_append||"");io.setItem(t,e,null,null,n)},ao=function(t,e){if(t){var n=io.getItem(t),i=Fn.now();return Fn.withinSpecificHours(n,i,e)}return!1},ro=function(){function t(){J(this,t),this.isActive=!1,this.url=null,this.initial()}return tt(t,[{key:"initial",value:function(){this.isActive=!!window.chictripUrl,pix.mobileNoAd&&(this.isActive=!1),this.isActive&&(this.url=window.chictripUrl),this.isActive&&this.sendImpression()}},{key:"sendImpression",value:function(){this.sendAnalytic({category:"chicTrip",action:"goto_button_imp"})}},{key:"showChicTripPage",value:function(){window.open(this.url,"_blank")}},{key:"sendAnalytic",value:function(t){if(!this.isActive)return!1;var e=t.category,n=t.action,i=t.label,o=t.value;"undefined"!=typeof _piq&&_piq.push(["trackEvent",e,n,i,o])}}]),t}();window.pixShowChicTripElementsRules=new ro;var so=window.pixShowChicTripElementsRules;_n('.pixnet-happix-pilot__launcher-bar{position:fixed;right:0;bottom:0;left:0;width:100vw;height:45px;background-color:#fff;-webkit-box-shadow:0 -2px 20px 0 rgba(0,0,0,.1);box-shadow:0 -2px 20px 0 rgba(0,0,0,.1)}.pixnet-happix-pilot__launcher-bar>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-mask{position:fixed;top:0;bottom:0;z-index:40;width:100vw;height:100%;background:rgba(0,0,0,.6);opacity:0;pointer-events:none;will-change:opacity}.pixnet-happix-pilot__launcher-bar-mask.active{opacity:1;pointer-events:auto}.pixnet-happix-pilot__launcher-bar__wrapper{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:100%;margin:auto;background:#fff}.pixnet-happix-pilot__launcher-bar__function{margin:0;padding:0}.pixnet-happix-pilot__launcher-bar__function,.pixnet-happix-pilot__launcher-bar__function .container-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pixnet-happix-pilot__launcher-bar__function .container-item{position:relative;list-style-type:none}.pixnet-happix-pilot__launcher-bar__function .container-item:first-child{margin-left:15px}.pixnet-happix-pilot__launcher-bar__function .container-item+.container-item{margin-left:28px}.pixnet-happix-pilot__launcher-bar__function .container-item .icon{width:28px;height:28px;overflow:hidden}.pixnet-happix-pilot__launcher-bar__function .container-item .icon.comment-icon,.pixnet-happix-pilot__launcher-bar__function .container-item .icon.comment-icon img{width:16px;height:16px}.pixnet-happix-pilot__launcher-bar__function .container-item .icon>img{width:100%;height:auto}.pixnet-happix-pilot__launcher-bar__function .container-item .icon>img:nth-child(n+2){display:none}.pixnet-happix-pilot__launcher-bar__function .container-item .amount-word{margin-left:6px;font-size:14px;line-height:20px;font-family:PingFang TC;color:#757575}.pixnet-happix-pilot__launcher-bar__function .container-item .amount-word.two{margin-left:10px}.pixnet-happix-pilot__launcher-bar__share{position:relative;cursor:pointer}.pixnet-happix-pilot__launcher-bar__comment{cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1;padding:0 6px;border-top-left-radius:22px;border-bottom-left-radius:22px;-webkit-transition:.5s;transition:.5s}.pixnet-happix-pilot__launcher-bar__button-container:after{content:"";position:absolute;left:100%;display:block;width:100vw;height:100%;background:#6eacf5}.pixnet-happix-pilot__launcher-bar__button-container .container-item+.container-item{margin-left:20px}.pixnet-happix-pilot__launcher-bar__button-container__gift-button{width:30px;height:30px;border-radius:100%}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{width:30px;height:30px;background-color:#fff;border-radius:100%;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift_2023.svg)}.pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{content:"";display:inline-block;width:30px;height:30px;background-color:#f6f6f6;background-image:url(https://s.pixfs.net/common/pixhappix-ui-module/images/btn_gift_cta_no_2023.svg?1=);border-radius:100%;cursor:not-allowed}.activat-gift .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner:after{opacity:0;cursor:pointer}.gift-bounce .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:bounce 1s;animation:bounce 1s}.gift-scale .pixnet-happix-pilot__launcher-bar__button-container__gift-button-inner{-webkit-animation:scale .6s;animation:scale .6s}.pixnet-happix-pilot__launcher-bar__button-container .button-bounce{-webkit-animation:bounce 1s;animation:bounce 1s}.pixnet-happix-pilot__launcher-bar__button-container .notify{position:relative;border-radius:50%;-webkit-box-shadow:0 0 0 0 #fff;box-shadow:0 0 0 0 #fff;-webkit-animation:happix_pulse 1.5s 5;animation:happix_pulse 1.5s 5}.pixnet-happix-pilot__launcher-bar__button-container__happix-button-img{display:block;width:30px;height:30px;cursor:pointer}.pixnet-happix-pilot__launcher-bar__button-container__chic-trip-img{display:block;width:140px;height:30px;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bar.showed-gift{-webkit-box-shadow:none;box-shadow:none}.pixnet-happix-pilot__launcher-bar:before{content:"";position:absolute;top:0;z-index:1;display:block;width:100vw;height:2px;background:#6eacf5;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;will-change:transform}.showed-gift.pixnet-happix-pilot__launcher-bar:before{-webkit-transform:translateZ(0);transform:translateZ(0)}.showed-gift .pixnet-happix-pilot__launcher-bar__button-container{border-top-left-radius:0}}@-webkit-keyframes expand{0%{-webkit-transform:scale(.2);transform:scale(.2)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}70%{-webkit-transform:scale(1.6);transform:scale(1.6)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes expand{0%{-webkit-transform:scale(.2);transform:scale(.2)}40%{-webkit-transform:scale(1.2);transform:scale(1.2)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}70%{-webkit-transform:scale(1.6);transform:scale(1.6)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes collapse{0%{-webkit-transform:scale(0);transform:scale(0)}30%{-webkit-transform:scale(1.6);transform:scale(1.6)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes collapse{0%{-webkit-transform:scale(0);transform:scale(0)}30%{-webkit-transform:scale(1.6);transform:scale(1.6)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}60%{-webkit-transform:scale(1.2);transform:scale(1.2)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@keyframes happix_pulse{0%{-webkit-transform:scale(1);transform:scale(1)}70%{-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-box-shadow:0 0 0 7px hsla(0,0%,100%,0);box-shadow:0 0 0 7px hsla(0,0%,100%,0)}to{-webkit-transform:scale(1);transform:scale(1);-webkit-box-shadow:0 0 0 0 hsla(0,0%,100%,0);box-shadow:0 0 0 0 hsla(0,0%,100%,0)}}@-webkit-keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}40%,43%,70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06)}70%{-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@-webkit-keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes scale{0%{-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transform:scale(1.5);transform:scale(1.5)}to{-webkit-transform:scale(1);transform:scale(1)}}.hidden{display:none}');var co=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).options=an.getOptions(),n.happixMessengerData={data:{},setDataFlag:!1},n.visibleState={happixMessengerState:!1,giftState:!1,happixNotificationState:!1,commentBlockState:!1},n.notiShowedIsActed=ao(ze,168),n.showGiftNotification=n.showGiftNotification.bind(Ee(Ee(n))),n.hideGiftNotification=n.hideGiftNotification.bind(Ee(Ee(n))),n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n}return je(e,$e),tt(e,[{key:"getSpecialButton",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar__button-container__special-button container-item">\n                <img class="').concat(t,'__launcher-bar__button-container__happix-button-img"\n                    data-happix-visa-icon\n                    src="').concat(Fe,"/").concat({visa:"visa_head.png"}[Hn.rules.ruleType],'"\n                    alt="happix visa"\n                />\n            </div>\n            ')}},{key:"getChicTripButton",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar__button-container__chic-trip-button container-item">\n                <img class="').concat(t,'__launcher-bar__button-container__chic-trip-img "\n                    data-happix-chic-trip-icon\n                    src="').concat(Fe,'/chicTrip/chicTrip-logo-mobile.png"\n                    alt="happix chicTrip"\n                />\n            </div>\n            ')}},{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-mask"></div>\n            <div class="').concat(t,'__launcher-bar"\n                style="z-index:').concat(this.options.getPilotZIndex(),'"\n            >\n                <div\n                    class="').concat(t,'__launcher-bar__wrapper"\n                    style="max-width: ').concat(this.options.getPilotWidth(),'px"\n                >\n                    <ul class="').concat(t,'__launcher-bar__function">\n                        <li class="').concat(t,'__launcher-bar__recommend container-item"></li>\n                        <li class="').concat(t,'__launcher-bar__comment container-item"></li>\n                    </ul>\n\n                    <div class="').concat(t,'__launcher-bar__button-container">\n                        ').concat(Hn.isActive?this.getSpecialButton():"","\n                        ").concat(so.isActive?this.getChicTripButton():"",'\n                        <div class="').concat(t,"__launcher-bar__button-container__gift-button container-item ").concat(so.isActive?"hidden":"",'">\n                            <div class="').concat(t,'__launcher-bar__button-container__gift-button-inner"></div>\n                        </div>\n                        <div class="').concat(t,'__launcher-bar__button-container__happix-button container-item">\n                            <img\n                                class="').concat(t,'__launcher-bar__button-container__happix-button-img"\n                                src="').concat(Fe,'/btn_happix_new_guide.svg"\n                                alt="happix"\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div class="').concat(t,'__launcher-bar__happix-messenger"></div>\n                <div class="').concat(t,'__launcher-bar__special-messenger"></div>\n            </div>\n            <div class="').concat(t,'__launcher-bar__gift-notification"></div>\n            <div class="').concat(t,'__launcher-bar__happix-notification"></div>\n            <div class="').concat(t,'__launcher-bar__special-notification"></div>\n        ')}},{key:"getElements",value:function(){this.maskElement=Xe.getElementByPostfix("launcher-bar-mask"),this.launcherBarElement=Xe.getElementByPostfix("launcher-bar"),this.buttonContainerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container"),this.giftButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__gift-button"),this.happixButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__happix-button"),this.chicTripButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__chic-trip-button"),this.specialButtonElement=this.launcherBarElement.getElementByPostfix("launcher-bar__button-container__special-button"),this.happixNotificationElement=Xe.getElementByPostfix("launcher-bar__happix-notification"),this.specialNotificationElement=Xe.getElementByPostfix("launcher-bar__special-notification"),this.giftNotificationElement=Xe.getElementByPostfix("launcher-bar__gift-notification"),this.happixMessengerElement=this.launcherBarElement.getElementByPostfix("launcher-bar__happix-messenger"),this.recommendElement=this.launcherBarElement.getElementByPostfix("launcher-bar__recommend"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar__comment")}},{key:"bindEvents",value:function(){var t=this;this.happixNotificationElement.bindEvent("click",(function(){t.showHappixMessenger(),hn({category:"pilot-happixSpeak",action:"happixClick"})})).bindEvent("close",(function(){t.hideHappixNotification(),hn({category:"pilot-happixSpeak",action:"happixClose"})})),this.giftNotificationElement.bindEvent("close",(function(){return t.hideGiftNotification()})),this.giftButtonElement.bindEvent("click",(function(){return t.clickGiftButton()})),this.happixMessengerElement.bindEvent("close",(function(){return t.hideHappixMessenger()})),this.happixButtonElement.bindEvent("click",(function(){return t.clickHappixButton()})),Hn.isActive&&this.specialButtonElement.bindEvent("click",(function(){return t.clickSpecialButton()})),so.isActive&&(this.chicTripButtonElement.bindEvent("click",(function(){return t.clickChicTripButton()})),this.activateButtonBounceFlow(this.chicTripButtonElement)),this.commentElement.bindEvent("click",(function(){t.activateCommentBlock(),hn({category:"functionBar",action:"commentClick"})}))}},{key:"setData",value:function(t,e,n,i,o){this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.happixNotification.setMessage(o),Hn.setTaskData(t,e)}},{key:"setGiftNotificationData",value:function(t){an.setOptions({giftNotificationContent:t}),cn(t.widget_content.ga,an.getOptions().getMemberUniqid()),un("CTA_Load","",t.widget_content.ga),this.activateGiftNotificationFlow()}},{key:"renderGiftNotification",value:function(){var t=an.getOptions().getGiftNotificationContent();this.giftNotification=new dn(this.giftNotificationElement,t).render().hide()}},{key:"checkIsSpecialNotificationExit",value:function(){var t=this.specialNotificationElement.getElementByPostfix("special-notification");return t.getElement()&&!t.hasClass("hidden")}},{key:"clickGiftButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e=this.visibleState.giftState,n={category:"pilot-CTA",action:e?"giftClickClose":"giftClickOpen"};e?this.hideGiftNotification(n):this.showGiftNotification(n),Hn.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:e?"click_gift_icon_to_hide_CTA":"click_gift_icon_to_show_CTA"})}},{key:"clickHappixButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e={category:"pilot-happixSpeak",action:"smallHappixClick"};this.visibleState.happixMessengerState?this.hideHappixMessenger(e):this.showHappixMessenger(e),Hn.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:"click_happix_icon_to_show_missions"})}},{key:"clickSpecialButton",value:function(){var t=this.checkIsSpecialNotificationExit(),e=document.querySelector(".article-body--sakura-animation");e&&e.classList.remove("article-body--sakura-animation"),Hn.showSpecialMessenger(),Hn.sendAnalytic({category:t?"pilot_w_dialog":"pilot_no_dialog",action:"click_special_icon_to_show_missions"})}},{key:"clickChicTripButton",value:function(){so.showChicTripPage(),so.sendAnalytic({category:"chicTrip",action:"goto_button_click"})}},{key:"showHappixNotification",value:function(){this.specialNotification=this.specialNotificationElement.getElementByPostfix("special-notification"),this.happixNotification.show(),this.checkIsSpecialNotificationExit()&&this.specialNotification.setStyle("bottom","117px"),this.happixButtonElement.removeClass("notify"),oo(ze,Fn.now()),this.updateState("happixNotificationState",!0)}},{key:"hideHappixNotification",value:function(){var t=this;this.happixNotification.hide(),this.checkIsSpecialNotificationExit()&&this.specialNotification.setStyle("bottom","47px"),setTimeout((function(){t.happixButtonElement.addClass("notify")}),334),this.updateState("happixNotificationState",!1)}},{key:"showGiftNotification",value:function(t){this.giftNotification&&(this.giftNotification.show(),this.launcherBarElement.addClass("showed-gift").removeClass("gift-scale"),t&&hn(t),this.updateState("giftState",!0))}},{key:"hideGiftNotification",value:function(t){this.giftNotification&&this.giftNotification.hide(),this.launcherBarElement.removeClass("showed-gift").removeClass("gift-bounce").addClass("gift-scale"),t&&hn(t),this.updateState("giftState",!1)}},{key:"showHappixMessenger",value:function(t){var e=this.happixMessengerData,n=e.data;e.setDataFlag||(this.happixMessenger.setData(n),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show(),this.happixButtonElement.removeClass("notify"),t&&hn(t),this.updateState("happixMessengerState",!0)}},{key:"hideHappixMessenger",value:function(t){this.happixMessenger.hide(),t&&hn(t),this.updateState("happixMessengerState",!1)}},{key:"activateCommentBlock",value:function(){if("mobile"===(window.deviceType||pix.deviceType||"")){var t=document.getElementById("comment-block");if(!t)return;return t.classList.add("active"),void this.updateState("commentBlockState",!0)}}},{key:"activateHappixNotificationFlow",value:function(){var t=this;this.notiShowedIsActed||(setTimeout((function(){t.hasGiftNotification()||(t.showHappixNotification(),setTimeout((function(){t.hideHappixNotification(),t.happixButtonElement.addClass("notify")}),1e4))}),1e4),hn({category:"pilot-happixSpeak",action:"happixImpression"}))}},{key:"activateGiftNotificationFlow",value:function(){var t=this.launcherBarElement,e=window.pageYOffset<950,n=!1;this.renderGiftNotification(),e&&window.addEventListener("scroll",function e(){window.pageYOffset>=950&&!n&&(n=!0,this.activeCta(t,0),window.removeEventListener("scroll",e))}.bind(this)),window.innerHeight<530||e?t.addClass("activat-gift"):this.activeCta(t,3e3)}},{key:"activeCta",value:function(t,e){var n=this;setTimeout((function(){t.addClass("activat-gift").addClass("gift-bounce"),setTimeout((function(){return n.showGiftNotification()}),800)}),e)}},{key:"hasGiftNotification",value:function(){return this.launcherBarElement.hasClass("activat-gift")}},{key:"activateButtonBounceFlow",value:function(t){var e=window.pageYOffset<950,n=!1;e&&window.addEventListener("scroll",function e(){window.pageYOffset>=950&&!n&&(n=!0,this.activeBounce(t,0),window.removeEventListener("scroll",e))}.bind(this)),window.innerHeight<530||e||this.activeBounce(t,3e3)}},{key:"activeBounce",value:function(t,e){setTimeout((function(){t.addClass("button-bounce")}),e)}},{key:"updateState",value:function(t,e){this.visibleState[t]=e,this.checkState(t)}},{key:"checkState",value:function(t){var e=this,n=X(this.visibleState).filter((function(t){return e.visibleState[t]})),i=n.length;"happixNotificationState"!==t&&i>1&&this.closeOpenedButton(n.filter((function(e){return e!==t}))[0])}},{key:"closeOpenedButton",value:function(t){var e=this,n={happixMessengerState:this.hideHappixMessenger,giftState:this.hideGiftNotification,commentBlockState:function(){return e.updateState("commentBlockState",!1)}};n[t]&&n[t]()}},{key:"render",value:function(){var t=this;return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.happixNotification=new mn(this.happixNotificationElement).render(),this.happixMessenger=new Gn(this.happixMessengerElement,{dangling:!0}).render(),this.Recommend=new no(this.recommendElement).render(),this.Comment=new eo(this.commentElement).render(),ao("pilot_happix_pulse_animation_timestamp",168)||setTimeout((function(){oo("pilot_happix_pulse_animation_timestamp",Fn.now()),t.happixButtonElement.addClass("notify")}),12e3),Hn.setLaunchBarData(this),this}}]),e}(),po=Math.floor;q(q.S,"Number",{isInteger:function(t){return!O(t)&&isFinite(t)&&po(t)===t}});var lo=g.Number.isInteger;var ho=function(){return!!navigator.userAgent.match("PIXNET")};_n("@media screen and (max-width:768px){.pixnet-happix-pilot__share-list__share-line{display:inline-block;width:32px;height:32px;background:url(https://streamtopic.pixnet.net/asset/images/icons/btn_line.svg) 0 no-repeat;cursor:pointer}}.pixnet-happix-pilot__share-list{position:absolute;bottom:45px;left:50%;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around;width:127px;height:42px;margin-top:4px;background-color:#fff;border-radius:30px;-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.1);box-shadow:0 0 15px 0 rgba(0,0,0,.1);overflow:hidden}.pixnet-happix-pilot__share-list>a{display:block;height:32px}.pixnet-happix-pilot__share-list__share-fb,.pixnet-happix-pilot__share-list__share-link{display:inline-block;width:32px;height:32px;background-repeat:no-repeat;background-position:0 0;cursor:pointer}.pixnet-happix-pilot__share-list__share-fb:hover,.pixnet-happix-pilot__share-list__share-link:hover{background-position:-42px 0}.pixnet-happix-pilot__share-list__share-fb{background-image:url(https://s.pixfs.net/common/icons/share_fb@1x.svg)}.pixnet-happix-pilot__share-list__share-link{background-image:url(https://s.pixfs.net/common/icons/share_link@1x.svg)}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--desktop{top:0;left:60px;margin-top:0;width:auto;max-width:0;-webkit-transition:max-width .3s;transition:max-width .3s}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--desktop.action{max-width:132px;min-width:88px}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--mobile{bottom:45px;left:50%;max-height:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:max-height .3s;transition:max-height .3s}.pixnet-happix-pilot__share-list.pixnet-happix-pilot__share-list--mobile.action{max-height:42px}");var uo=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.isMobile="mobile"===window.deviceType,n}return je(e,$e),tt(e,[{key:"getTemplates",value:function(){var t='<span class="'.concat(this.cssPrefix,'__share-list__share-line"></span>');return'\n            <div class="'.concat(this.cssPrefix,'__share-list-mask"></div>\n            <div class="').concat(this.cssPrefix,'__share-icon icon">\n                <img class="icon__img" src="').concat(Re,'/icons/btn_share.svg" alt="分享" />\n                <img class="icon__img" src="').concat(Re,'/icons/btn_share-hover.svg" alt="分享 hover" />\n            </div>\n            <span class="pixnet-happix-pilot__share-amount amount-word"></span>\n            <div class="').concat(this.cssPrefix,"__share-list\n                ").concat(this.cssPrefix,"__share-list--").concat(this.isMobile?"mobile":"desktop",'">\n                ').concat(this.isMobile?t:"",'\n                <span class="').concat(this.cssPrefix,'__share-list__share-fb"></span>\n                <span class="').concat(this.cssPrefix,'__share-list__share-link"></span>\n            </div>\n        ')}},{key:"bindEvent",value:function(){var t=this,e=window.pix||{};this.shareList=Xe.getElementByPostfix("share-list"),this.fbButton=this.shareList.getElementByPostfix("share-list__share-fb"),this.copyLinkButton=this.shareList.getElementByPostfix("share-list__share-link"),this.isMobile&&(this.lineButton=this.shareList.getElementByPostfix("share-list__share-line"),this.lineButton.bindEvent("click",(function(){ho()?t.sendWebViewAnalytic("click_on_share_webview"):hn({category:"functionBar",action:"shareClick",label:"shareLine"}),e.blogsharelog&&e.blogsharelog("line"),location.href=t.getLINEShareLink()}))),this.fbButton.bindEvent("click",(function(){ho()?t.sendWebViewAnalytic("click_on_share_webview"):hn({category:"functionBar",action:"shareClick",label:"shareFB"}),e.blogsharelog&&e.blogsharelog("facebook"),window.open(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://www.facebook.com/sharer/sharer.php?"+"app_id=".concat(De,"&display=popup&u=").concat(encodeURIComponent(t))}(location.href),"Facebook","height=550,width=550,resizable=1")})),this.copyLinkButton.bindEvent("click",(function(){(function(){try{var t=document.createElement("input"),e=document.getElementById("header-prompt"),n=document.getElementsByTagName("body")[0],i=location.href;if(t.value=i,n.appendChild(t),navigator.userAgent.match(/ipad|ipod|iphone/i)){var o=t.contentEditable,a=t.readOnly,r=document.createRange(),s=window.getSelection();t.contentEditable=!0,t.readOnly=!0,r.selectNodeContents(t),s.removeAllRanges(),s.addRange(r),t.setSelectionRange(0,999999),t.contentEditable=o,t.readOnly=a}else t.select();document.execCommand("copy"),t.blur(),t.remove(),e&&(e.innerHTML="複製連結成功(・∀・)b",e.classList+=" prompt-success",setTimeout((function(){e.classList="header-prompt"}),2e3))}catch(t){console.log(exception)}})(),ho()?t.sendWebViewAnalytic("click_on_share_webview"):hn({category:"functionBar",action:"shareClick",label:"shareLink"}),e.blogsharelog&&e.blogsharelog("link")}))}},{key:"getLINEShareLink",value:function(){var t=encodeURIComponent(location.href);return"https://social-plugins.line.me/lineit/share?url=".concat(t)}},{key:"getShareAmount",value:function(){var t=document.querySelector(".".concat(this.cssPrefix,"__share-amount"))||{},e=document.getElementsByTagName("body")[0].dataset.sharedsCount||"";t.innerText=to(e)}},{key:"sendWebViewAnalytic",value:function(t){hn({category:"share_webview",action:t})}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvent(),this.getShareAmount(),ho()&&this.sendWebViewAnalytic("pageview_share_webview")}}]),e}();_n("@-webkit-keyframes pushAnimate{0%{-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}75%{-webkit-transform:scale(.8);transform:scale(.8)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes pushAnimate{0%{-webkit-transform:scale(.5);transform:scale(.5)}50%{-webkit-transform:scale(1.4);transform:scale(1.4)}75%{-webkit-transform:scale(.8);transform:scale(.8)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes hideTipAnimate{0%{opacity:.95}95%{opacity:.95}98%{opacity:0;max-height:38px}to{opacity:0;max-height:0}}@keyframes hideTipAnimate{0%{opacity:.95}95%{opacity:.95}98%{opacity:0;max-height:38px}to{opacity:0;max-height:0}}.pixnet-happix-pilot__collect{position:relative}.pixnet-happix-pilot__collect-icon--collected{overflow:auto;display:none}.pixnet-happix-pilot__collect-prompt-text{display:none}.pixnet-happix-pilot__collect-prompt-icon{position:absolute;left:20px;display:none}.pixnet-happix-pilot__collect-prompt-link{display:none;text-decoration:none}.pixnet-happix-pilot__collect.done .pixnet-happix-pilot__collect-icon{display:none}.pixnet-happix-pilot__collect.done .pixnet-happix-pilot__collect-icon--collected{display:block}.pixnet-happix-pilot__collect.pushAnimate .pixnet-happix-pilot__collect-icon--collected{-webkit-animation:pushAnimate .4s linear .1s;animation:pushAnimate .4s linear .1s}");var fo=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).cssPrefix=n.getCssPrefix(),n.collectCount=0,n.isCollect=!1,n.showingToast=!1,n}return je(e,$e),tt(e,[{key:"bindEvents",value:function(){var t=this;this.containerElement.bindEvent("click",(function(){t.postCollectionEvent(!1)}))}},{key:"getTemplates",value:function(){return'\n            <div class="'.concat(this.cssPrefix,'__collect">\n                <div class="').concat(this.cssPrefix,'__collect-icon icon">\n                    <img class="icon__img" src="').concat(Re,'/icons/btn_collect_g.svg" alt="收藏" />\n                    <img class="icon__img" src="').concat(Re,'/icons/btn_collect-hover.svg" alt="收藏 hover" />\n                </div>\n                <div class="').concat(this.cssPrefix,"__collect-icon icon ").concat(this.cssPrefix,'__collect-icon--collected">\n                    <img src="').concat(Re,'/icons/btn_collect.svg" alt="已收藏" />\n                </div>\n            </div>\n            <span class="').concat(this.cssPrefix,'__collect-amount amount-word">0</span>\n        ')}},{key:"getCollectAmount",value:function(){var t=this,e=this.containerElement.getElementByPostfix("collect-amount");Qi.getUrlCollection(encodeURIComponent(location.href)).then((function(e){e.error||(t.setCollectStatus(e.data.is_collect),t.setCollectCount(e.data.collect_count))}),(function(){e.setHTML(String(0))}))}},{key:"postCollectionEvent",value:function(t){var e=this;if(!window.pix||!window.pix.member_token)return this.assistLogin(),void hn({category:"collectClickStatus",action:"Button_收藏文章_HappixPilot",label:"未登入"});var n=this.containerElement.getElementByPostfix("collect"),i=window.poiHashIds||[];n.removeClass("pushAnimate"),setTimeout((function(){n.addClass("pushAnimate")}),100),hn({category:"collectClickStatus",action:"Button_收藏文章_HappixPilot",label:"登入"}),this.isCollect?Qi.deleteUrlCollection({object_ids:[location.href],type:"article"}).then((function(){hn({category:"collectClick",action:"Button_收藏文章_HappixPilot",label:"取消收藏"}),e.setCollectStatus(!1),e.setCollectCount(Math.max(e.collectCount-1,0)),e.showToast(!1)})):(window.PixNavBar&&window.PixNavBar.collect&&window.PixNavBar.collect(),Qi.postUrlCollection({object_ids:{article:[location.href],poi:i}}).then((function(){hn({category:"collectClick",action:"Button_收藏文章_HappixPilot",label:"".concat(t?"自動":"","收藏成功")}),e.setCollectStatus(!0),e.setCollectCount(e.collectCount+1),setTimeout((function(){e.showToast(!0)}),1e3),localStorage.removeItem("setCollectionArticleUrl"),localStorage.removeItem("setCollectArticle")})))}},{key:"assistLogin",value:function(){localStorage.setItem("setCollectionArticleUrl",location.origin+location.pathname),localStorage.setItem("setCollectArticle","1"),window.pixgame?(window.pixgame.showPromptCollectionLoginPopup.bind(window.pixgame)||function(){})({loginUrl:an.getOptions().getLoginURL(),registerUrl:an.getOptions().getRegisterURL()}):location.href=an.getOptions().getLoginURL()}},{key:"setCollectStatus",value:function(t){this.isCollect=t,this.containerElement.getElementByPostfix("collect").toggleClass("done",t)}},{key:"setCollectCount",value:function(t){this.collectCount=parseInt(t,10),this.containerElement.getElementByPostfix("collect-amount").setHTML(to(t))}},{key:"checkAutoCollect",value:function(){var t=window.pix&&window.pix.member_token,e=localStorage.getItem("setCollectionArticleUrl"),n=localStorage.getItem("setCollectArticle");t&&e===location.origin+location.pathname&&"1"===n&&this.postCollectionEvent(!0)}},{key:"showToast",value:function(t){var e=this;if(!this.showingToast){var n=(window.pix||{}).domain_append||"",i=n?"http":"https",o=document.getElementById("header-prompt"),a=t?"收藏成功":"取消收藏",r='\n            <div class="'.concat(this.cssPrefix,'__collect-prompt-icon">\n                <img src="').concat(Re,'/icons/btn_collect_white.svg" alt="已收藏" />\n            </div>\n            <span class="').concat(this.cssPrefix,'__collect-prompt-text">').concat(a,"</span>\n        "),s=t?'\n            <a\n                href="'.concat(i,"://www.pixnet.net").concat(n,'/pcard/redirect/folders"\n                class="').concat(this.cssPrefix,'__collect-prompt-link"\n            >去看看</a>\n        '):"";o.innerHTML=r+s,o.classList.add("prompt-collect-success"),setTimeout((function(){o.classList.remove("prompt-collect-success"),e.showingToast=!1}),3e3),this.showingToast=!0}}},{key:"render",value:function(){this.containerElement.setHTML(this.getTemplates()),this.bindEvents(),this.getCollectAmount(),this.checkAutoCollect()}}]),e}(),xo=/(alpha|test).pixnet.work/g;_n(".pixnet-happix-pilot__launcher-bar-desktop{position:fixed;z-index:1;right:0;bottom:310px;left:0;width:83px;font-family:Noto Sans CJK TC,PingFang TC,Microsoft JhengHei,Helvetica Neue,Helvetica,Verdana,sans-serif}.pixnet-happix-pilot__launcher-bar-desktop__wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transform:translate(-53px);transform:translate(-53px);-webkit-transition:all .5s;transition:all .5s}.pixnet-happix-pilot__launcher-bar-desktop__wrapper.action{-webkit-transform:translate(0);transform:translate(0)}.pixnet-happix-pilot__launcher-bar-desktop__wrapper.action .pixnet-happix-pilot__launcher-bar-desktop__collapse{border-top-right-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:0;border-bottom-left-radius:0;-webkit-transform:rotate(0);transform:rotate(0)}.pixnet-happix-pilot__launcher-bar-desktop>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bar-desktop *{-webkit-box-sizing:border-box;box-sizing:border-box}.pixnet-happix-pilot__launcher-bar-desktop__function{position:relative;margin:0;padding:5px 10px;width:60px;background:#f6f6f6;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.3);box-shadow:0 0 4px 0 rgba(0,0,0,.3);border-top-right-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:0;border-bottom-left-radius:0}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:10px 0;list-style-type:none;text-align:center;border-radius:50%}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon{position:relative;z-index:2;overflow:hidden;width:40px;height:40px;background-color:#fff;background-repeat:no-repeat;background-position:50%;border-radius:50%}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon:hover>.icon__img{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.pixnet-happix-pilot__launcher-bar-desktop__function .container-item .icon>img{padding:5px}.pixnet-happix-pilot__launcher-bar-desktop__collapse{border:0;width:20px;height:30px;background-color:#6eacf5;background-image:url(https://s.pixfs.net/common/icons/ic_left_white_arrow.svg);background-size:30px;background-position:50%;background-repeat:no-repeat;outline:0;cursor:pointer;border-top-left-radius:6px;border-bottom-left-radius:6px;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.3);box-shadow:0 0 4px 0 rgba(0,0,0,.3);-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pixnet-happix-pilot__launcher-bar-desktop__share{position:relative}.pixnet-happix-pilot__launcher-bar-desktop__collect,.pixnet-happix-pilot__launcher-bar-desktop__comment,.pixnet-happix-pilot__launcher-bar-desktop__recommend,.pixnet-happix-pilot__launcher-bar-desktop__share{cursor:pointer}.pixnet-happix-pilot__launcher-bar-desktop__collect img{width:38px;height:38px}.pixnet-happix-pilot__launcher-bar-desktop__comment .icon{padding-top:5px}.pixnet-happix-pilot__launcher-bar-desktop__comment img{width:30px;height:30px}.pixnet-happix-pilot__launcher-bar-desktop__share img{width:40px;height:40px}");var _o=function(t){function e(t){return J(this,e),Ce(this,Be(e).call(this,t))}return je(e,$e),tt(e,[{key:"getTemplate",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bar-desktop__wrapper">\n                <ul class="').concat(t,'__launcher-bar-desktop__function">\n                    <li class="').concat(t,'__launcher-bar-desktop__collect container-item"></li>\n                    <li class="').concat(t,'__launcher-bar-desktop__recommend container-item"></li>\n                    <li class="').concat(t,'__launcher-bar-desktop__comment container-item"></li>\n                    <li class="').concat(t,'__launcher-bar-desktop__share container-item"></li>\n                </ul>\n                <button id="button-collapse" title="collapse" class="').concat(t,'__launcher-bar-desktop__collapse"></button>\n            </div>\n        ')}},{key:"getElements",value:function(){this.launcherBarWrapperElement=Xe.getElementByPostfix("launcher-bar-desktop__wrapper"),this.launcherBarElement=Xe.getElementByPostfix("launcher-bar-desktop__function"),this.collectElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__collect"),this.recommendElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__recommend"),this.commentElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__comment"),this.shareElement=this.launcherBarElement.getElementByPostfix("launcher-bar-desktop__share"),this.collapseElement=this.launcherBarWrapperElement.getElementByPostfix("launcher-bar-desktop__collapse")}},{key:"bindEvents",value:function(){var t=this;this.shareElement.bindEvent("click",(function(){return t.toggleShareList()})),this.collapseElement.bindEvent("click",(function(){return t.toggleLauncherBar()})),this.commentElement.bindEvent("click",(function(){var t=document.body.dataset,e=t.authorMemberUniqid,n=t.articleId,i=document.querySelector(".header-title"),o=i&&i.innerText||"";window.open(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=null===window.location.host.match(xo),o=""!==n?"".concat(e,"-").concat(n):e;return"https://comments".concat(i?"":"-test",".pixnet.net/blog-article/").concat(t,"/").concat(o)}(e,n,o),"_blank"),hn({category:"functionBar",action:"commentClick"})}))}},{key:"toggleShareList",value:function(){this.shareElement.getElementByPostfix("share-list").hasClass("action")?this.closeShareList():this.openShareList()}},{key:"toggleLauncherBar",value:function(){var t=this.launcherBarWrapperElement,e=this.shareElement.getElementByPostfix("share-list"),n=t.hasClass("action");n?t.removeClass("action"):t.addClass("action"),hn({category:"functionBar",action:n?"closeFunctionBar":"openFunctionBar"}),e.hasClass("action")&&this.closeShareList()}},{key:"openShareList",value:function(){this.shareElement.getElementByPostfix("share-list").addClass("action")}},{key:"closeShareList",value:function(){this.shareElement.getElementByPostfix("share-list").removeClass("action")}},{key:"render",value:function(){var t=this;return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.Comment=new eo(this.commentElement).render(),this.Share=new uo(this.shareElement).render(),this.Recommend=new no(this.recommendElement).render(),this.Collect=new fo(this.collectElement).render(),setTimeout((function(){t.launcherBarWrapperElement.addClass("action")})),this}}]),e}();_n('.pixnet-happix-pilot__launcher-bubble{position:fixed}.pixnet-happix-pilot__launcher-bubble>*{-webkit-font-smoothing:antialiased}.pixnet-happix-pilot__launcher-bubble__wrapper{position:fixed;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.pixnet-happix-pilot__launcher-bubble__container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:right;-ms-flex-pack:right;justify-content:right;max-height:80px}.pixnet-happix-pilot__launcher-bubble__container.hidden{visibility:hidden}.pixnet-happix-pilot__launcher-bubble__container_chic_trip{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:right;-ms-flex-pack:right;justify-content:right;max-height:170px}.pixnet-happix-pilot__launcher-bubble__container_chic_trip.hidden{visibility:hidden}.pixnet-happix-pilot__launcher-bubble__btn_chic_trip{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75px;height:170px;-o-object-fit:contain;object-fit:contain;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__noti_container{position:relative;top:5px;margin:0 8px 0 25px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__noti_container.hidden{overflow:hidden;opacity:0;-webkit-transform:translateX(30px);transform:translateX(30px);-webkit-transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,-webkit-transform .2s linear;transition:opacity .3s linear,transform .2s linear;transition:opacity .3s linear,transform .2s linear,-webkit-transform .2s linear}.pixnet-happix-pilot__launcher-bubble__noti_container:after{content:"";position:absolute;top:0;right:-8px;display:inline-block;width:8px;height:16px;background:url(https://s.pixfs.net/common/pixhappix-ui-module/images/conversation_black@2x.png) no-repeat;background-size:contain}.pixnet-happix-pilot__launcher-bubble__noti_msg{position:relative;padding:12px 15px;font-size:13px;font-weight:500;color:#fff;letter-spacing:1px;border-radius:20px;border-top-right-radius:0;background-color:rgba(0,0,0,.8)}.pixnet-happix-pilot__launcher-bubble__btn_close_alpha{position:absolute;top:-25px;left:-17px;cursor:pointer}.pixnet-happix-pilot__launcher-bubble__btn_happix_ufo{-webkit-box-flex:0;-ms-flex:none;flex:none;width:70px;height:80px;-o-object-fit:contain;object-fit:contain;cursor:pointer}@media screen and (max-width:768px){.pixnet-happix-pilot__launcher-bubble{bottom:0}}@media screen and (min-width:769px){.pixnet-happix-pilot__launcher-bubble__noti_container{max-width:240px}}');var mo=function(t){function e(t){var n;return J(this,e),(n=Ce(this,Be(e).call(this,t))).cookiesData=JSON.parse(io.getItem("pilot_bubble"))||{},n.happixMessengerData={data:{},setDataFlag:!1},n.showHappixGuideMsg=!1,n.configBubbleFixedPosition={configPosition:an.getOptions().getBubbleFixedPosition(),get hasConfigPosition(){var t=this;return X(this.configPosition).some((function(e){return lo(t.configPosition[e])}))}},n.showHappixMessenger=n.showHappixMessenger.bind(Ee(Ee(n))),n.hideHappixMessenger=n.hideHappixMessenger.bind(Ee(Ee(n))),n.clickHappix=n.clickHappix.bind(Ee(Ee(n))),n.dragHappix=n.dragHappix.bind(Ee(Ee(n))),n.setHappixPosition=n.setHappixPosition.bind(Ee(Ee(n))),n}return je(e,$e),tt(e,[{key:"getChicTripButton",value:function(){var t=this.getCssPrefix();return'\n            <div class="'.concat(t,'__launcher-bubble__container_chic_trip">\n                <img class="').concat(t,'__launcher-bubble__btn_chic_trip"\n                    data-happix-chic-trip-icon\n                    src="').concat(Fe,'/chicTrip/chicTrip-logo-desktop.png"\n                    alt="happix chicTrip"\n                />\n            </div>\n            ')}},{key:"getTemplate",value:function(){var t=this.getCssPrefix(),e=an.getOptions();return'\n            <div class="'.concat(t,'__launcher-bar-desktop"></div>\n            <div class="').concat(t,'__launcher-bubble"\n                style="max-width: ').concat(e.getPilotWidth(),"px; z-index: ").concat(e.getPilotZIndex(),'"\n            >\n                <div class="').concat(t,'__launcher-bubble__wrapper">\n                    ').concat(so.isActive?this.getChicTripButton():'\n                        <div class="'.concat(t,'__launcher-bubble__container">\n                            <div\n                                class="').concat(t,'__launcher-bubble__noti_container hidden"\n                                style="display: none;"\n                            >\n                                <div class="').concat(t,'__launcher-bubble__noti_msg"></div>\n                                <img\n                                    class="').concat(t,'__launcher-bubble__btn_close_alpha"\n                                    src="').concat(Fe,'/btn-close-alpha.svg"\n                                    alt="close alpha"\n                                >\n                            </div>\n                            <img\n                                class="').concat(t,'__launcher-bubble__btn_happix_ufo"\n                                src="').concat(Fe,'/btn_happix_new_open.svg"\n                                srcset="').concat(Fe,"/btn_happix_new_open@2x.png 2x,\n                                        ").concat(Fe,'/btn_happix_new_open@3x.png 3x"\n                                alt="happix"\n                            >\n                        </div>\n                    '),'\n                </div>\n                <div class="').concat(t,'__launcher-bubble__happix-messenger"></div>\n            </div>')}},{key:"getElements",value:function(){this.launchBubbleContainerElement=Xe.getElementByPostfix("launcher-bubble"),this.happix=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_happix_ufo"),this.notificationContainerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_container"),this.notificationMsg=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__noti_msg"),this.closeBtn=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_close_alpha"),this.happixMessengerElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__happix-messenger"),this.happixWrapper=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__wrapper"),this.chicTripButtonElement=this.launchBubbleContainerElement.getElementByPostfix("launcher-bubble__btn_chic_trip"),this.functionItemElement=Xe.getElementByPostfix("launcher-bar-desktop")}},{key:"bindEvents",value:function(){var t=this;this.configBubbleFixedPosition.hasConfigPosition||this.happixWrapper.bindEvent("mousedown",this.dragHappix),so.isActive&&this.chicTripButtonElement.bindEvent("click",(function(e){e.stopPropagation(),t.clickChicTripButton()})),this.happixMessengerElement.bindEvent("close",this.hideHappixMessenger),this.happixWrapper.bindEvent("click",this.clickHappix)}},{key:"setData",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"嗨～點一點領航員Happix的頭，有專屬於你的會員驚喜喲！";this.happixMessengerData.data={weather:t,memberInfo:e,coupon:n,task:i},this.showHappixGuideMsg&&(this.notificationMsg&&this.notificationMsg.setHTML(o),this.notificationContainerElement&&this.notificationContainerElement.removeClass("hidden").setStyle("display","block"),hn({category:"pilot-happixSpeak",action:"happixImpression"})),this.bindCloseEvent()}},{key:"expandNotification",value:function(){ao(ze,168)||(this.showHappixGuideMsg=!0,oo(ze,Fn.now()))}},{key:"collapseNotification",value:function(){this.notificationContainerElement&&(this.notificationContainerElement.addClass("hidden"),this.hideElem(this.notificationContainerElement,300))}},{key:"bindCloseEvent",value:function(){var t=this;this.closeBtn&&this.closeBtn.bindEvent("click",(function(e){e.stopPropagation(),t.collapseNotification(),hn({category:"pilot-happixSpeak",action:"happixClose"})}))}},{key:"clickHappix",value:function(t){var e=t.target.className.match("launcher-bubble__btn_happix_ufo");this.happixWrapper.addClass("hidden"),this.showHappixMessenger(),hn({category:"pilot-happixSpeak",action:e?"smallHappixClick":"happixClick"})}},{key:"showHappixMessenger",value:function(){var t=this.happixMessengerData,e=t.data;t.setDataFlag||(this.happixMessenger.setData(e),this.happixMessengerData.setDataFlag=!0),this.happixMessenger.show()}},{key:"hideHappixMessenger",value:function(){this.happixWrapper.removeClass("hidden"),this.happixMessenger.hide()}},{key:"calcDraggableHappixMoveAt",value:function(t,e,n){var i=t.top,o=t.left,a=t.width,r=t.height,s=e.clientX,c=e.clientY,p=n.pageX,l=n.pageY,h=window,u=h.innerWidth,f=u-a,x=h.innerHeight-r,_=p-(s-o),d=l-(c-i)-h.scrollY;return{rightMoveAt:u-(_<0?0:_>f?f:_)-a,topMoveAt:d<45?45:d>x?x:d}}},{key:"dragHappix",value:function(t){var e=this,n=!1,i=this.happixWrapper.getElement(),o=i.getBoundingClientRect();i.ondragstart=function(){return!1},document.onmousemove=function(a){n=!0;var r=e.calcDraggableHappixMoveAt(o,t,a),s=r.rightMoveAt,c=r.topMoveAt;i.style.right="".concat(s,"px"),i.style.top="".concat(c,"px"),oo("pilot_bubble",qn({happixWrapperPosition:{right:s,top:c},tipTimestamp:Fn.now()}))},document.onmouseup=function(){n?(e.happixWrapper.unbindEvent("click",e.clickHappix),hn({category:"pilot-happixSpeak",action:"smallHappixDrag"})):e.happixWrapper.bindEvent("click",e.clickHappix),document.onmousemove=null,document.onmouseup=null}}},{key:"initHappixPosition",value:function(){var t=this.cookiesData.happixWrapperPosition,e=an.getOptions().getPilotWidth(),n=this.happixWrapper.getElement().getBoundingClientRect().height,i={right:window.innerWidth>e?(window.innerWidth-e)/2+10:10,top:window.innerHeight-n-30},o=this.configBubbleFixedPosition,a=o.configPosition;o.hasConfigPosition?this.setHappixPosition(a):t?this.setHappixPosition(t):this.setHappixPosition(i)}},{key:"setHappixPosition",value:function(t){var e=this;X(t).forEach((function(n){e.happixWrapper.setStyle(n,"".concat(t[n],"px"))}))}},{key:"clickChicTripButton",value:function(){so.showChicTripPage(),so.sendAnalytic({category:"chicTrip",action:"goto_button_click"})}},{key:"hideElem",value:function(t,e){t&&setTimeout((function(){return t.setStyle("display","none")}),e)}},{key:"render",value:function(){return this.containerElement.setHTML(this.getTemplate()),this.getElements(),this.bindEvents(),this.initHappixPosition(),this.expandNotification(),this.functionItem=new _o(this.functionItemElement).render(),this.happixMessenger=new Gn(this.happixMessengerElement).render().hide(),this}}]),e}(),go="desktop"===(window.deviceType||pix.deviceType),bo=document.createElement("div"),vo=go?".main-container":"#main-content",ko=go?"bubble":"bar";bo.id="pilot",document.querySelector(vo).appendChild(bo);var yo=pix.domain_append?"http":"https",wo=encodeURIComponent(window.location.href),Eo=pix.domain_append||"",Co=encodeURIComponent(window.location.href.replace(/([\?&]utm_source=PIXNET)|(&utm_medium=Blog_CollectionEXP_login)/g,"")+"?utm_source=PIXNET&utm_medium=Blog_CollectionEXP_login"),Po=encodeURIComponent(window.location.href.replace(/([\?&]utm_source=PIXNET)|(&utm_medium=Blog_CollectionEXP_register)/g,"")+"?isRegister=true&utm_source=PIXNET&utm_medium=Blog_CollectionEXP_register")+"&utm_source=PIXNET&utm_medium=Blog_CollectionEXP_register";window.PixnetHappixPilot=new function(t,e){return{create:function(){var n=Xe.getElementBySelector(t);an.setOptions(e),rn();var i=an.getOptions().getVariant(),o=null;return"bar"===i?o=new co(n).render():"bubble"===i&&(o=new mo(n).render()),function t(){if(void 0!==(window.pix||{}).member_token){var e=an.getOptions().getDomainAppend();Qi.sendHappixAPI("get","".concat("https://happix-pilot-api.pixnet.cc").concat(e,"/pilot-data")).then((function(t){var e=t.pilot_content,n=e.weather,i=e.member_info,a=e.coupon,r=e.task,s=e.guide_message;(function(t){var e=an.getOptions();e.isIncludeGAScript()&&(sn(e.getTrackingId()),t&&ln(t)),e.isIncludePAScript()&&pn(e.getVenue(),t)})(i.member_uniqid),an.setOptions({memberUniqid:i.member_uniqid}),o&&o.setData(n,i,a,r,s)})).catch((function(t){console.log(t)}))}else setTimeout((function(){t()}),100)}(),o}}}("#pilot",{variant:ko,projectName:"blog",domainAppend:"",loginURL:yo+"://member.pixnet.cc"+Eo+"/login/openid?openid="+yo+"%3A%2F%2Fmember.pixnet.cc"+Eo+"%2Flogin&easy_login=1&done="+Co+"&from_service=Blog",logoutURL:yo+"://member.pixnet.cc"+Eo+"/logout?done="+wo,registerURL:yo+"://member.pixnet.cc"+Eo+"/register?from_service=Blog&done="+Po,ga:{isIncludeGAScript:!0,trackingId:"G-JJWPZXHG9P"},pa:{isIncludePAScript:!0,venue:"pixnet"},style:{zIndex:{pilotZIndex:go?1e8:99999},width:{pilotWidth:960}}}).create()}();
